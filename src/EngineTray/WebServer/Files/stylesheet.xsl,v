head	1.9;
access;
symbols
	PublicRelease_1_2e:1.9
	Interim_Release_1-2e_RC1:1.9
	PublicRelease_1_2d:1.9
	Interim_Release_1-2d_RC1:1.9
	Interim_Release_1-2d_beta1:1.9
	PublicRelease_1_2c:1.9
	Interim_Release_1-2c_RC1:1.9
	Interim_Release_1-2c_beta1:1.9
	PublicRelease_1_2b:1.9
	Interim_Release_1-2b_RC1:1.9
	PublicRelease_1_2a:1.9
	Interim_Release_1-2a_RC1:1.9
	Interim_Release_1-2a_beta2:1.9
	Interim_Release_1-2a_beta1:1.9
	PublicRelease_1_2:1.9
	Interim_Release_1-2_RC1:1.9
	Interim_Release_1-2_beta1:1.9
	PublicRelease_1_1g:1.9
	Interim_Release_1-1g_RC3:1.9
	Interim_Release_1-1g_RC2:1.9
	Interim_Release_1-1g_RC1:1.9
	Interim_Release_1-1g_beta2:1.9
	Interim_Release_1-1g_beta1:1.9
	PublicRelease_1_1f:1.9
	Interim_Release_1-1f_RC1:1.9
	PublicRelease_1_1e:1.9
	Interim_Release_1-1e_RC2:1.9
	Interim_Release_1-1e_RC1:1.9
	Interim_Release_1-1e_beta1:1.9
	PublicRelease_1_1d:1.6
	Interim_Release_1-1d_RC1:1.6
	PublicRelease_1_1c:1.6
	Interim_Release_1-1c_RC1:1.4
	Interim_Release_1-1c_beta2:1.3
	Interim_Release_1-1c_beta1:1.2;
locks; strict;
comment	@# @;


1.9
date	2005.04.11.16.32.20;	author kuchin;	state Exp;
branches;
next	1.8;

1.8
date	2005.04.08.11.09.34;	author kuchin;	state Exp;
branches;
next	1.7;

1.7
date	2005.04.07.06.48.24;	author kuchin;	state Exp;
branches;
next	1.6;

1.6
date	2005.02.26.17.52.01;	author kuchin;	state Exp;
branches;
next	1.5;

1.5
date	2005.02.26.09.47.57;	author kuchin;	state Exp;
branches;
next	1.4;

1.4
date	2005.02.23.22.13.02;	author kuchin;	state Exp;
branches;
next	1.3;

1.3
date	2005.02.03.15.14.14;	author kuchin;	state Exp;
branches;
next	1.2;

1.2
date	2005.01.28.20.13.51;	author kuchin;	state Exp;
branches;
next	1.1;

1.1
date	2005.01.23.07.36.32;	author kuchin;	state Exp;
branches;
next	;


desc
@@


1.9
log
@v2 - logging subsystem
@
text
@ï»¿<?xml version="1.0" encoding="utf-8" ?> 
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="emule">
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
</head>
<body>
	<xsl:choose>
	<xsl:when test="@@connected != 0">
		<table border="1">
		<tr>
			<td>
				<xsl:apply-templates select="header"/>
			</td>
		</tr>
		<xsl:apply-templates select="welcome"/>
		<xsl:apply-templates select="servers"/>
		<xsl:apply-templates select="files"/>
		<xsl:apply-templates select="shared"/>
		<xsl:apply-templates select="logs"/>
		<xsl:apply-templates select="debug"/>
		</table>
		
		<xsl:choose>
		<xsl:when test="@@debug != 0">
			<br/>
			<form method="post" action="/debug">
				<i>[Debug] Xml command:</i>
				<br/>
				<textarea name="debug_cmd" cols="80" rows="3"></textarea>
				<input type="hidden" name="test" value="1"/>
				<input type="submit" value="Submit"/>
			</form>
		</xsl:when>
		</xsl:choose>
		<br/>
		<form method="post" action="/">
			<input type="hidden" name="internal_op" value="exit"/>
			<input type="submit" value="Exit engine"/>
		</form>
	</xsl:when>
	<xsl:otherwise>
		Not connected
		<br/>
		<form method="post" action="/">
			<input type="hidden" name="internal_op" value="connect"/>
			Address:
			<input type="text" name="addr">
				<xsl:attribute name="value">
					<xsl:value-of select="@@def_addr"/>
				</xsl:attribute>
			</input>
			Port:
			<input type="text" name="port">
				<xsl:attribute name="value">
					<xsl:value-of select="@@def_port"/>
				</xsl:attribute>
			</input>
			<input type="submit" value="Connect"/>
		</form>
		
		<form method="post" action="/">
		<input type="hidden" name="internal_op" value="shutdown"/>
		<input type="submit" value="Exit"/>
	</form>
</xsl:otherwise>
	</xsl:choose>
	
	<xsl:choose>
	<xsl:when test="@@refresh != 0">
		<br/>
		<i>Refreshing in <xsl:value-of select="@@refresh"/> second(s)...</i>
		<script>
			<xsl:text>
			function pageRefresh()
			{
				window.location.reload();
			}
			setTimeout("pageRefresh()", 
			</xsl:text>
			<xsl:value-of select="@@refresh"/>000
			<xsl:text>
			);
			</xsl:text>
		</script>
	</xsl:when>
	</xsl:choose>
</body>
</html>
</xsl:template>

<xsl:template match="header">
	<table>
	<tr>
		<td colspan="10">
			eMule Plus version <xsl:value-of select="@@version_text"/>
		</td>
	</tr>
	<tr>
		<td>
			<a href="/servers">Servers</a>
		</td>
		<td>
			<a href="/files">Downloads</a>
		</td>
		<td>
			<a href="/files/uploads">Uploads</a>
		</td>
		<td>
			<a href="/search">Search</a>
		</td>
		<td>
			<a href="/shared">Shared Files</a>
		</td>
		<td>
			<a href="/stats">Statistics</a>
		</td>
		<td>
			<a href="/graphs">Graphs</a>
		</td>
		<td>
			<a href="/logs">Logs</a>
		</td>
		<td>
			<a href="/logs/debug">Logs (Debug)</a>
		</td>
		<td>
			<a href="/logs/all">Logs (All)</a>
		</td>
	</tr>
	</table>
</xsl:template>

<xsl:template match="welcome">
	<tr>
		<td>
			Welcome to new ePlus WebInterface!
		</td>
	</tr>
</xsl:template>

<xsl:template match="logs">
	<tr>
		<td>
			<b>Logs</b><br/>
			<table>
			<xsl:for-each select="log">
				<xsl:sort order="ascending" select="@@time"/>
				<tr valign="top">
					<td width="150">
						<b><xsl:value-of select="@@time_text"/></b>
					</td>
					<td>
						<xsl:value-of select="@@text"/>
					</td>
				</tr>
			</xsl:for-each>
			</table>
		</td>
	</tr>
</xsl:template>

<xsl:template match="shared">
	<tr>
		<td>
			<b>Shared files</b><br/>
			<table>
				<tr>
					<td><b>Filename</b></td>
					<td><b>Size</b></td>
					<td><b>Link</b></td>
				</tr>		
				<xsl:for-each select="file">
				<xsl:sort order="ascending" select="@@name"/>
				<tr>
					<td>
						<xsl:value-of select="@@name"/>
					</td>
					<td>
						<xsl:value-of select="@@size"/>
					</td>
					<td>
						<xsl:value-of select="@@link"/>
					</td>
				</tr>
				</xsl:for-each>
			</table>
		</td>
	</tr>
</xsl:template>

</xsl:stylesheet>
@


1.8
log
@v2 - increased level of abstraction + minor improvements
@
text
@d109 1
a109 1
			<a href="/files">Uploads</a>
d126 6
d150 3
a152 3
				<xsl:sort order="descending" select="@@time"/>
				<tr>
					<td>
@


1.7
log
@v2 - more webserver logic
@
text
@d109 3
@


1.6
log
@v2 - upload already works, of course it has very poor implementation, without queues yet, but it works! Also webserver improvements - now you can enter commands through webinterface
@
text
@d5 7
a11 8

<xsl:choose>
<xsl:when test="@@connected != 0">
	<html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	</head>
	<body>
d28 10
d39 7
a45 5
		<form method="post" action="/debug">
		<i>[Debug] Xml command:</i>
		<br/>
		<textarea name="debug_cmd" cols="80" rows="3"></textarea>
		<input type="hidden" name="test" value="1"/>
d47 15
a61 1
		<input type="submit" value="Submit"/>
d63 5
a67 7
		</xsl:when>
		</xsl:choose>
	</body>
	</html>
</xsl:when>
<xsl:otherwise>
	Not connected
d69 23
a91 2
</xsl:choose>

d98 1
a98 1
			eMule Plus version <xsl:value-of select="@@version_text" />
d141 1
a141 1
				<xsl:sort order="descending" select="@@time" />
d144 1
a144 1
						<b><xsl:value-of select="@@time_text" /></b>
d147 1
a147 1
						<xsl:value-of select="@@text" />
d167 1
a167 1
				<xsl:sort order="ascending" select="@@name" />
d170 1
a170 1
						<xsl:value-of select="@@name" />
d173 1
a173 1
						<xsl:value-of select="@@size" />
d176 1
a176 1
						<xsl:value-of select="@@link" />
@


1.5
log
@v2 - opcodes handling improvement, webserver enhancement
@
text
@d22 1
d26 14
a47 14
<xsl:choose>
<xsl:when test="@@debug != 0">
<br/>
<form method="post" action="/debug">
<i>[Debug] Xml command:</i>
<br/>
<textarea name="debug_cmd" cols="80" rows="3"></textarea>
<input type="hidden" name="test" value="1"/>
<br/>
<input type="submit" value="Submit"/>
</form>
</xsl:when>
</xsl:choose>

d112 29
@


1.4
log
@v2 - minor improvements
@
text
@d3 1
d5 1
d32 15
d48 1
d81 1
d89 1
d93 1
a93 1
			<b>Logs</b><br />
d110 2
a111 1
</xsl:stylesheet>@


1.3
log
@Ideological switch (may be considered as temporary, but for long term) - ATL to MFC
Actually we don't need them both, but I want to work with our current KnownFile-based classes, which use MFC a lot
@
text
@d5 1
a5 1
<xsl:when test="@@connected">
d32 30
a61 1
	eMule Plus version <xsl:value-of select="@@version_text" />
@


1.2
log
@Corrected v2 defines, improved v2 webserver and database functionality
@
text
@d17 1
a17 6
		<tr>
			<td>
				<xsl:apply-templates select="welcome"/>
			</td>
		</tr>
		</table>
d20 1
d22 1
d35 25
a59 1
Welcome to new ePlus WebInterface!
@


1.1
log
@More v2 Xml WebInterface
@
text
@d35 1
@

