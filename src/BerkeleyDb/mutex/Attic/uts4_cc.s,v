head	1.2;
access;
symbols
	PublicRelease_1e:1.1
	Interim_Release_1e_RC2:1.1
	Interim_Release_1e_RC:1.1
	Interim_Release_1e_beta3:1.1
	Interim_Release_1e_beta2:1.1
	Interim_Release_1e_beta2_before_kuchin:1.1
	Interim_Release_1e_beta1:1.1
	PublicRelease_1c:1.1
	featurestest:1.1.0.8
	Interim_Release_1c_RC:1.1
	Interim_Release_1c_beta2:1.1
	Interim_Release_1c_beta1:1.1
	threaded_downloadqueue:1.1.0.6
	PublicRelease_1b:1.1
	Interim_Release_1b_beta2:1.1
	Interim_Release_1b_beta1:1.1
	proxydeadlake:1.1.0.4
	PublicRelease_1a:1.1
	Interim_Release_1a_beta2:1.1
	BerkeleyDb:1.1.0.2;
locks; strict;
comment	@# @;


1.2
date	2003.04.29.16.21.01;	author kuchin;	state dead;
branches;
next	1.1;

1.1
date	2003.02.25.10.55.51;	author kuchin;	state Exp;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2003.02.25.13.46.09;	author kuchin;	state Exp;
branches;
next	;


desc
@@


1.2
log
@*** empty log message ***
@
text
@ / See the file LICENSE for redistribution information.
 /
 / Copyright (c) 1997-2002
 /	Sleepycat Software.  All rights reserved.
 /
 / $Id: uts4_cc.s,v 1.1 2003/02/25 10:55:51 kuchin Exp $
 /
 / int uts_lock ( int *p, int i );
 /             Update the lock word pointed to by p with the
 /             value i, using compare-and-swap.
 /             Returns 0 if update was successful.
 /             Returns 1 if update failed.
 /
         entry   uts_lock
 uts_lock:
         using   .,r15
         st      r2,8(sp)        / Save R2
         l       r2,64+0(sp)     / R2 -> word to update
         slr     r0, r0          / R0 = current lock value must be 0
         l       r1,64+4(sp)     / R1 = new lock value
         cs      r0,r1,0(r2)     / Try the update ...
         be      x               /  ... Success.  Return 0
         la      r0,1            /  ... Failure.  Return 1
 x:                              /
         l       r2,8(sp)        / Restore R2
         b       2(,r14)         / Return to caller
         drop    r15
@


1.1
log
@*** empty log message ***
@
text
@d6 1
a6 1
 / $Id: uts4_cc.s,v 11.2 2002/04/25 13:42:14 bostic Exp $
@


1.1.2.1
log
@*** empty log message ***
@
text
@d6 1
a6 1
 / $Id: uts4_cc.s,v 1.1 2003/02/25 10:55:51 kuchin Exp $
@

