head	1.5;
access;
symbols
	PublicRelease_1_2e:1.5
	Interim_Release_1-2e_RC1:1.5
	PublicRelease_1_2d:1.4
	Interim_Release_1-2d_RC1:1.4
	Interim_Release_1-2d_beta1:1.4
	PublicRelease_1_2c:1.4
	Interim_Release_1-2c_RC1:1.4
	Interim_Release_1-2c_beta1:1.4
	PublicRelease_1_2b:1.4
	Interim_Release_1-2b_RC1:1.4
	PublicRelease_1_2a:1.4
	Interim_Release_1-2a_RC1:1.4
	Interim_Release_1-2a_beta2:1.4
	Interim_Release_1-2a_beta1:1.4
	PublicRelease_1_2:1.4
	Interim_Release_1-2_RC1:1.4
	Interim_Release_1-2_beta1:1.4
	PublicRelease_1_1g:1.4
	Interim_Release_1-1g_RC3:1.4
	Interim_Release_1-1g_RC2:1.4
	Interim_Release_1-1g_RC1:1.4
	Interim_Release_1-1g_beta2:1.4
	Interim_Release_1-1g_beta1:1.4
	PublicRelease_1_1f:1.4
	Interim_Release_1-1f_RC1:1.4
	PublicRelease_1_1e:1.4
	Interim_Release_1-1e_RC2:1.4
	Interim_Release_1-1e_RC1:1.4
	Interim_Release_1-1e_beta1:1.4
	PublicRelease_1_1d:1.4
	Interim_Release_1-1d_RC1:1.4
	PublicRelease_1_1c:1.4
	Interim_Release_1-1c_RC1:1.4
	Interim_Release_1-1c_beta2:1.4
	Interim_Release_1-1c_beta1:1.2;
locks; strict;
comment	@ * @;


1.5
date	2008.10.04.03.34.23;	author aw3;	state Exp;
branches;
next	1.4;

1.4
date	2005.02.14.02.39.34;	author aw3;	state Exp;
branches;
next	1.3;

1.3
date	2005.02.13.18.40.14;	author kuchin;	state Exp;
branches;
next	1.2;

1.2
date	2005.01.08.14.35.59;	author kuchin;	state Exp;
branches;
next	1.1;

1.1
date	2005.01.08.12.35.50;	author kuchin;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Renaming.
@
text
@//	This file is part of eMule Plus
//
//	This program is free software; you can redistribute it and/or
//	modify it under the terms of the GNU General Public License
//	as published by the Free Software Foundation; either
//	version 2 of the License, or (at your option) any later version.
//
//	This program is distributed in the hope that it will be useful,
//	but WITHOUT ANY WARRANTY; without even the implied warranty of
//	MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
//	GNU General Public License for more details.
//
//	You should have received a copy of the GNU General Public License
//	along with this program; if not, write to the Free Software
//	Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
#pragma once

#define DLURLMAX 512

struct CAutoDLData
{
	TCHAR	acUrl[DLURLMAX];
	ULONG	ulInterval;	// in minutes
	long	lLastCheck;	// time() value
};

class CAutoDL : public CLoggable
{
public:
	CAutoDL();
	virtual ~CAutoDL();

	bool LoadPrefs();
	bool SavePrefs();

	void Restart(){ Start(); }

	__declspec(property(get=get_UseIt,put=put_UseIt))	bool UseIt;
	__declspec(property(get=get_UrlCount))				long UrlCount;
	__declspec(property(get=get_UrlItem))				CAutoDLData UrlItem[];

	bool get_UseIt();
	void put_UseIt(bool bUseIt);
	long get_UrlCount();
	CAutoDLData get_UrlItem(long nIndex);
	void ClearUrlList();
	void AddUrlItem(CAutoDLData& data);

private:
	static void WorkerThread(void *);
	void Start();
	void Finish();
	void GetConfigFilename(CString *pstrOut);
	ULONG CheckUrl(const TCHAR *pcUrl);
	void DownloadLink(CString sLink, CString sCategory);

private:
	HANDLE	m_hWorkerThread;
	HANDLE	m_hFinish;

	CArray<CAutoDLData, CAutoDLData> m_UrlList;
	bool	m_bUseIt;
};
@


1.4
log
@Improved string processing and other optimization.
@
text
@d1 15
d22 1
a22 1
	TCHAR	sUrl[DLURLMAX];
d63 1
a63 1
};@


1.3
log
@AutoDL - finalization, should work now, plus set smaller font in splash/about screens so debug version can be shown correctly
@
text
@d38 2
a39 2
	CString	GetConfigFilename();
	ULONG CheckUrl(CString sUrl);
d46 1
a47 1
	CArray<CAutoDLData, CAutoDLData> m_UrlList;
@


1.2
log
@AutoDL, second step - fully works, to do - add to prefs
@
text
@d3 2
d7 1
a7 1
	CString	sUrl;
d21 13
d46 2
a47 1
	CArray<CAutoDLData, CAutoDLData>	m_List;
@


1.1
log
@AutoDL, first step
@
text
@d25 1
@

