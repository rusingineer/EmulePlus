head	1.271;
access;
symbols
	PublicRelease_1_2e:1.264
	Interim_Release_1-2e_RC1:1.264
	PublicRelease_1_2d:1.260
	Interim_Release_1-2d_RC1:1.260
	Interim_Release_1-2d_beta1:1.257
	PublicRelease_1_2c:1.238
	Interim_Release_1-2c_RC1:1.238
	Interim_Release_1-2c_beta1:1.235
	PublicRelease_1_2b:1.234
	Interim_Release_1-2b_RC1:1.234
	PublicRelease_1_2a:1.233
	Interim_Release_1-2a_RC1:1.233
	Interim_Release_1-2a_beta2:1.228
	Interim_Release_1-2a_beta1:1.227
	PublicRelease_1_2:1.222
	Interim_Release_1-2_RC1:1.222
	Interim_Release_1-2_beta1:1.221
	PublicRelease_1_1g:1.219
	Interim_Release_1-1g_RC3:1.219
	Interim_Release_1-1g_RC2:1.219
	Interim_Release_1-1g_RC1:1.219
	Interim_Release_1-1g_beta2:1.218
	Interim_Release_1-1g_beta1:1.216
	PublicRelease_1_1f:1.213
	Interim_Release_1-1f_RC1:1.213
	PublicRelease_1_1e:1.209
	Interim_Release_1-1e_RC2:1.209
	Interim_Release_1-1e_RC1:1.206
	Interim_Release_1-1e_beta1:1.203
	PublicRelease_1_1d:1.198
	Interim_Release_1-1d_RC1:1.198
	PublicRelease_1_1c:1.198
	Interim_Release_1-1c_RC1:1.198
	Interim_Release_1-1c_beta2:1.198
	Interim_Release_1-1c_beta1:1.195
	PublicRelease_1_1b:1.191
	Interim_Release_1-1b_RC1:1.191
	PublicRelease_1_1a:1.189
	Interim_Release_1-1a_RC2:1.189
	Interim_Release_1-1a_RC1:1.188
	Interim_Release_1-1a_beta2:1.187
	Interim_Release_1-1a_beta1:1.187
	PublicRelease_1_1:1.185
	Interim_Release_1-1_beta1:1.185
	PublicRelease_1o:1.179
	Interim_Release_1o_RC1:1.179
	Interim_Release_1o_beta1:1.178
	PublicRelease_1n:1.176
	Interim_Release_1n_RC2:1.176
	Interim_Release_1n_RC1:1.176
	Interim_Release_1n_beta2:1.172
	Interim_Release_1n_beta1:1.171
	PublicRelease_1m:1.168
	Interim_Release_1m_beta1:1.168
	PublicRelease_1l:1.167
	Interim_Release_1l_RC3:1.167
	Interim_Release_1l_RC2:1.165
	Interim_Release_1l_RC1:1.165
	Interim_Release_1l_beta2:1.164
	Interim_Release_1l_beta1:1.161
	PublicRelease_1k:1.150
	Interim_Release_1k_RC4:1.150
	Interim_1k_RC3:1.150
	Interim_1k_RC2:1.150
	Interim_Release_1k_RC1:1.149
	Interim_Release_1k_beta5:1.148
	Intrerim_Release_1k_beta4:1.148
	Interim_Release_1k_beta1:1.145
	PublicRelease_1j:1.137
	Interim_Release_1J_RC3:1.137
	Interim_Release_1j_RC3:1.137
	Interim_Release_1j_RC2:1.137
	Interim_Release_1j_RC1:1.137
	Interim_Release_1j_beta2:1.137
	Interim_Release_1j_beta1:1.136
	PublicRelease_1i:1.134
	Interim_Release_1i_RC6:1.134
	Interim_Release_1i_RC3:1.134
	Interim_Release_1i_RC2:1.134
	Interim_Release_1i_RC1:1.131
	Interim_Release_1i_beta3:1.128
	Interim_Release_1i_beta2:1.124
	Interim_Release_1i_beta1:1.115
	PublicRelease_1h:1.100
	Interim_Release_1h_rc2:1.100
	Interim_Release_1h_RC1:1.99
	Interim_Release_1h_beta2:1.93
	Interim_Release_1h_beta1_now:1.87
	Interim_Release_1h_beta1:1.87
	PublicRelease_1g:1.75
	Interim_Release_1g_RC6_Final:1.75
	Interim_Release_1g_RC6:1.75
	Interim_Release_1g_RC5:1.75
	Interim_Release_1g_RC4:1.74
	Interim_Release_1g_RC3:1.71
	Interim_Release_1g_beta2:1.63
	Interim_Release_1g_beta1:1.61
	Interim_Release_1f_RC4:1.58
	Interim_Release_1f_RC3:1.57
	Interim_Release_1f_RC2:1.55
	Interim_Release_1f_RC:1.55
	Interim_Release_1f_beta2:1.55
	Interim_Release_1f_beta1:1.54
	PublicRelease_1e:1.53
	Interim_Release_1e_RC2:1.53
	Interim_Release_1e_RC:1.53
	Interim_Release_1e_beta3:1.53
	Interim_Release_1e_beta2:1.53
	Interim_Release_1e_beta2_before_kuchin:1.52
	Interim_Release_1e_beta1:1.52
	PublicRelease_1c:1.50
	featurestest:1.50.0.2
	Interim_Release_1c_RC:1.50
	Interim_Release_1c_beta2:1.49
	Interim_Release_1c_beta1:1.48
	threaded_downloadqueue:1.46.0.2
	PublicRelease_1b:1.37
	Interim_Release_1b_beta2:1.37
	Interim_Release_1b_beta1:1.36
	proxydeadlake:1.25.0.2
	PublicRelease_1a:1.25
	Interim_Release_1a_beta2:1.25
	BerkeleyDb:1.23.0.2
	Interim_Release_1a_beta1:1.22
	PublicRelease_1:1.21
	goldfish:1.21
	eMulePlus_1_RC2:1.21
	eMulePlus_26b_1RC1:1.20
	PreRelease_26b_i0e:1.20
	before_26d_merge:1.17
	Interim_Release_26b_i0d:1.15
	Interim_Release_26b_i0c:1.14
	Interim_Release_26b_i0b:1.14
	Interim_Release_26b_i0a:1.14
	systraydlg:1.10.0.4
	plus26based:1.10.0.2
	Interim_Release_25b_i0b:1.10
	Proxy_Dev:1.9
	Interim_Release_25b_i0a:1.5.2.4
	proxytest:1.5.2.1.0.2
	official_sockets:1.5.0.2
	eMulePlus_024b_5b:1.1.0.2;
locks; strict;
comment	@ * @;


1.271
date	2011.09.20.02.55.58;	author aw3;	state Exp;
branches;
next	1.270;

1.270
date	2011.05.10.04.37.24;	author aw3;	state Exp;
branches;
next	1.269;

1.269
date	2010.05.04.04.03.38;	author aw3;	state Exp;
branches;
next	1.268;

1.268
date	2010.02.08.04.05.49;	author aw3;	state Exp;
branches;
next	1.267;

1.267
date	2009.05.14.03.19.00;	author aw3;	state Exp;
branches;
next	1.266;

1.266
date	2009.05.01.04.23.46;	author aw3;	state Exp;
branches;
next	1.265;

1.265
date	2009.04.29.03.13.39;	author aw3;	state Exp;
branches;
next	1.264;

1.264
date	2009.01.02.02.08.47;	author aw3;	state Exp;
branches;
next	1.263;

1.263
date	2008.10.26.16.07.51;	author aw3;	state Exp;
branches;
next	1.262;

1.262
date	2008.09.29.04.30.37;	author aw3;	state Exp;
branches;
next	1.261;

1.261
date	2008.07.01.04.43.51;	author aw3;	state Exp;
branches;
next	1.260;

1.260
date	2008.04.07.03.35.49;	author aw3;	state Exp;
branches;
next	1.259;

1.259
date	2008.04.06.11.47.23;	author eklmn;	state Exp;
branches;
next	1.258;

1.258
date	2008.03.15.04.13.12;	author aw3;	state Exp;
branches;
next	1.257;

1.257
date	2008.02.19.21.41.25;	author eklmn;	state Exp;
branches;
next	1.256;

1.256
date	2008.02.18.03.43.17;	author aw3;	state Exp;
branches;
next	1.255;

1.255
date	2008.02.07.05.18.01;	author aw3;	state Exp;
branches;
next	1.254;

1.254
date	2008.02.03.04.00.25;	author aw3;	state Exp;
branches;
next	1.253;

1.253
date	2008.02.01.03.17.32;	author aw3;	state Exp;
branches;
next	1.252;

1.252
date	2008.01.31.22.50.31;	author eklmn;	state Exp;
branches;
next	1.251;

1.251
date	2008.01.23.05.15.54;	author aw3;	state Exp;
branches;
next	1.250;

1.250
date	2008.01.19.04.12.25;	author aw3;	state Exp;
branches;
next	1.249;

1.249
date	2007.12.30.06.02.46;	author aw3;	state Exp;
branches;
next	1.248;

1.248
date	2007.12.28.04.05.55;	author aw3;	state Exp;
branches;
next	1.247;

1.247
date	2007.12.26.03.55.55;	author aw3;	state Exp;
branches;
next	1.246;

1.246
date	2007.12.23.17.49.42;	author aw3;	state Exp;
branches;
next	1.245;

1.245
date	2007.12.22.21.15.26;	author eklmn;	state Exp;
branches;
next	1.244;

1.244
date	2007.12.14.21.11.18;	author kush_eplus;	state Exp;
branches;
next	1.243;

1.243
date	2007.12.11.04.35.22;	author aw3;	state Exp;
branches;
next	1.242;

1.242
date	2007.11.12.23.47.51;	author fuxie-dk;	state Exp;
branches;
next	1.241;

1.241
date	2007.10.31.18.18.56;	author fuxie-dk;	state Exp;
branches;
next	1.240;

1.240
date	2007.10.24.19.07.11;	author fuxie-dk;	state Exp;
branches;
next	1.239;

1.239
date	2007.10.11.18.08.17;	author fuxie-dk;	state Exp;
branches;
next	1.238;

1.238
date	2007.06.04.00.54.49;	author aw3;	state Exp;
branches;
next	1.237;

1.237
date	2007.05.20.03.22.39;	author aw3;	state Exp;
branches;
next	1.236;

1.236
date	2007.05.18.03.01.00;	author aw3;	state Exp;
branches;
next	1.235;

1.235
date	2007.02.18.16.00.49;	author eklmn;	state Exp;
branches;
next	1.234;

1.234
date	2006.12.06.21.06.11;	author eklmn;	state Exp;
branches;
next	1.233;

1.233
date	2006.09.18.13.23.13;	author aw3;	state Exp;
branches;
next	1.232;

1.232
date	2006.09.17.13.46.24;	author aw3;	state Exp;
branches;
next	1.231;

1.231
date	2006.09.07.03.17.55;	author aw3;	state Exp;
branches;
next	1.230;

1.230
date	2006.07.14.04.49.06;	author aw3;	state Exp;
branches;
next	1.229;

1.229
date	2006.06.21.01.02.33;	author aw3;	state Exp;
branches;
next	1.228;

1.228
date	2006.05.26.03.43.41;	author aw3;	state Exp;
branches;
next	1.227;

1.227
date	2006.04.22.23.23.45;	author aw3;	state Exp;
branches;
next	1.226;

1.226
date	2006.04.04.22.28.40;	author kush_eplus;	state Exp;
branches;
next	1.225;

1.225
date	2006.03.26.23.35.09;	author aw3;	state Exp;
branches;
next	1.224;

1.224
date	2006.03.19.23.49.18;	author aw3;	state Exp;
branches;
next	1.223;

1.223
date	2006.03.18.04.44.41;	author aw3;	state Exp;
branches;
next	1.222;

1.222
date	2006.02.19.16.22.30;	author aw3;	state Exp;
branches;
next	1.221;

1.221
date	2006.01.06.20.05.54;	author kush_eplus;	state Exp;
branches;
next	1.220;

1.220
date	2005.12.31.06.10.54;	author aw3;	state Exp;
branches;
next	1.219;

1.219
date	2005.11.28.05.27.38;	author aw3;	state Exp;
branches;
next	1.218;

1.218
date	2005.11.27.17.58.55;	author aw3;	state Exp;
branches;
next	1.217;

1.217
date	2005.08.29.03.05.28;	author aw3;	state Exp;
branches;
next	1.216;

1.216
date	2005.08.12.03.43.42;	author aw3;	state Exp;
branches;
next	1.215;

1.215
date	2005.08.11.21.03.52;	author eklmn;	state Exp;
branches;
next	1.214;

1.214
date	2005.08.11.03.46.43;	author aw3;	state Exp;
branches;
next	1.213;

1.213
date	2005.07.26.04.13.37;	author aw3;	state Exp;
branches;
next	1.212;

1.212
date	2005.07.25.03.40.20;	author aw3;	state Exp;
branches;
next	1.211;

1.211
date	2005.07.19.04.15.56;	author aw3;	state Exp;
branches;
next	1.210;

1.210
date	2005.07.17.20.47.47;	author aw3;	state Exp;
branches;
next	1.209;

1.209
date	2005.07.09.03.39.18;	author aw3;	state Exp;
branches;
next	1.208;

1.208
date	2005.06.28.03.54.21;	author aw3;	state Exp;
branches;
next	1.207;

1.207
date	2005.06.25.20.56.59;	author syrus77;	state Exp;
branches;
next	1.206;

1.206
date	2005.06.20.03.02.00;	author aw3;	state Exp;
branches;
next	1.205;

1.205
date	2005.06.12.13.53.37;	author eklmn;	state Exp;
branches;
next	1.204;

1.204
date	2005.06.11.14.38.37;	author aw3;	state Exp;
branches;
next	1.203;

1.203
date	2005.04.09.02.35.29;	author aw3;	state Exp;
branches;
next	1.202;

1.202
date	2005.04.07.04.27.19;	author aw3;	state Exp;
branches;
next	1.201;

1.201
date	2005.04.03.20.50.36;	author aw3;	state Exp;
branches;
next	1.200;

1.200
date	2005.04.03.04.51.42;	author kuchin;	state Exp;
branches;
next	1.199;

1.199
date	2005.03.29.01.30.21;	author aw3;	state Exp;
branches;
next	1.198;

1.198
date	2005.02.14.22.44.52;	author aw3;	state Exp;
branches;
next	1.197;

1.197
date	2005.02.13.22.56.27;	author aw3;	state Exp;
branches;
next	1.196;

1.196
date	2005.02.02.07.15.51;	author aw3;	state Exp;
branches;
next	1.195;

1.195
date	2005.01.24.03.38.36;	author aw3;	state Exp;
branches;
next	1.194;

1.194
date	2005.01.16.21.46.10;	author netwolf1;	state Exp;
branches;
next	1.193;

1.193
date	2005.01.16.00.34.59;	author netwolf1;	state Exp;
branches;
next	1.192;

1.192
date	2005.01.06.19.06.23;	author netwolf1;	state Exp;
branches;
next	1.191;

1.191
date	2004.12.15.14.53.08;	author katsyonak;	state Exp;
branches;
next	1.190;

1.190
date	2004.12.15.03.26.18;	author aw3;	state Exp;
branches;
next	1.189;

1.189
date	2004.11.28.19.01.21;	author aw3;	state Exp;
branches;
next	1.188;

1.188
date	2004.11.26.18.59.51;	author aw3;	state Exp;
branches;
next	1.187;

1.187
date	2004.11.02.17.24.24;	author aw3;	state Exp;
branches;
next	1.186;

1.186
date	2004.11.01.17.34.39;	author aw3;	state Exp;
branches;
next	1.185;

1.185
date	2004.10.16.04.31.31;	author aw3;	state Exp;
branches;
next	1.184;

1.184
date	2004.10.14.05.19.25;	author aw3;	state Exp;
branches;
next	1.183;

1.183
date	2004.10.10.05.15.46;	author dongato;	state Exp;
branches;
next	1.182;

1.182
date	2004.10.08.04.35.58;	author aw3;	state Exp;
branches;
next	1.181;

1.181
date	2004.09.30.20.23.56;	author aw3;	state Exp;
branches;
next	1.180;

1.180
date	2004.09.30.19.09.31;	author aw3;	state Exp;
branches;
next	1.179;

1.179
date	2004.09.26.04.06.43;	author aw3;	state Exp;
branches;
next	1.178;

1.178
date	2004.09.21.20.19.22;	author aw3;	state Exp;
branches;
next	1.177;

1.177
date	2004.09.20.07.18.04;	author aw3;	state Exp;
branches;
next	1.176;

1.176
date	2004.08.24.12.06.39;	author syrus77;	state Exp;
branches;
next	1.175;

1.175
date	2004.08.23.22.44.02;	author syrus77;	state Exp;
branches;
next	1.174;

1.174
date	2004.08.11.06.51.46;	author aw3;	state Exp;
branches;
next	1.173;

1.173
date	2004.08.10.12.43.39;	author eklmn;	state Exp;
branches;
next	1.172;

1.172
date	2004.08.05.01.25.33;	author aw3;	state Exp;
branches;
next	1.171;

1.171
date	2004.07.18.12.20.31;	author eklmn;	state Exp;
branches;
next	1.170;

1.170
date	2004.07.05.23.23.42;	author dongato;	state Exp;
branches;
next	1.169;

1.169
date	2004.06.30.13.38.41;	author dongato;	state Exp;
branches;
next	1.168;

1.168
date	2004.06.16.16.29.46;	author dongato;	state Exp;
branches;
next	1.167;

1.167
date	2004.06.07.16.36.40;	author katsyonak;	state Exp;
branches;
next	1.166;

1.166
date	2004.06.06.20.48.09;	author aw3;	state Exp;
branches;
next	1.165;

1.165
date	2004.05.24.11.37.29;	author netwolf1;	state Exp;
branches;
next	1.164;

1.164
date	2004.05.17.14.54.02;	author aw3;	state Exp;
branches;
next	1.163;

1.163
date	2004.05.12.08.30.32;	author netwolf1;	state Exp;
branches;
next	1.162;

1.162
date	2004.05.11.14.56.06;	author katsyonak;	state Exp;
branches;
next	1.161;

1.161
date	2004.05.04.14.45.24;	author dropf;	state Exp;
branches;
next	1.160;

1.160
date	2004.05.04.11.28.00;	author netwolf1;	state Exp;
branches;
next	1.159;

1.159
date	2004.05.04.09.45.35;	author netwolf1;	state Exp;
branches;
next	1.158;

1.158
date	2004.05.03.19.55.53;	author dongato;	state Exp;
branches;
next	1.157;

1.157
date	2004.05.03.10.57.14;	author netwolf1;	state Exp;
branches;
next	1.156;

1.156
date	2004.05.03.09.59.44;	author netwolf1;	state Exp;
branches;
next	1.155;

1.155
date	2004.04.25.12.46.42;	author dongato;	state Exp;
branches;
next	1.154;

1.154
date	2004.04.23.22.13.51;	author katsyonak;	state Exp;
branches;
next	1.153;

1.153
date	2004.04.20.23.49.38;	author dropf;	state Exp;
branches;
next	1.152;

1.152
date	2004.04.18.13.17.30;	author bavariansnail;	state Exp;
branches;
next	1.151;

1.151
date	2004.04.15.17.07.57;	author aw3;	state Exp;
branches;
next	1.150;

1.150
date	2004.03.31.22.26.56;	author dropf;	state Exp;
branches;
next	1.149;

1.149
date	2004.03.27.19.39.45;	author dongato;	state Exp;
branches;
next	1.148;

1.148
date	2004.03.17.21.48.35;	author eklmn;	state Exp;
branches;
next	1.147;

1.147
date	2004.03.17.21.14.11;	author eklmn;	state Exp;
branches;
next	1.146;

1.146
date	2004.03.11.05.07.43;	author aw3;	state Exp;
branches;
next	1.145;

1.145
date	2004.02.19.00.29.35;	author netwolf1;	state Exp;
branches;
next	1.144;

1.144
date	2004.02.17.13.36.06;	author dongato;	state Exp;
branches;
next	1.143;

1.143
date	2004.02.15.11.55.57;	author morevit;	state Exp;
branches;
next	1.142;

1.142
date	2004.02.05.00.00.01;	author kush_eplus;	state Exp;
branches;
next	1.141;

1.141
date	2004.02.04.19.05.59;	author morevit;	state Exp;
branches;
next	1.140;

1.140
date	2004.02.04.13.40.58;	author kush_eplus;	state Exp;
branches;
next	1.139;

1.139
date	2004.02.03.21.43.01;	author syrus77;	state Exp;
branches;
next	1.138;

1.138
date	2004.02.01.13.53.55;	author netwolf1;	state Exp;
branches;
next	1.137;

1.137
date	2003.12.31.14.01.53;	author dongato;	state Exp;
branches;
next	1.136;

1.136
date	2003.12.18.22.58.32;	author dongato;	state Exp;
branches;
next	1.135;

1.135
date	2003.12.18.21.52.47;	author dongato;	state Exp;
branches;
next	1.134;

1.134
date	2003.11.12.13.24.25;	author dropf;	state Exp;
branches;
next	1.133;

1.133
date	2003.11.11.21.36.56;	author dropf;	state Exp;
branches;
next	1.132;

1.132
date	2003.11.05.21.12.01;	author dongato;	state Exp;
branches;
next	1.131;

1.131
date	2003.11.04.14.13.19;	author kuchin;	state Exp;
branches;
next	1.130;

1.130
date	2003.11.04.09.20.49;	author kuchin;	state Exp;
branches;
next	1.129;

1.129
date	2003.11.02.12.38.13;	author dongato;	state Exp;
branches;
next	1.128;

1.128
date	2003.10.30.02.44.37;	author morevit;	state Exp;
branches;
next	1.127;

1.127
date	2003.10.29.22.13.33;	author dropf;	state Exp;
branches;
next	1.126;

1.126
date	2003.10.29.14.14.18;	author morevit;	state Exp;
branches;
next	1.125;

1.125
date	2003.10.26.13.50.16;	author morevit;	state Exp;
branches;
next	1.124;

1.124
date	2003.10.22.23.08.37;	author dongato;	state Exp;
branches;
next	1.123;

1.123
date	2003.10.21.14.33.59;	author dongato;	state Exp;
branches;
next	1.122;

1.122
date	2003.10.20.13.20.01;	author morevit;	state Exp;
branches;
next	1.121;

1.121
date	2003.10.17.10.29.06;	author morevit;	state Exp;
branches;
next	1.120;

1.120
date	2003.10.08.12.56.34;	author morevit;	state Exp;
branches;
next	1.119;

1.119
date	2003.10.07.11.36.32;	author dongato;	state Exp;
branches;
next	1.118;

1.118
date	2003.10.06.21.57.05;	author puritynn666;	state Exp;
branches;
next	1.117;

1.117
date	2003.10.06.13.24.12;	author dongato;	state Exp;
branches;
next	1.116;

1.116
date	2003.10.05.17.53.56;	author morevit;	state Exp;
branches;
next	1.115;

1.115
date	2003.10.04.22.19.17;	author morevit;	state Exp;
branches;
next	1.114;

1.114
date	2003.10.04.14.07.32;	author dongato;	state Exp;
branches;
next	1.113;

1.113
date	2003.10.04.10.23.05;	author dongato;	state Exp;
branches;
next	1.112;

1.112
date	2003.10.02.11.08.27;	author dongato;	state Exp;
branches;
next	1.111;

1.111
date	2003.09.30.19.53.17;	author morevit;	state Exp;
branches;
next	1.110;

1.110
date	2003.09.30.06.58.45;	author dongato;	state Exp;
branches;
next	1.109;

1.109
date	2003.09.27.21.23.14;	author dongato;	state Exp;
branches;
next	1.108;

1.108
date	2003.09.27.14.59.38;	author dongato;	state Exp;
branches;
next	1.107;

1.107
date	2003.09.24.20.37.29;	author dongato;	state Exp;
branches;
next	1.106;

1.106
date	2003.09.23.16.52.49;	author morevit;	state Exp;
branches;
next	1.105;

1.105
date	2003.09.22.00.50.55;	author morevit;	state Exp;
branches;
next	1.104;

1.104
date	2003.09.22.00.17.22;	author morevit;	state Exp;
branches;
next	1.103;

1.103
date	2003.09.21.22.07.17;	author morevit;	state Exp;
branches;
next	1.102;

1.102
date	2003.09.20.15.39.31;	author morevit;	state Exp;
branches;
next	1.101;

1.101
date	2003.09.19.00.13.38;	author morevit;	state Exp;
branches;
next	1.100;

1.100
date	2003.09.15.16.34.03;	author bavariansnail;	state Exp;
branches;
next	1.99;

1.99
date	2003.09.11.02.36.43;	author dongato;	state Exp;
branches;
next	1.98;

1.98
date	2003.09.09.16.21.59;	author dongato;	state Exp;
branches;
next	1.97;

1.97
date	2003.09.07.05.20.38;	author dongato;	state Exp;
branches;
next	1.96;

1.96
date	2003.09.06.13.27.57;	author dongato;	state Exp;
branches;
next	1.95;

1.95
date	2003.09.06.02.19.24;	author dongato;	state Exp;
branches;
next	1.94;

1.94
date	2003.09.06.00.04.21;	author dongato;	state Exp;
branches;
next	1.93;

1.93
date	2003.08.31.16.49.55;	author dongato;	state Exp;
branches;
next	1.92;

1.92
date	2003.08.30.11.23.26;	author emoulari;	state Exp;
branches;
next	1.91;

1.91
date	2003.08.26.10.23.41;	author netwolf1;	state Exp;
branches;
next	1.90;

1.90
date	2003.08.23.00.20.50;	author forcha;	state Exp;
branches;
next	1.89;

1.89
date	2003.08.20.20.57.28;	author dongato;	state Exp;
branches;
next	1.88;

1.88
date	2003.08.19.17.32.46;	author dongato;	state Exp;
branches;
next	1.87;

1.87
date	2003.08.15.15.11.29;	author forcha;	state Exp;
branches;
next	1.86;

1.86
date	2003.08.10.04.42.50;	author eklmn;	state Exp;
branches;
next	1.85;

1.85
date	2003.08.03.20.42.05;	author forcha;	state Exp;
branches;
next	1.84;

1.84
date	2003.08.02.11.51.11;	author dongato;	state Exp;
branches;
next	1.83;

1.83
date	2003.07.31.15.02.19;	author puritynn666;	state Exp;
branches;
next	1.82;

1.82
date	2003.07.30.22.56.00;	author zegzav;	state Exp;
branches;
next	1.81;

1.81
date	2003.07.30.12.29.31;	author kuchin;	state Exp;
branches;
next	1.80;

1.80
date	2003.07.29.19.21.12;	author dongato;	state Exp;
branches;
next	1.79;

1.79
date	2003.07.29.09.09.04;	author dongato;	state Exp;
branches;
next	1.78;

1.78
date	2003.07.28.02.33.12;	author dongato;	state Exp;
branches;
next	1.77;

1.77
date	2003.07.27.19.56.57;	author dongato;	state Exp;
branches;
next	1.76;

1.76
date	2003.07.27.17.32.20;	author dongato;	state Exp;
branches;
next	1.75;

1.75
date	2003.07.09.15.08.21;	author netwolf1;	state Exp;
branches;
next	1.74;

1.74
date	2003.07.08.00.04.59;	author netwolf1;	state Exp;
branches;
next	1.73;

1.73
date	2003.07.05.16.24.59;	author dongato;	state Exp;
branches;
next	1.72;

1.72
date	2003.07.05.11.53.08;	author dongato;	state Exp;
branches;
next	1.71;

1.71
date	2003.06.28.01.23.44;	author dongato;	state Exp;
branches;
next	1.70;

1.70
date	2003.06.22.13.18.17;	author kuchin;	state Exp;
branches;
next	1.69;

1.69
date	2003.06.21.21.54.00;	author netwolf1;	state Exp;
branches;
next	1.68;

1.68
date	2003.06.20.00.01.10;	author netwolf1;	state Exp;
branches;
next	1.67;

1.67
date	2003.06.14.00.48.56;	author netwolf1;	state Exp;
branches;
next	1.66;

1.66
date	2003.06.11.18.27.11;	author eklmn;	state Exp;
branches;
next	1.65;

1.65
date	2003.06.09.20.31.20;	author partyckip;	state Exp;
branches;
next	1.64;

1.64
date	2003.06.09.20.07.39;	author partyckip;	state Exp;
branches;
next	1.63;

1.63
date	2003.06.08.23.58.37;	author syrus77;	state Exp;
branches;
next	1.62;

1.62
date	2003.06.04.16.47.09;	author partyckip;	state Exp;
branches;
next	1.61;

1.61
date	2003.05.31.16.45.18;	author partyckip;	state Exp;
branches;
next	1.60;

1.60
date	2003.05.31.08.50.54;	author partyckip;	state Exp;
branches;
next	1.59;

1.59
date	2003.05.30.21.26.58;	author partyckip;	state Exp;
branches;
next	1.58;

1.58
date	2003.05.25.01.12.05;	author syrus77;	state Exp;
branches;
next	1.57;

1.57
date	2003.05.20.16.30.41;	author netwolf1;	state Exp;
branches;
next	1.56;

1.56
date	2003.05.15.22.03.55;	author syrus77;	state Exp;
branches;
next	1.55;

1.55
date	2003.05.06.21.17.15;	author partyckip;	state Exp;
branches;
next	1.54;

1.54
date	2003.05.04.12.30.58;	author dongato;	state Exp;
branches;
next	1.53;

1.53
date	2003.04.22.12.41.52;	author kuchin;	state Exp;
branches;
next	1.52;

1.52
date	2003.04.03.10.12.19;	author kuchin;	state Exp;
branches;
next	1.51;

1.51
date	2003.03.27.09.40.25;	author recdvst;	state Exp;
branches;
next	1.50;

1.50
date	2003.03.21.18.55.16;	author dongato;	state Exp;
branches
	1.50.2.1;
next	1.49;

1.49
date	2003.03.15.20.53.48;	author lord_kiron;	state Exp;
branches;
next	1.48;

1.48
date	2003.03.15.11.34.26;	author lord_kiron;	state Exp;
branches;
next	1.47;

1.47
date	2003.03.14.21.31.12;	author lord_kiron;	state Exp;
branches;
next	1.46;

1.46
date	2003.03.14.15.05.24;	author lord_kiron;	state Exp;
branches;
next	1.45;

1.45
date	2003.03.14.14.35.21;	author lord_kiron;	state Exp;
branches;
next	1.44;

1.44
date	2003.03.14.14.31.45;	author lord_kiron;	state Exp;
branches;
next	1.43;

1.43
date	2003.03.14.14.19.30;	author lord_kiron;	state Exp;
branches;
next	1.42;

1.42
date	2003.03.14.12.03.36;	author dongato;	state Exp;
branches;
next	1.41;

1.41
date	2003.03.13.06.23.50;	author recdvst;	state Exp;
branches;
next	1.40;

1.40
date	2003.03.11.16.12.46;	author kuchin;	state Exp;
branches;
next	1.39;

1.39
date	2003.03.11.10.52.48;	author kuchin;	state Exp;
branches;
next	1.38;

1.38
date	2003.03.10.18.49.56;	author kuchin;	state Exp;
branches;
next	1.37;

1.37
date	2003.03.08.12.09.42;	author recdvst;	state Exp;
branches;
next	1.36;

1.36
date	2003.03.03.22.09.50;	author moosetea;	state Exp;
branches;
next	1.35;

1.35
date	2003.03.03.14.15.57;	author dongato;	state Exp;
branches;
next	1.34;

1.34
date	2003.03.03.13.01.38;	author dongato;	state Exp;
branches;
next	1.33;

1.33
date	2003.03.03.03.23.51;	author dongato;	state Exp;
branches;
next	1.32;

1.32
date	2003.03.02.18.29.41;	author lord_kiron;	state Exp;
branches;
next	1.31;

1.31
date	2003.03.02.12.39.14;	author dongato;	state Exp;
branches;
next	1.30;

1.30
date	2003.03.02.04.41.22;	author recdvst;	state Exp;
branches;
next	1.29;

1.29
date	2003.03.01.12.48.30;	author dongato;	state Exp;
branches;
next	1.28;

1.28
date	2003.03.01.04.11.36;	author dongato;	state Exp;
branches;
next	1.27;

1.27
date	2003.03.01.02.01.26;	author cax2;	state Exp;
branches;
next	1.26;

1.26
date	2003.02.28.21.00.34;	author dongato;	state Exp;
branches;
next	1.25;

1.25
date	2003.02.26.21.12.34;	author cax2;	state Exp;
branches;
next	1.24;

1.24
date	2003.02.25.15.36.12;	author dongato;	state Exp;
branches;
next	1.23;

1.23
date	2003.02.24.20.09.49;	author dongato;	state Exp;
branches
	1.23.2.1;
next	1.22;

1.22
date	2003.02.23.19.16.13;	author cax2;	state Exp;
branches;
next	1.21;

1.21
date	2003.02.20.07.25.22;	author cax2;	state Exp;
branches;
next	1.20;

1.20
date	2003.02.18.15.21.25;	author dongato;	state Exp;
branches;
next	1.19;

1.19
date	2003.02.17.19.29.49;	author cax2;	state Exp;
branches;
next	1.18;

1.18
date	2003.02.17.19.17.19;	author dongato;	state Exp;
branches;
next	1.17;

1.17
date	2003.02.14.22.46.35;	author cax2;	state Exp;
branches;
next	1.16;

1.16
date	2003.02.14.14.22.41;	author obaldin;	state Exp;
branches;
next	1.15;

1.15
date	2003.02.13.19.08.33;	author cax2;	state Exp;
branches;
next	1.14;

1.14
date	2003.02.10.19.26.17;	author kuchin;	state Exp;
branches;
next	1.13;

1.13
date	2003.02.10.13.17.55;	author kuchin;	state Exp;
branches;
next	1.12;

1.12
date	2003.02.10.09.12.56;	author obaldin;	state Exp;
branches;
next	1.11;

1.11
date	2003.02.06.16.27.34;	author kuchin;	state Exp;
branches;
next	1.10;

1.10
date	2003.02.02.13.32.56;	author kuchin;	state Exp;
branches;
next	1.9;

1.9
date	2003.02.02.03.39.55;	author cax2;	state Exp;
branches;
next	1.8;

1.8
date	2003.02.01.14.45.39;	author dongato;	state Exp;
branches;
next	1.7;

1.7
date	2003.01.31.13.20.41;	author kuchin;	state Exp;
branches;
next	1.6;

1.6
date	2003.01.29.14.37.05;	author cax2;	state Exp;
branches;
next	1.5;

1.5
date	2003.01.27.13.34.28;	author dongato;	state Exp;
branches
	1.5.2.1;
next	1.4;

1.4
date	2003.01.24.22.07.49;	author maverick65;	state Exp;
branches;
next	1.3;

1.3
date	2003.01.23.17.00.44;	author cax2;	state Exp;
branches;
next	1.2;

1.2
date	2003.01.22.17.02.58;	author kuchin;	state Exp;
branches;
next	1.1;

1.1
date	2003.01.21.18.21.21;	author cax2;	state Exp;
branches;
next	;

1.5.2.1
date	2003.01.28.16.54.24;	author cax2;	state Exp;
branches;
next	1.5.2.2;

1.5.2.2
date	2003.01.29.00.25.46;	author cax2;	state Exp;
branches;
next	1.5.2.3;

1.5.2.3
date	2003.01.29.13.38.26;	author cax2;	state Exp;
branches;
next	1.5.2.4;

1.5.2.4
date	2003.01.31.10.21.45;	author cax2;	state Exp;
branches;
next	1.5.2.5;

1.5.2.5
date	2003.02.02.02.36.27;	author cax2;	state Exp;
branches;
next	1.5.2.6;

1.5.2.6
date	2003.02.02.03.52.24;	author cax2;	state Exp;
branches;
next	;

1.23.2.1
date	2003.02.28.22.44.55;	author obaldin;	state Exp;
branches;
next	1.23.2.2;

1.23.2.2
date	2003.03.01.20.59.36;	author obaldin;	state Exp;
branches;
next	;

1.50.2.1
date	2003.03.23.06.22.02;	author recdvst;	state Exp;
branches;
next	1.50.2.2;

1.50.2.2
date	2003.03.23.12.51.43;	author recdvst;	state Exp;
branches;
next	1.50.2.3;

1.50.2.3
date	2003.03.24.09.39.43;	author recdvst;	state Exp;
branches;
next	;


desc
@@


1.271
log
@Few methods are changed to be const.
@
text
@//this file is part of eMule
//Copyright (C)2002-2006 Merkur ( strEmail.Format("%s@@%s", "devteam", "emule-project.net") / http://www.emule-project.net )
//
//This program is free software; you can redistribute it and/or
//modify it under the terms of the GNU General Public License
//as published by the Free Software Foundation; either
//version 2 of the License, or (at your option) any later version.
//
//This program is distributed in the hope that it will be useful,
//but WITHOUT ANY WARRANTY; without even the implied warranty of
//MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.	See the
//GNU General Public License for more details.
//
//You should have received a copy of the GNU General Public License
//along with this program; if not, write to the Free Software
//Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
#pragma once

#include "securedvars.h"

//	List columns
enum EnumDownloadListColumns
{
	DLCOL_FILENAME = 0,
	DLCOL_SIZE,
	DLCOL_TRANSFERRED,
	DLCOL_COMPLETED,
	DLCOL_SPEED,
	DLCOL_PROGRESS,
	DLCOL_NUMSOURCES,
	DLCOL_PRIORITY,
	DLCOL_STATUS,
	DLCOL_REMAINING,
	DLCOL_REMAININGTIME,
	DLCOL_ULDLRATIO,
	DLCOL_QLRATING,
	DLCOL_LASTSEENCOMPLETE,
	DLCOL_LASTRECEIVED,
	DLCOL_CATEGORY,
	DLCOL_WAITED,
	DLCOL_AVGSPEED,
	DLCOL_AVGREMTIME,
	DLCOL_ETA,
	DLCOL_AVGETA,

	DLCOL_NUMCOLUMNS
};

enum EnumUploadListColumns
{
	ULCOL_USERNAME = 0,
	ULCOL_FILENAME,
	ULCOL_SPEED,
	ULCOL_TRANSFERRED,
	ULCOL_WAITED,
	ULCOL_UPLOADTIME,
	ULCOL_STATUS,
	ULCOL_PARTS,
	ULCOL_PROGRESS,
	ULCOL_COMPRESSION,
	ULCOL_COUNTRY,

	ULCOL_NUMCOLUMNS
};

enum EnumUploadQueueListColumns
{
	QLCOL_USERNAME = 0,
	QLCOL_FILENAME,
	QLCOL_FILEPRIORITY,
	QLCOL_PARTS,
	QLCOL_PROGRESS,
	QLCOL_QLRATING,
	QLCOL_SCORE,
	QLCOL_SFRATIO,
	QLCOL_RFRATIO,
	QLCOL_TIMESASKED,
	QLCOL_LASTSEEN,
	QLCOL_ENTEREDQUEUE,
	QLCOL_BANNED,
	QLCOL_COUNTRY,

	QLCOL_NUMCOLUMNS
};

enum SearchListColumns
{
	SEARCHCOL_FILENAME = 0,
	SEARCHCOL_SIZE,
	SEARCHCOL_SOURCES,
	SEARCHCOL_TYPE,
	SEARCHCOL_FILEHASH,
	SEARCHCOL_FAKECHECK,
	SEARCHCOL_LASTSEENCOMPLETE,
	SEARCHCOL_FOLDER,
	SEARCHCOL_LENGTH,
	SEARCHCOL_BITRATE,
	SEARCHCOL_CODEC,

	SEARCHCOL_NUMCOLUMNS
};

enum EnumSharedFilesListColumns
{
	SFLCOL_FILENAME = 0,
	SFLCOL_FILESIZE,
	SFLCOL_TYPE,
	SFLCOL_PRIORITY,
	SFLCOL_PERMISSION,
	SFLCOL_FILEHASH,
	SFLCOL_REQUESTS,
	SFLCOL_ACCEPTED,
	SFLCOL_TRANSFERRED,
	SFLCOL_PARTTRAFFIC,
	SFLCOL_UPLOADS,
	SFLCOL_COMPLETESRC,
	SFLCOL_FOLDER,

	SFLCOL_NUMCOLUMNS
};

enum ServerListColumns
{
	SRVCOL_SERVERNAME = 0,
	SRVCOL_SERVERIP,
	SRVCOL_DESCRIPTION,
	SRVCOL_PING,
	SRVCOL_NUMUSERS,
	SRVCOL_NUMFILES,
	SRVCOL_PRIORITY,
	SRVCOL_FAILEDCOUNT,
	SRVCOL_STATIC,
	SRVCOL_FILELIMIT,
	SRVCOL_SOFTWAREVER,
	SRVCOL_COUNTRY,
	SRVCOL_LOWIDUSERS,

	SRVCOL_NUMCOLUMNS
};

enum EnumIRC1ListColumns
{
	IRC1COL_NICK = 0,
	IRC1COL_STATUS,

	IRC1COL_NUMCOLUMNS
};

enum EnumIRC2ListColumns
{
	IRC2COL_NAME = 0,
	IRC2COL_USERS,
	IRC2COL_DESCRIPTION,

	IRC2COL_NUMCOLUMNS
};

enum EnumClientListColumns
{
	CLCOL_USERNAME = 0,
	CLCOL_UPLOADSTATUS,
	CLCOL_TRANSFERREDUP,
	CLCOL_DOWNLOADSTATUS,
	CLCOL_TRANSFERREDDOWN,
	CLCOL_CLIENTSOFTWARE,
	CLCOL_CONNECTEDTIME,
	CLCOL_USERHASH,
	CLCOL_COUNTRY,

	CLCOL_NUMCOLUMNS
};

enum EnumFDPartsListColumns
{
	FDPARTSCOL_NUMBER = 0,
	FDPARTSCOL_COMPLETESIZE,
	FDPARTSCOL_SOURCES,
	FDPARTSCOL_STATUS,

	FDPARTSCOL_NUMCOLUMNS
};

enum EnumFriendListColumns
{
	FRIENDCOL_USERNAME = 0,
	FRIENDCOL_LASTSEEN,

	FRIENDCOL_NUMCOLUMNS
};

enum EnumFDSrcNameListColumns
{
	FDSRCCOL_FILENAME = 0,
	FDSRCCOL_SOURCES,

	FDSRCCOL_NUMCOLUMNS
};


enum
{
	EP_SEARCHMETHOD_SERV = 0,
	EP_SEARCHMETHOD_GLOB,
	EP_SEARCHMETHOD_WEB1,

	EP_SEARCHMETHOD_COUNT
};

//	WebServer list columns
enum
{
	WS_DLCOL_STATE = 0,
	WS_DLCOL_TYPE,
	WS_DLCOL_NAME,
	WS_DLCOL_SIZE,
	WS_DLCOL_TRANSFERRED,
	WS_DLCOL_PROGRESS,
	WS_DLCOL_SPEED,
	WS_DLCOL_SOURCES,
	WS_DLCOL_PRIORITY,
	WS_DLCOL_CATEGORY,
	WS_DLCOL_FAKECHECK,

	WS_DLCOL_NUMCOLUMNS
};

enum
{
	WS_ULCOL_CLIENT = 0,
	WS_ULCOL_USER,
	WS_ULCOL_VERSION,
	WS_ULCOL_FILENAME,
	WS_ULCOL_TRANSFERRED,
	WS_ULCOL_SPEED,

	WS_ULCOL_NUMCOLUMNS
};

enum
{
	WS_QUCOL_CLIENT = 0,
	WS_QUCOL_USER,
	WS_QUCOL_VERSION,
	WS_QUCOL_FILENAME,
	WS_QUCOL_SCORE,

	WS_QUCOL_NUMCOLUMNS
};

enum
{
	WS_SFLCOL_STATE = 0,
	WS_SFLCOL_TYPE,
	WS_SFLCOL_NAME,
	WS_SFLCOL_TRANSFERRED,
	WS_SFLCOL_REQUESTS,
	WS_SFLCOL_ACCEPTS,
	WS_SFLCOL_SIZE,
	WS_SFLCOL_COMPLETES,
	WS_SFLCOL_PRIORITY,

	WS_SFLCOL_NUMCOLUMNS
};

enum
{
	WS_SRVCOL_STATE = 0,
	WS_SRVCOL_NAME,
	WS_SRVCOL_IP,
	WS_SRVCOL_DESCRIPTION,
	WS_SRVCOL_PING,
	WS_SRVCOL_USERS,
	WS_SRVCOL_FILES,
	WS_SRVCOL_PRIORITY,
	WS_SRVCOL_FAILED,
	WS_SRVCOL_LIMIT,
	WS_SRVCOL_VERSION,

	WS_SRVCOL_NUMCOLUMNS
};

enum
{
	WS_SLCOL_TYPE = 0,
	WS_SLCOL_RATING,
	WS_SLCOL_FILENAME,
	WS_SLCOL_SIZE,
	WS_SLCOL_HASH,
	WS_SLCOL_SOURCES,
	WS_SLCOL_FAKECHECK,

	WS_SLCOL_NUMCOLUMNS
};

//	WebServer specific parameters
typedef struct
{
	uint32	dwDownloadSort;
	uint32	dwUploadSort;
	uint32	dwQueueSort;
	uint32	dwSharedSort;
	uint32	dwServerSort;
	uint32	dwSearchSort;
	int		aiSharedSortAsc[WS_SFLCOL_NUMCOLUMNS];
	bool	bShowUploadQueue;
	bool	bShowUploadQueueBanned;
	bool	bShowUploadQueueFriend;
	bool	bShowUploadQueueCredit;
	bool	bMenuLocked;
	bool	abDownloadColHidden[9];
	bool	abUploadColHidden[5];
	bool	abQueueColHidden[4];
	bool	abSharedColHidden[7];
	bool	abServerColHidden[10];
	bool	abSearchColHidden[5];
	bool	abDownloadSortAsc[WS_DLCOL_NUMCOLUMNS];
	bool	abUploadSortAsc[WS_ULCOL_NUMCOLUMNS];
	bool	abQueueSortAsc[WS_QUCOL_NUMCOLUMNS];
	bool	abServerSortAsc[WS_SRVCOL_NUMCOLUMNS];
	bool	abSearchSortAsc[WS_SLCOL_NUMCOLUMNS];
} WSPrefParams;

//	Shortcut indexes
enum
{
	SCUT_WIN_MINIMIZE,
	SCUT_WIN_SWITCH,
	SCUT_WIN_SRV,
	SCUT_WIN_TRANSFER,
	SCUT_WIN_SEARCH,
	SCUT_WIN_SHAREDFILES,
	SCUT_WIN_CHAT,
	SCUT_WIN_IRC,
	SCUT_WIN_STATS,
	SCUT_WIN_PREFS,
	SCUT_DL_CANCEL,
	SCUT_DL_STOP,
	SCUT_DL_PAUSE,
	SCUT_DL_RESUME,
	SCUT_FILE_OPEN,
	SCUT_FILE_OPENDIR,
	SCUT_DL_PREVIEW,
	SCUT_FILE_RENAME,
	SCUT_FILE_COMMENTS,
	SCUT_FILE_DETAILS,
	SCUT_DL_FD_SOURCES,
	SCUT_DL_CLEAR,
	SCUT_DL_CLEARALL,
	SCUT_DL_SHOWALL,
	SCUT_DL_DEFSORT,
	SCUT_DL_PREALLOC,
	SCUT_DL_A4AF,
	SCUT_DL_A4AFAUTO,
	SCUT_DL_A4AFOTHER,
	SCUT_DL_A4AFSAMECAT,
	SCUT_LINK,
	SCUT_LINK_HTML,
	SCUT_LINK_SOURCE,
	SCUT_SRC_DETAILS,
	SCUT_SRC_FRIEND,
	SCUT_SRC_MSG,
	SCUT_SRC_SHAREDFILES,
	SCUT_FILE_EDITCOMMENTS,
	SCUT_LINK_HASH,
	SCUT_FILE_NAMECLEANUP,

	SCUT_COUNT
};

typedef struct
{
	uint16 uLangs;
	uint16 uCodepage;
} StructLanguage;

//	Default values
#define PREF_DEF_DOWNCAP			1000
#define PREF_DEF_UPCAP				240
#define PREF_DEF_MM_PORT			80
#define PREF_DEF_WS_PORT			4711
#define PREF_DEF_LANCAST_PORT		5000
#define PREF_DEF_PROXY_PORT			1080
#define PREF_DEF_STATREE_MASK		_T("111000000100000110000010000011110000010010")
#define PREF_DEF_DLSRC4HIGHPRIO		100
#define PREF_DEF_DLSRC4LOWPRIO		300
#define PREF_MIN_MAXFILESRC			10
#define PREF_MAX_MAXFILESRC			10000
#define PREF_MIN_BANTIMES			3
#define PREF_MAX_BANTIMES			10
#define PREF_MIN_MAXFILESLS			2
#define PREF_MAX_MAXFILESLS			20
#define PREF_MIN_FILESLSDAYS		1
#define PREF_MAX_FILESLSDAYS		2
#define PREF_MIN_MINS2BAN			30
#define PREF_MAX_MINS2BAN			300
#define PREF_MAX_DEADSRVRETRY		20
#define PREF_MIN_SRVCONNTIMEOUT		10
#define PREF_MAX_SRVCONNTIMEOUT		60
#define PREF_MIN_WSDISABLELOGIN		5
#define PREF_MAX_WSDISABLELOGIN		60
#define PREF_MIN_WSBADLOGINTRIES	2
#define PREF_MAX_WSBADLOGINTRIES	5
#define PREF_MIN_COMPLETEBLOCKSZ	8
#define PREF_MAX_COMPLETEBLOCKSZ	256
#define PREF_MIN_NEWUSER_RNDPORT	4000


extern const StructLanguage g_aLangs[];

__inline uint32 ValidateDownCapability(uint32 dwCap)
{
	dwCap &= 0xFFFF;
	return (dwCap == 0) ? PREF_DEF_DOWNCAP : dwCap;
}

__inline uint32 ValidateUpCapability(uint32 dwCap)
{
	dwCap &= 0xFFFF;
	return (dwCap == 0) ? PREF_DEF_UPCAP : dwCap;
}


#pragma pack(1)
// DO NOT EDIT VALUES like making a uint16 to uint32, or insert any value. ONLY append new vars
struct Preferences_Ext_Struct
{
	byte	version;
	uchar	abyteUserHash[16];
	WINDOWPLACEMENT EmuleWindowPlacement;
};
#pragma pack()

struct ProxySettings
{
	uint16		m_nType;
	uint16		m_uPort;
	CStringA	m_strName;
	CStringA	m_strUser;
	CStringA	m_strPassword;
	bool		m_bEnablePassword;
	bool		m_bUseProxy;
};

typedef enum
{
	SEE_SHARE_EVERYBODY = 0,
	SEE_SHARE_FRIENDS = 1,
	SEE_SHARE_NOONE = 2
} enSeeShare;

typedef enum
{
	HASH_PRIORITY_IDLE = 0,
	HASH_PRIORITY_LOWER = 1,
	HASH_PRIORITY_STANDARD = 2
} enHashPriority;

// Permission values for shared files
#define PERM_ALL		0
#define PERM_FRIENDS	1
#define PERM_NOONE		2

class CIni;

class CPreferences
{
public:
	enum
	{
		TABLE_DOWNLOAD = 0,
		TABLE_DOWNLOAD2,
		TABLE_UPLOAD,
		TABLE_QUEUE,
		TABLE_SEARCH,
		TABLE_SHARED,
		TABLE_SERVER,
		TABLE_IRCNICK,
		TABLE_IRC,
		TABLE_CLIENTLIST,
		TABLE_PARTSTATUS,
		TABLE_FRIENDLIST,
		TABLE_SRCFILENAME,
		TABLE_COUNT
	};

	CPreferences();
	~CPreferences();

	const CString&	GetAppDir() const							{ return m_strAppDir; }
	const CString&	GetConfigDir() const						{ return m_strConfigDir; }
	bool	Save();
	void	SaveIniPreferences();

	void	SaveCats();
	void	LoadCats();

	bool	IsShareableDirectory(const CString& rstrDirectory) const;
	bool	IsInstallationDirectory(const CString& rstrDir) const;

	unsigned	GetProfile() const						{ return m_uiProfile; }
	void	SetProfile(unsigned uiVal)					{ m_uiProfile = uiVal; }
	bool	GetUseServerPriorities() const				{ return m_bUseServerPriorities; }
	void	SetUseServerPriorities(bool bVal)			{ m_bUseServerPriorities = bVal; }
	bool	Reconnect()									{ return m_bReconnect; }
	void	SetReconnect(bool bReconnect)				{ m_bReconnect = bReconnect; }
	bool	DeadServer() const							{ return m_bRemoveDeadServers; }
	void	SetDeadServer(bool bVal)					{ m_bRemoveDeadServers = bVal; }
	CString	GetUserNick()								{ return m_sNick.Get(); }
	void	SetUserNick(const CString& strNewNick)
	{
		m_sNick.Put(strNewNick);
		SetUserNickTag();
	}
	uint16	GetPort()									{ return m_uPort; }
	void	SetPort(uint16 uPort)						{ m_uPort = uPort; }

	uint16	GetListenPort()								{ return (m_bUseProxyListenPort) ? m_nListenPort : GetPort(); }
	void	SetListenPort(uint16 uPort)					{ m_nListenPort = uPort; m_bUseProxyListenPort = true; }
	void	ResetListenPort()							{ m_nListenPort = 0; m_bUseProxyListenPort = false; }

	const char*		GetBindAddrA() const				{ return m_pcBindAddrA; }
	const TCHAR*	GetBindAddr() const					{ return m_pcBindAddr; }
	uint16	GetUDPPort() const							{ return m_uUDPPort; }
	void	SetUDPPort(uint16 uPort)					{ m_uUDPPort = uPort; }
	bool	GetOpenPorts() const						{ return m_bOpenPorts; }
	void	SetOpenPorts(bool bEnable)					{ m_bOpenPorts = bEnable; }
	CString	GetIncomingDir()							{ return m_sIncomingDir.Get(); }
	void	SetIncomingDir(const CString& strDir)		{ m_sIncomingDir.Put(strDir); }
	CString	GetTempDir()								{ return m_sTempDir.Get(); }
	LPCTSTR	GetTempDir() const							{ return m_sTempDir.Get(); }
	void	SetTempDir(const CString& strDir)			{ m_sTempDir.Put(strDir); }
	const CString&	GetVideoPlayer() const				{ return m_strVideoPlayer; }
	void	SetVideoPlayer(const CString &str)			{ m_strVideoPlayer = str; }
	const CString&	GetVideoPlayerArgs() const			{ return m_strVideoPlayerArgs; }
	void	SetVideoPlayerArgs(const CString &strParms)	{ m_strVideoPlayerArgs = strParms; }
	uchar*	GetUserHash()								{ return m_userHash; }
	uint16	GetMaxUpload() const						{ return static_cast<uint16>(m_dwMaxUpload); }

	bool	IsUAPEnabled()								{ return m_bUAP; }
	void	SetUAPEnabled(bool bEnable)					{ m_bUAP = bEnable; }
	bool	IsDAPEnabled()								{ return m_bDAP; }
	void	SetDAPEnabled(bool bEnable)					{ m_bDAP = bEnable; }
	bool	IsDisabledXS()								{ return m_bDisableXS; }
	void	SetDisabledXS(bool bDisable)				{ m_bDisableXS = bDisable; }
	bool	StartDownloadPaused()						{ return m_bStartDownloadPaused; }
	void	SetStartDownloadPaused(bool bPaused)		{ m_bStartDownloadPaused = bPaused; }
	bool	DownloadPausedOnComplete()					{ return m_bDownloadPausedOnComplete; }
	void	SetDownloadPausedOnComplete(bool bPaused)	{ m_bDownloadPausedOnComplete = bPaused; }
	bool	IsResumeOtherCat()							{ return m_bResumeOtherCat; }
	void	SetResumeOtherCat(bool bEnable)				{ m_bResumeOtherCat = bEnable; }
	bool	IsAutoClearCompleted()						{ return m_bAutoClearCompleted; }
	void	SetAutoClearCompleted(bool bClear)			{ m_bAutoClearCompleted = bClear; }
	bool	IsAutoSourcesEnabled()						{ return m_bAutoSourcesEnabled; }
	void	SetAutoSourcesEnabled(bool bAutoS)			{ m_bAutoSourcesEnabled = bAutoS; }
	uint32	GetMinAutoSourcesPerFile()					{ return m_nMinAutoSourcesPerFile; }
	void	SetMinAutoSourcesPerFile(uint32 nMinAuto)	{ m_nMinAutoSourcesPerFile = nMinAuto; }
	uint32	GetMaxAutoSourcesPerFile()					{ return m_nMaxAutoSourcesPerFile; }
	void	SetMaxAutoSourcesPerFile(uint32 nMaxAuto)	{ m_nMaxAutoSourcesPerFile = nMaxAuto; }
	uint32	GetMaxAutoSourcesTotal()					{ return m_nMaxAutoSourcesTotal; }
	void	SetMaxAutoSourcesTotal(uint32 nMaxAuto)		{ m_nMaxAutoSourcesTotal = nMaxAuto; }
	uint32	GetMaxAutoExchangeSources()					{ return m_nMaxAutoExchangeSources; }
	void	SetMaxAutoExchangeSources(uint32 nMaxAuto)	{ m_nMaxAutoExchangeSources = nMaxAuto; }
	bool	IsAutoSourcesLogEnabled()					{ return m_bAutoSourcesLogEnabled; }
	void	SetAutoSourcesLog(bool bEnabled)			{ m_bAutoSourcesLogEnabled = bEnabled; }
	bool	IsClientTransferLogEnabled()				{ return m_bClientTransferLogEnabled; }
	void	SetClientTransferLog(bool bEnabled)			{ m_bClientTransferLogEnabled = bEnabled; }
	CString GetToolbarSettings() 						{ return m_sToolbarSettings.Get(); }
	CString GetDefaultToolbarSettings() const 			{ return CString(_T("0099010203040506079908")); }
	void	SetToolbarSettings(const CString &str) 				{ m_sToolbarSettings.Put(str); }
	CString GetToolbarBitmapSettings() 					{ return m_sToolbarBitmap.Get(); }
	void	SetToolbarBitmapSettings(const CString& path) { m_sToolbarBitmap.Put(path); }
	CString GetToolbarBitmapFolderSettings() 			{ return m_sToolbarBitmapFolder.Get(); }
	void	SetToolbarBitmapFolderSettings(const CString& path){ m_sToolbarBitmapFolder.Put(path); }
	int		GetToolbarLabelSettings() const				{ return m_iToolbarLabels; }
	void	SetToolbarLabelSettings(int iVal)			{ m_iToolbarLabels = iVal; }
	bool	AutoServerlist()							{ return m_bAutoServerList; }
	void	SetAutoServerlist(bool bAuto)				{ m_bAutoServerList = bAuto; }
	uchar*	GetA4AFHash(void)							{ return m_A4AF_FileHash; }
	void	SetA4AFHash(const byte* pbyteFileHash);

//	WebServer
	uint16	GetWSPort() const							{ return m_uWSPort; }
	void	SetWSPort(uint16 uPort)						{ m_uWSPort = uPort; }
	const byte*	GetWSPass() const						{ return m_abyteWebPassword; }
	void	SetWSPass(const CString &strNewPass);
	const byte*	GetWSLowPass() const					{ return m_abyteLowWebPassword; }
	void	SetWSLowPass(const CString &strNewPass);
	bool	GetWSIsEnabled()							{ return m_bWebEnabled; }
	void	SetWSIsEnabled(bool bEnable)				{ m_bWebEnabled = bEnable; }
	bool	GetWSIsLowUserEnabled()						{ return m_bWebLowEnabled; }
	void	SetWSIsLowUserEnabled(bool bEnable)			{ m_bWebLowEnabled = bEnable; }
	int		GetWebPageRefresh()							{ return m_nWebPageRefresh; }
	void	SetWebPageRefresh(int nRefresh)				{ m_nWebPageRefresh = nRefresh; }
	WSPrefParams*	GetWSPrefsPtr()						{ return &m_WSPrefs; }

	bool	UpdateNotify()								{ return m_bUpdateNotify; }
	bool	DoMinToTray()								{ return m_bMinToTray; }
	void	SetMinToTray(bool bMinToTray)				{ m_bMinToTray = bMinToTray; }
	bool*	GetMinTrayPTR()								{ return &m_bMinToTray; }
	bool	DoAutoConnect()								{ return m_bAutoConnect; }
	void	SetAutoConnect(bool bConnect)				{ m_bAutoConnect = bConnect; }
	uint32	BadClientBanTime() const					{ return m_dwBadClientBanTime; }
	void	SetBadClientBanTime(uint32 dwVal)			{ m_dwBadClientBanTime = dwVal; }
	uint32	BadClientMinRequestTime() const				{ return m_dwMinRequestTime; }
	void	SetBadClientMinRequestTime(uint32 dwVal)	{ m_dwMinRequestTime = dwVal; }
	byte	BadClientMinRequestNum() const				{ return m_byteBadClientBan; }
	void	SetBadClientMinRequestNum(byte byteVal)		{ m_byteBadClientBan = byteVal; }
	bool	IsBanMessageEnabled()						{ return m_bBanMessageEnabled; }
	void	SetBanMessageEnabled(bool bEnable)			{ m_bBanMessageEnabled = bEnable; }

	bool	BanEnabled()								{ return m_bBanEnabled; }
	void	SetBanEnable(bool bEnable)					{ m_bBanEnabled = bEnable; }

	bool	ShowRatingIcons()							{ return m_bShowRatingIcons; }
	void	SetShowRatingIcons(bool bEnable)			{ m_bShowRatingIcons = bEnable; }

	uint32	WhenSourcesOutdated() const					{ return m_dwSLSOutdated; }
	void	SetWhenSourcesOutdated(uint32 dwVal)		{ m_dwSLSOutdated = dwVal;}
	uint32	SLSMaxSourcesPerFile() const				{ return m_dwSLSMaxSrcPerFile; }
	void	SetSLSMaxSourcesPerFile(uint32 dwVal)		{ m_dwSLSMaxSrcPerFile = dwVal; }
	bool	SLSEnable()									{ return m_bSLSEnable; }
	void	SetSLSEnable(bool bEnable)					{ m_bSLSEnable = bEnable; }

	void	SaveStats(int iBackUp, CIni *pCurIni = NULL);
	void	SetRecordStructMembers();
	bool	LoadStats(CIni *pCurIni);
	void	ResetStatistics();

	//		Functions from base code that update original cumulative stats, now obsolete. (KHAOS)
	//void	Add2TotalDownloaded(uint64 in) {totalDownloadedBytes+=in;}
	//void	Add2TotalUploaded(uint64 in) {totalUploadedBytes+=in;}
	//		End functions from base code.

	//		Add to, increment and replace functions.  They're all named Add2 for the sake of some kind of naming
	//		convention.
	void	Add2DownCompletedFiles()					{ cumDownCompletedFiles++; }
	void	Add2ConnMaxAvgDownRate(double in)			{ cumConnMaxAvgDownRate = in; }
	void	Add2ConnMaxDownRate(double in)				{ cumConnMaxDownRate = in; }
	void	Add2ConnMaxAvgUpRate(double in)				{ cumConnMaxAvgUpRate = in; }
	void	Add2ConnMaxUpRate(double in)				{ cumConnMaxUpRate = in; }
	void	Add2ConnPeakConnections(int in)				{ cumConnPeakConnections = static_cast<uint16>(in); }
	void	Add2DownSAvgTime(int in)					{ sesDownAvgTime += in; }
	void	Add2ConnTransferTime(int in)				{ cumConnTransferTime += in; }
	void	Add2ConnDownloadTime(int in)				{ cumConnDownloadTime += in; }
	void	Add2ConnUploadTime(int in)					{ cumConnUploadTime += in; }
	void	Add2DownSessionCompletedFiles()				{ sesDownCompletedFiles++; }
	void	Add2SessionUpTransferData(unsigned uiClientID, bool bFromPF, uint32 dwBytes, bool bCommunity, byte byteFilePrio);
	void	Add2SessionDownTransferData(unsigned uiClientID, uint32 dwBytes);
	void	Add2DownSuccessfulSessions()				{ sesDownSuccessfulSessions++;
														  dwCumDownSuccessfulSessions++; }
	void	Add2DownFailedSessions()					{ sesDownFailedSessions++;
														  dwCumDownFailedSessions++; }
	void	Add2DownFailedSessionsNoRequiredData()		{ sesDownFailedSessionsNoRequiredData++; }
	void	Add2LostFromCorruption(uint32 dwAdd)		{ m_qwSesLostFromCorruption += dwAdd; }
	void	SubLostFromCorruption(uint32 dwSub)			{ if (m_qwSesLostFromCorruption >= dwSub)
															m_qwSesLostFromCorruption -= dwSub;
														  else if (m_qwCumLostFromCorruption)
															m_qwCumLostFromCorruption -= dwSub; }
	void	Add2SavedFromCompression(sint32 iVal)		{ m_qwSesSavedFromCompression += iVal; }
	void	IncSessionPartsSavedByICH()					{ m_dwSesPartsSavedByICH++; }

	//		Functions that return stats stuff...
	//		Saved stats for cumulative downline overhead
	uint64	GetDownOverheadTotal()						{ return cumDownOverheadTotal;}
	uint64	GetDownOverheadFileReq()					{ return cumDownOverheadFileReq;}
	uint64	GetDownOverheadSrcEx()						{ return cumDownOverheadSrcEx;}
	uint64	GetDownOverheadServer()						{ return cumDownOverheadServer;}
	uint64	GetDownOverheadOther()						{ return cumDownOverheadOther;}
	uint64	GetDownOverheadTotalPackets()				{ return cumDownOverheadTotalPackets;}
	uint64	GetDownOverheadFileReqPackets() 			{ return cumDownOverheadFileReqPackets;}
	uint64	GetDownOverheadSrcExPackets()				{ return cumDownOverheadSrcExPackets;}
	uint64	GetDownOverheadServerPackets()				{ return cumDownOverheadServerPackets;}
	uint64	GetDownOverheadOtherPackets()				{ return cumDownOverheadOtherPackets;}

	//		Saved stats for cumulative upline overhead
	uint64	GetUpOverheadTotal()						{ return cumUpOverheadTotal;}
	uint64	GetUpOverheadFileReq()						{ return cumUpOverheadFileReq;}
	uint64	GetUpOverheadSrcEx()						{ return cumUpOverheadSrcEx;}
	uint64	GetUpOverheadServer()						{ return cumUpOverheadServer;}
	uint64	GetUpOverheadOther()						{ return cumUpOverheadOther;}
	uint64	GetUpOverheadTotalPackets()					{ return cumUpOverheadTotalPackets;}
	uint64	GetUpOverheadFileReqPackets()				{ return cumUpOverheadFileReqPackets;}
	uint64	GetUpOverheadSrcExPackets()					{ return cumUpOverheadSrcExPackets;}
	uint64	GetUpOverheadServerPackets()				{ return cumUpOverheadServerPackets;}
	uint64	GetUpOverheadOtherPackets()					{ return cumUpOverheadOtherPackets;}

	//		Saved stats for cumulative upline data
	uint32	GetUpSuccessfulSessions()					{ return cumUpSuccessfulSessions;}
	uint32	GetUpFailedSessions()						{ return cumUpFailedSessions;}

	//		Saved stats for cumulative downline data
	uint32	GetDownCompletedFiles() const				{ return cumDownCompletedFiles; }
	uint32	GetDownC_SuccessfulSessions() const			{ return dwCumDownSuccessfulSessions; }
	uint32	GetDownC_FailedSessions() const 			{ return dwCumDownFailedSessions; }
	//		Session download stats
	uint16	GetDownSessionCompletedFiles()				{ return sesDownCompletedFiles;}
	uint16	GetDownS_SuccessfulSessions()				{ return sesDownSuccessfulSessions;}
	uint16	GetDownS_FailedSessions()					{ return sesDownFailedSessions;}
	uint16	GetDownS_FailedSessionsNoRequiredData()		{ return sesDownFailedSessionsNoRequiredData;}
	uint32	GetDownS_AvgTime()							{ return GetDownS_SuccessfulSessions()?sesDownAvgTime/GetDownS_SuccessfulSessions():0;}

	//	Saved stats for corruption/compression
	uint64	GetCumLostFromCorruption() const			{ return m_qwCumLostFromCorruption; }
	uint64	GetSesLostFromCorruption() const			{ return m_qwSesLostFromCorruption; }
	uint64	GetCumSavedFromCompression() const			{ return m_qwCumSavedFromCompression; }
	uint64	GetSesSavedFromCompression() const			{ return m_qwSesSavedFromCompression; }
	uint32	GetCumPartsSavedByICH() const				{ return m_dwCumPartsSavedByICH; }
	uint32	GetSesPartsSavedByICH() const				{ return m_dwSesPartsSavedByICH; }

	// Cumulative client breakdown stats for sent bytes
	uint64	GetUpTotalClientData()						{	uint64 transferred_data = 0;
															for (int i = 0; i<SO_LAST; i++)
															{
																transferred_data += cumUpDataClients[i];
																transferred_data += sesUpDataClients[i];
															}
															return transferred_data;
														}
	uint64	GetCumUpData(EnumClientTypes eClientID)		{ return (cumUpDataClients[eClientID]+sesUpDataClients[eClientID]); }

	// Session client breakdown stats for sent bytes
	uint64	GetUpSessionClientData()					{	uint64 transferred_data = 0;
															for (int i = 0; i<SO_LAST; i++) transferred_data += sesUpDataClients[i];
															return transferred_data;
														}
	uint64	GetUpData(EnumClientTypes eClientID)		{ return sesUpDataClients[eClientID]; }

	// Cumulative DS breakdown stats for sent bytes...
	uint64	GetUpDataByPriority(byte bytePrio)			{ return ((bytePrio < ARRSIZE(sesUpDataPriority)) ? sesUpDataPriority[bytePrio] : 0);}

	// Cumulative DS breakdown stats for sent bytes...
	uint64	GetUpTotalDataFile()						{ return (GetCumUpData_File() + GetCumUpData_PartFile() );}
	uint64	GetCumUpData_File()							{ return (cumUpData_File + sesUpData_File );}
	uint64	GetCumUpData_PartFile()						{ return (cumUpData_PartFile + sesUpData_PartFile );}

	// Session DS breakdown stats for sent bytes...
	uint64	GetUpSessionDataFile()						{ return (sesUpData_File + sesUpData_PartFile );}
	uint64	GetUpData_File()							{ return sesUpData_File;}
	uint64	GetUpData_PartFile()						{ return sesUpData_PartFile;}

	// Cumulative community breakdown stats for sent bytes...
	uint64	GetUpTotalDataCommunity()					{ return (GetCumUpData_Community() + GetCumUpData_NoCommunity() );}
	uint64	GetCumUpData_Community()					{ return (cumUpData_Community + sesUpData_Community );}
	uint64	GetCumUpData_NoCommunity()					{ return (cumUpData_NoCommunity + sesUpData_NoCommunity );}

	// Session community breakdown stats for sent bytes...
	uint64	GetUpSessionDataCommunity()					{ return (sesUpData_Community + sesUpData_NoCommunity );}
	uint64	GetUpData_Community()						{ return sesUpData_Community;}
	uint64	GetUpData_NoCommunity()						{ return sesUpData_NoCommunity;}

	// Cumulative client breakdown stats for received bytes
	uint64	GetDownTotalClientData()					{	uint64 transferred_data = 0;
															for (int i = 0; i<SO_LAST; i++)
															{
																transferred_data += cumDownDataClients[i];
																transferred_data += sesDownDataClients[i];
															}
															return transferred_data;
														}
	uint64	GetCumDownData(EnumClientTypes eClientID)		{ return (cumDownDataClients[eClientID]+sesDownDataClients[eClientID]); }

	// Session client breakdown stats for received bytes
	uint64	GetDownSessionClientData()					{	uint64 transferred_data = 0;
															for (int i = 0; i<SO_LAST; i++) transferred_data += sesDownDataClients[i];
															return transferred_data;
														}
	uint64	GetDownData(EnumClientTypes eClientID)		{ return sesDownDataClients[eClientID]; }

	//		Saved stats for cumulative connection data
	double	GetConnMaxAvgDownRate()						{ return cumConnMaxAvgDownRate;}
	double	GetConnMaxDownRate()						{ return cumConnMaxDownRate;}
	double	GetConnMaxAvgUpRate()						{ return cumConnMaxAvgUpRate;}
	double	GetConnMaxUpRate()							{ return cumConnMaxUpRate;}
	uint32	GetConnRunTime() const						{ return dwCumConnRunTime; }
	uint16	GetConnNumReconnects()						{ return cumConnNumReconnects;}
	uint16	GetConnAvgConnections()						{ return cumConnAvgConnections;}
	uint16	GetConnMaxConnLimitReached()				{ return cumConnMaxConnLimitReached;}
	uint16	GetConnPeakConnections()					{ return cumConnPeakConnections;}
	uint32	GetConnTransferTime()						{ return cumConnTransferTime;}
	uint32	GetConnDownloadTime()						{ return cumConnDownloadTime;}
	uint32	GetConnUploadTime()							{ return cumConnUploadTime;}
	uint32	GetConnServerDuration()						{ return cumConnServerDuration;}

	//		Saved records for servers / network
	uint16	GetSrvrsMostWorkingServers()				{ return cumSrvrsMostWorkingServers;}
	uint32	GetSrvrsMostUsersOnline()					{ return cumSrvrsMostUsersOnline;}
	uint32	GetSrvrsMostFilesAvail()					{ return cumSrvrsMostFilesAvail;}

	//		Saved records for shared files
	uint16	GetSharedMostFilesShared()					{ return cumSharedMostFilesShared; }
	uint64	GetSharedLargestShareSize()					{ return m_qwCumSharedLargestShareSize; }
	uint64	GetSharedLargestAvgFileSize()				{ return m_qwCumSharedLargestAvgFileSize; }
	uint64	GetSharedLargestFileSize()					{ return m_qwCumSharedLargestFileSize; }

	//		Get the long date/time when the stats were last reset
	time_t	GetStatsLastResetLng()						{ return stat_datetimeLastReset;}
	CString	GetStatsLastResetStr();

	//		Get and Set our new preferences
	void		SetExpandedTreeItems(const CString &in)	{ m_strStatsExpandedTreeItems = in; }
	CString	GetExpandedTreeItems() const				{ return m_strStatsExpandedTreeItems; }
	// <-----khaos- End Statistics Methods

	uint32	GetQueueSize() const						{ return m_dwQueueSize; }
	void	SetQueueSize(uint32 dwSize)					{ m_dwQueueSize = dwSize; }

	bool	GetAddServersFromServer() const				{ return m_bAddServersFromServer; }
	void	SetAddServersFromServer(bool bAdd)			{ m_bAddServersFromServer = bAdd; }
	bool	GetAddServersFromClients() const			{ return m_bAddServersFromClients; }
	void	SetAddServersFromClients(bool bAdd)			{ m_bAddServersFromClients = bAdd; }
	uint16	GetTrafficOMeterInterval() 					{ return m_nTrafficOMeterInterval; }
	void	SetTrafficOMeterInterval(uint16 in) 		{ m_nTrafficOMeterInterval = in; }
	uint16	GetStatsInterval()							{ return m_nStatsInterval; }
	void	SetStatsInterval(uint16 in)					{ m_nStatsInterval = in; }
	int		GetDetailColumnWidth() const				{ return m_iDetailColumnWidth; }
	void	SetDetailColumnWidth(int iVal)				{ m_iDetailColumnWidth = iVal; }
	void	Add2TotalDownloaded(uint64 in)				{ uint64 nSet = m_nTotalDownloadedBytes.Get(); nSet += in; m_nTotalDownloadedBytes.Put(nSet); }
	uint64	GetTotalDownloaded()						{ return m_nTotalDownloadedBytes.Get(); }
	void	Add2TotalUploaded(uint64 in)				{ uint64 nSet = m_nTotalUploadedBytes.Get(); nSet += in; m_nTotalUploadedBytes.Put(nSet); }
	uint64	GetTotalUploaded()							{ return m_nTotalUploadedBytes.Get(); }
	bool	IsErrorBeepEnabled()						{ return m_bBeepOnError; }
	void	SetErrorBeepEnabled(bool bEnable)			{ m_bBeepOnError = bEnable; }
	bool	IsConfirmExitEnabled()						{ return m_bConfirmExit; }
	bool	IsConfirmDisconnectEnabled()				{ return m_bConfirmDisconnect; }
	bool	IsConfirmFriendDelEnabled()					{ return m_bConfirmFriendDel; }
	void	SetConfirmExitEnabled(bool bEnable)			{ m_bConfirmExit = bEnable; }
	void	SetConfirmDisconnectEnabled(bool bEnable)	{ m_bConfirmDisconnect = bEnable; }
	void	SetConfirmFriendDelEnabled(bool bEnable)	{ m_bConfirmFriendDel = bEnable; }
	bool	UseSplashScreen()							{ return m_bSplashScreen; }
	void	SetUseSplashScreen(bool bUse)				{ m_bSplashScreen = bUse; }
	bool	IsFilterBadIPs() const						{ return m_bFilterBadIP; }
	void	SetFilterBadIPs(bool bFilter)				{ m_bFilterBadIP = bFilter; }
	bool	IsFilterServersByIP() const					{ return m_bFilterServersByIP; }
	void	SetFilterServersByIP (bool bFilter)			{ m_bFilterServersByIP = bFilter; }
	bool	IsOnlineSignatureEnabled()					{ return m_bOnlineSig; }
	void	SetOnlineSignatureEnabled(bool bEnable)		{ m_bOnlineSig = bEnable; }

	uint32	GetMaxGraphUploadRate() const				{ return m_dwMaxGraphUploadRate; }
	void	SetMaxGraphUploadRate(uint32 in)			{ m_dwMaxGraphUploadRate = in; }
	uint32	GetMaxGraphDownloadRate() const				{ return m_dwMaxGraphDownloadRate; }
	void	SetMaxGraphDownloadRate(uint32 in)			{ m_dwMaxGraphDownloadRate = in; }

	uint16	GetMaxDownload();
	uint16	GetMaxConnections()							{ return m_nMaxConnections; }
	void	SetMaxConnections(uint16 uMaxConn)			{ m_nMaxConnections = uMaxConn; }
	uint32	GetMaxSourcePerFile() const					{ return m_dwMaxSourcePerFile; }
	void	SetMaxSourcePerFile(uint32 dwVal)			{ m_dwMaxSourcePerFile = dwVal & 0xFFFF; }
	uint16	GetMaxSourcePerFileSoft() const;
	uint16	GetMaxSourcePerFileUDP() const;
	uint32	GetDeadserverRetries() const				{ return m_dwDeadServerRetries; }
	void	SetDeadserverRetries(uint32 dwRetries)		{ m_dwDeadServerRetries = dwRetries; }

	int		GetColumnWidth(int iTbl, int index) const;
	bool	GetColumnHidden(int iTbl, int index) const;
	int		GetColumnOrder(int iTbl, int index) const;
	void	SetColumnWidth(int iTbl, int index, int width);
	void	SetColumnHidden(int iTbl, int index, bool bHidden);
	void	SetColumnOrder(int iTbl, int *piOrder);

	byte*	GetColumnSortAscending(int iTbl);
	void	SetColumnSortItem(unsigned uiTbl, int iSortItem);
	int		GetColumnSortCode(unsigned uiTbl) const;

	bool	GetMultiple()								{ return m_bMultiple; }
	void	SetMultiple(bool bEnable)					{ m_bMultiple = bEnable; }

	WORD	GetLanguageID()								{ return m_nLanguageID; }
	void	SetLanguageID(WORD wID)						{ m_nLanguageID = wID; }
	enSeeShare CanSeeShares(void)						{ return m_nSeeShares; }
	void	SetCanSeeShares(enSeeShare iCan)			{ m_nSeeShares = iCan; }
	byte	GetFilePermission(void) const				{ return m_byteFilePermission; }
	void	SetFilePermission(byte bytePerm)			{ m_byteFilePermission = bytePerm; }
	uint32	GetToolTipDelay() const						{ return m_dwTooltipDelay; }
	void	SetToolTipDelay(uint32 dwDelay)				{ m_dwTooltipDelay = dwDelay; }
	bool	IsBringToFront()							{ return m_bBringToForeground; }
	void	SetBringToFront(bool bBTFront)				{ m_bBringToForeground = bBTFront; }

	uint16	GetStatsMax()								{ return m_nStatsMax; }
	void	SetStatsMax(uint16 uMaxStats)				{ m_nStatsMax = uMaxStats; }
	byte	GetStatsAverageMinutes()					{ return m_nStatsAverageMinutes; }
	void	SetStatsAverageMinutes(byte in)				{ m_nStatsAverageMinutes = in; }

	bool	GetShowToolbarSpeedMeter()					{ return m_bShowToolbarSpeedMeter; }
	void	SetShowToolbarSpeedMeter(bool bShow)		{ m_bShowToolbarSpeedMeter = bShow; }
	bool	GetShowCountryFlag()						{ return m_bShowCountryFlag; }
	void	SetShowCountryFlag(bool bShow)				{ m_bShowCountryFlag = bShow; }
	bool	GetCloseToTray()							{ return m_bCloseToTray; }
	void	SetCloseToTray(bool bClose)					{ m_bCloseToTray = bClose; }
	bool	GetDetailsOnClick()							{ return m_bDetailsOnClick; }
	void	SetDetailsOnClick(bool bSet)				{ m_bDetailsOnClick = bSet; }
	bool	GetBugReport() const						{ return m_bBugReport; }
	bool	AllowLocalHostIP() const					{ return m_bAllowLocalHostIP; }

	bool	GetUseDownloadAddNotifier()					{ return m_bUseDownloadAddNotifier; }
	void	SetUseDownloadAddNotifier(bool bUse)		{ m_bUseDownloadAddNotifier = bUse; }
	bool	GetUseDownloadNotifier()					{ return m_bUseDownloadNotifier; }
	void	SetUseDownloadNotifier(bool bUse)			{ m_bUseDownloadNotifier = bUse; }
	bool	GetUseChatNotifier()						{ return m_bUseChatNotifier; }
	void	SetUseChatNotifier(bool bUse)				{ m_bUseChatNotifier = bUse; }
	bool	GetUseLogNotifier()							{ return m_bUseLogNotifier; }
	void	SetUseLogNotifier(bool bUse)				{ m_bUseLogNotifier = bUse; }
	bool	GetUseSoundInNotifier()						{ return m_bUseSoundInNotifier; }
	void	SetUseSoundInNotifier(bool bUse)			{ m_bUseSoundInNotifier = bUse; }
	bool	GetUseSchedulerNotifier()					{ return m_bUseSchedulerNotifier; }
	void	SetUseSchedulerNotifier(bool bUse)			{ m_bUseSchedulerNotifier = bUse; }
	bool	GetNotifierPopsEveryChatMsg()				{ return m_bNotifierPopsEveryChatMsg; }
	void	SetNotifierPopsEveryChatMsg(bool bPop)		{ m_bNotifierPopsEveryChatMsg = bPop; }
	bool	GetNotifierPopOnImportantError()			{ return m_bNotifierImportantError; }
	void	SetNotifierPopOnImportantError(bool bPop)	{ m_bNotifierImportantError = bPop; }
	bool	GetNotifierPopOnWebServerError()			{ return m_bNotifierWebServerError; }
	void	SetNotifierPopOnWebServerError(bool bPop)	{ m_bNotifierWebServerError = bPop; }
	bool	GetNotifierPopOnServerError()				{ return m_bNotifierServerError; }
	void	SetNotifierPopOnServerError(bool bPop)		{ m_bNotifierServerError = bPop; }
	CString	GetNotifierWavSoundPath()					{ return m_sNotifierSoundFilePath.Get(); }
	void	SetNotifierWavSoundPath(const CString& strPath)	{ m_sNotifierSoundFilePath.Put(strPath); }

	CString	GetIRCNick()								{ return m_sIRCNick.Get(); }
	void	SetIRCNick(const CString &strVal)			{ m_sIRCNick.Put(strVal); }
	CString	GetIRCServer()								{ return m_sIRCServer.Get(); }
	void	SetIRCServer(const CString& in_serv )		{ m_sIRCServer.Put(in_serv); }
	bool	GetIRCAddTimestamp() const					{ return m_bIRCAddTimestamp; }
	void	SetIRCAddTimestamp(bool bVal)				{ m_bIRCAddTimestamp = bVal; }
	CString	GetIRCChanNameFilter()						{ return m_sIRCChanNameFilter.Get(); }
	void	SetIRCChanNameFilter(const CString& in_name){ m_sIRCChanNameFilter.Put(in_name); }
	bool	GetIRCUseChanFilter() const					{ return m_bIRCUseChanFilter; }
	void	SetIRCUseChanFilter(bool bVal)				{ m_bIRCUseChanFilter = bVal; }
	uint16	GetIRCChannelUserFilter() const				{ return m_nIRCChannelUserFilter; }
	void	SetIRCChanUserFilter(uint16 uUser)			{ m_nIRCChannelUserFilter = uUser; }
	CString	GetIrcPerformString()						{ return m_sIRCPerformString.Get(); }
	void	SetIRCPerformString(const CString& in_perf)	{ m_sIRCPerformString.Put(in_perf);}
	bool	GetIrcUsePerform() const					{ return m_bIRCUsePerform; }
	void	SetIrcUsePerform(bool bFlag)				{ m_bIRCUsePerform = bFlag; }
	bool	GetIRCListOnConnect() const					{ return m_bIRCListOnConnect; }
	void	SetIRCListonConnect(bool bFlag)				{ m_bIRCListOnConnect = bFlag; }
	bool	GetIrcIgnoreInfoMessage() const				{ return m_bIRCIgnoreInfoMessage; }
	void	SetIrcIgnoreInfoMessage(bool bFlag)			{ m_bIRCIgnoreInfoMessage = bFlag; }
	bool	GetIrcMessageEncodingUTF8() const			{ return m_bIRCMessageEncodingUTF8; }
	void	SetIrcMessageEncodingUTF8(bool bFlag)		{ m_bIRCMessageEncodingUTF8 = bFlag; }
	bool	GetIrcStripColor() const					{ return m_bIRCStripColor; }
	void	SetIrcStripColor(bool bVal)					{ m_bIRCStripColor = bVal; }

	WORD	GetWindowsVersion();
	bool	GetStartMinimized()							{ return m_bStartMinimized; }
	void	SetStartMinimized(bool bStart)				{ m_bStartMinimized = bStart; }
	bool	GetSmartIdCheck()							{ return m_bSmartIdCheck; }
	void	SetSmartIdCheck(bool in_smartidcheck)		{ m_bSmartIdCheck = in_smartidcheck; }
	byte	GetSmartIdState()							{ return m_nSmartIdState; }
	void	SetSmartIdState(byte in_smartidstate)		{ m_nSmartIdState = in_smartidstate; }

	bool	GetVerbose()								{ return m_bVerbose; }
	void	SetVerbose(bool bVal)						{ m_bVerbose = bVal; }
	bool	GetManuallyAddedServerHighPrio() const		{ return m_bManuallyAddedServerHighPrio; }
	void	SetManuallyAddedServerHighPrio(bool bVal)	{ m_bManuallyAddedServerHighPrio = bVal; }
	bool	ShowOverhead() const						{ return m_bShowOverhead; }
	void	SetShowOverhead(bool bVal)					{ m_bShowOverhead = bVal; }

	CString	GetTxtEditor() const						{ return m_strTxtEditor; }

	uint32	GetFakesDatVersion()						{return m_nFakesDatVersion;}
	void	SetFakesDatVersion(uint32 version)			{m_nFakesDatVersion = version;}
	bool	IsUpdateFakeStartupEnabled()				{return m_bUpdateFakeStartup;}
	void	SetUpdateFakeStartup(bool in)				{m_bUpdateFakeStartup = in;}
	CString	GetFakeListURL(void)						{return m_sFakeListURL;}
	void	SetFakeListURL(const CString &strUrl)		{m_sFakeListURL = strUrl;}
	uint32	GetDLingFakeListVersion() const				{ return m_dwDLingFakeListVersion; }
	void	SetDLingFakeListVersion(uint32 dwVersion)	{ m_dwDLingFakeListVersion = dwVersion; }
	CString	GetDLingFakeListLink() const				{ return m_strDLingFakeListLink; }
	void	SetDLingFakeListLink(const CString& strLink){ m_strDLingFakeListLink = strLink; }
	COLORREF	GetFakeListDownloadColor() const		{ return m_clrFakeListDownloadColor; }
	void	SetFakeListDownloadColor(COLORREF clr)		{ m_clrFakeListDownloadColor = clr; }

	bool	IsAutoCheckForNewVersion()					{return m_bAutoCheckForNewVersion;}
	void	SetAutoCheckForNewVersion(bool in)			{m_bAutoCheckForNewVersion = in;}
	int		GetAutoCheckLastTime()						{return m_iAutoCheckLastTime;}
	void	SetAutoCheckLastTime(int in)				{m_iAutoCheckLastTime = in;}

	bool	UseFlatBar() const							{ return (m_byteDepth3D == 0); }
	byte	Get3DDepth() const							{ return m_byteDepth3D; }
	void	Set3DDepth(byte byteStyle)					{ m_byteDepth3D = byteStyle; }
	bool	AutoConnectStaticOnly()						{ return m_bAutoConnectStaticOnly; }
	void	SetAutoConnectStaticOnly(bool bEnabled)		{m_bAutoConnectStaticOnly = bEnabled;}

	COLORREF	GetStatsColor(int iIdx) const			{ return m_dwStatColors[iIdx]; }
	void	SetStatsColor(int iIdx, COLORREF val)		{ m_dwStatColors[iIdx] = val; }
	byte	GetGraphRatio() const						{ return m_byteGraphRatio; }
	void	SetGraphRatio(byte byteNum)					{ m_byteGraphRatio = byteNum; }
	bool	DoUseSort()									{ return m_bUseSort; }
	void	SetUseSort(bool bUseSort)					{ m_bUseSort = bUseSort; }
	bool	DoUseSrcSortCol2()							{ return m_bUseSrcSortCol2; }
	void	SetUseSrcSortCol2(bool bUseSort)			{ m_bUseSrcSortCol2 = bUseSort; }
	bool	DoPausedStoppedLast()						{ return m_bPausedStoppedLast; }
	void	SetPausedStoppedLast(bool bEnable)			{ m_bPausedStoppedLast = bEnable; }
	unsigned	GetServerSortCol() const				{ return m_uiServerSortCol; }
	void		SetServerSortCol(int iCol)				{ m_uiServerSortCol = iCol; }
	unsigned	GetUploadSortCol() const				{ return m_uiUploadSortCol; }
	void		SetUploadSortCol(int iSortCol)			{ m_uiUploadSortCol = iSortCol; }
	unsigned	GetQueueSortCol() const					{ return m_uiQueueSortCol; }
	void		SetQueueSortCol(int iSortCol)			{ m_uiQueueSortCol = iSortCol; }
	unsigned	GetSearchSortCol() const				{ return m_uiSearchSortCol; }
	void		SetSearchSortCol(int iSortCol)			{ m_uiSearchSortCol = iSortCol; }
	unsigned	GetIrcSortCol() const					{ return m_uiIRCSortCol; }
	void		SetIrcSortCol(int iSortCol)				{ m_uiIRCSortCol = iSortCol; }
	unsigned	GetClientListSortCol() const			{ return m_uiClientListSortCol; }
	void		SetClientListSortCol(int iSortCol)		{ m_uiClientListSortCol = iSortCol; }
	unsigned	GetFileSortCol() const					{ return m_uiFileSortCol; }
	void		SetFileSortCol(int iCol)				{ m_uiFileSortCol = iCol; }
	unsigned	GetDownloadSortCol() const				{ return m_uiDownloadSortCol; }
	void		SetDownloadSortCol(int iSortCol)		{ m_uiDownloadSortCol = iSortCol; }
	unsigned	GetSrcSortCol1() const					{ return m_uiSrcSortCol1; }
	void		SetSrcSortCol1(int iSortCol)			{ m_uiSrcSortCol1 = iSortCol; }
	unsigned	GetSrcSortCol2() const					{ return m_uiSrcSortCol2; }
	void		SetSrcSortCol2(int iSortCol)			{ m_uiSrcSortCol2 = iSortCol; }

	void	SetMaxDownloadConperFive(int in)			{ m_nMaxConPerFive = static_cast<uint16>(in); }
	uint16	GetMaxConPerFive()							{ return m_nMaxConPerFive; }
	uint16	GetDefaultMaxConPerFiveSecs();

	COLORREF	GetDefaultStatsColor(unsigned uiIdx);

	//--- xrmb:partTrafficPrefs ---
	bool	DoUsePT()									{ return m_bUsePartTraffic; }
	void	SetUsePT(bool in)							{ m_bUsePartTraffic = in; }
	byte	GetUpbarStyle() const						{ return m_byteUpbarPartTraffic; }
	void	SetUpbarStyle(byte byteStyle)				{ m_byteUpbarPartTraffic = byteStyle; }
	byte	GetUpbarColor() const						{ return m_byteUpbarColorPartTraffic; }
	void	SetUpbarColor(byte byteColor)				{ m_byteUpbarColorPartTraffic = byteColor; }
	//--- :xrmb ---

	bool	CommunityEnabled()							{ return m_bCommunityEnabled; }
	void	SetCommunityEnabled(bool bEnable)			{ m_bCommunityEnabled = bEnable; }
	CString	CommunityString()							{ return m_sCommunityString.Get(); }
	void	SetCommunityString(const CString& strComm)	{ m_sCommunityString.Put(strComm); }
	bool	CommunityNoBanEnabled()						{ return m_bCommunityNoBan; }
	void	SetCommunityNoBanEnabled(bool bEnable)		{ m_bCommunityNoBan = bEnable; }
	uint32	NotificationDisplayTime()					{ return m_nNotificationDisplayTime; }
	void	SetNotificationDisplayTime(uint32 uTime)	{ m_nNotificationDisplayTime = uTime; }
	uint32	NotificationFontSize()						{ return m_nNotificationFontSize; }
	void	SetNotificationFontSize(uint32 uFontSize)	{ m_nNotificationFontSize = uFontSize; }
	uint16	PriorityHigh()								{ return m_nPriorityHigh; }
	void	SetPriorityHigh(uint16 iPrio)				{ m_nPriorityHigh = iPrio; }
	uint16	PriorityLow()								{ return m_nPriorityLow; }
	void	SetPriorityLow(uint16 iPrio)				{ m_nPriorityLow = iPrio; }
	bool	RestartWaiting()							{ return m_bRestartWaiting; }
	void	SetRestartWaiting(bool bSet)				{ m_bRestartWaiting = bSet; }
	bool	LogToFile()									{ return m_bLogToFile; }
	void	SetLogToFile(bool bEnable)					{ m_bLogToFile = bEnable; }
	bool	LogUploadToFile()							{ return m_bLogUploadToFile; }
	void	SetLogUploadToFile(bool bEnable)			{ m_bLogUploadToFile = bEnable; }
	bool	LogDownloadToFile() const					{ return m_bLogDownloadToFile; }
	void	SetLogDownloadToFile(bool bEnable)			{ m_bLogDownloadToFile = bEnable; }
	bool	DisableXSUpTo()								{ return m_bDisableXSUpTo; }
	void	SetDisableXSUpTo(bool bDisable)				{ m_bDisableXSUpTo = bDisable; }
	uint16	XSUpTo()									{ return m_nXSUpTo; }
	void	SetXSUpTo(uint32 dwVal)						{ m_nXSUpTo = static_cast<uint16>(dwVal); }
	uint32	SrvConTimeout()								{ return m_nSrvConTimeout; }
	void	SetSrvConTimeout(uint32 timeout)			{ m_nSrvConTimeout = timeout; }
	uint32	SlowCompleteBlockSize() const				{ return m_dwSlowCompleteBlockSize; }
	void	SetSlowCompleteBlockSize(uint32 dwSize)		{ m_dwSlowCompleteBlockSize = dwSize; }
	CString	GetUsedFont()								{ return m_sUsedFont.Get(); }
	void	SetUsedFont(const CString& font)			{ m_sUsedFont.Put(font); }
	byte	GetFontSize()								{ return m_nFontSize; }
	void	SetFontSize(byte size)						{ m_nFontSize = size; }
	enHashPriority	GetHashingPriority(void)			{ return m_HashingPriority; }
	void	SetHashingPriority(enHashPriority hashing)	{ m_HashingPriority = hashing; }
	bool	IsUploadPartsEnabled()						{ return m_bUploadParts; }
	void	SetUploadPartsEnabled(bool bEnable)			{ m_bUploadParts = bEnable; }
	bool	IsA4AFStringEnabled()						{ return m_bA4AFStringEnabled; }
	void	SetA4AFStringEnabled(bool bEnable)			{ m_bA4AFStringEnabled = bEnable; }
	bool	IsA4AFCountEnabled()						{ return m_bA4AFCountEnabled; }
	void	SetA4AFCountEnabled(bool bEnable)			{ m_bA4AFCountEnabled = bEnable; }
	uint32	GetSearchMethod() const						{ return m_dwSearchMethod; }
	void	SetSearchMethod(uint32 dwValue)				{ m_dwSearchMethod = dwValue; }
	bool	GetKeepSearchHistory() const				{ return m_bKeepSearchHistory; }
	void	SetKeepSearchHistory(bool bVal)				{ m_bKeepSearchHistory = bVal; }
	bool	AutoTakeED2KLinks()							{ return m_bAutoTakeLinks; }
	void	SetAutoTakeED2KLinks(bool bEnable)			{ m_bAutoTakeLinks = bEnable; }
	uint32	GetFileBufferSize() const					{ return m_dwFileBufferSize; }
	void	SetFileBufferSize(int iVal)					{ m_dwFileBufferSize = iVal; }
	int		GetMainProcessPriority()					{ return m_nMainProcessPriority; }
	void	SetMainProcessPriority(int Value);

	bool	IsSCHEnabled()								{ return m_bSCHEnabled; }
	void	SetSCHEnabled(bool bEnable)					{ m_bSCHEnabled = bEnable; }
	bool	IsSCHExceptMon()							{ return m_bSCHExceptMon; }
	void	SetSCHExceptMon(bool bEnable)				{ m_bSCHExceptMon = bEnable; }
	bool	IsSCHExceptTue()							{ return m_bSCHExceptTue; }
	void	SetSCHExceptTue(bool bEnable)				{ m_bSCHExceptTue = bEnable; }
	bool	IsSCHExceptWed()							{ return m_bSCHExceptWed; }
	void	SetSCHExceptWed(bool bEnable)				{ m_bSCHExceptWed = bEnable; }
	bool	IsSCHExceptThu()							{ return m_bSCHExceptThu; }
	void	SetSCHExceptThu(bool bEnable)				{ m_bSCHExceptThu = bEnable; }
	bool	IsSCHExceptFri()							{ return m_bSCHExceptFri; }
	void	SetSCHExceptFri(bool bEnable)				{ m_bSCHExceptFri = bEnable; }
	bool	IsSCHExceptSat()							{ return m_bSCHExceptSat; }
	void	SetSCHExceptSat(bool bEnable)				{ m_bSCHExceptSat = bEnable; }
	bool	IsSCHExceptSun()							{ return m_bSCHExceptSun; }
	void	SetSCHExceptSun(bool bEnable)				{ m_bSCHExceptSun = bEnable; }
	uint32	GetSCHShift1()								{ return m_nSCHShift1; }
	void	SetSCHShift1(uint32 Time)					{ m_nSCHShift1 = Time; }
	uint32	GetSCHShift2()								{ return m_nSCHShift2; }
	void	SetSCHShift2(uint32 Time)					{ m_nSCHShift2 = Time; }
	uint16	GetSCHShift1Upload() const					{ return m_uSCHShift1Upload; }
	void	SetSCHShift1Upload(uint16 Value)			{ m_uSCHShift1Upload = Value; }
	uint16	GetSCHShift1Download() const				{ return m_uSCHShift1Download; }
	void	SetSCHShift1Download(uint32 dwVal)			{ m_uSCHShift1Download = (uint16)dwVal; }
	uint16	GetSCHShift1conn()							{ return m_nSCHShift1conn; }
	void	SetSCHShift1conn(uint16 Value)				{ m_nSCHShift1conn = Value; }
	uint16	GetSCHShift15sec()							{ return m_nSCHShift15sec; }
	void	SetSCHShift15sec(uint16 Value)				{ m_nSCHShift15sec = Value; }
	uint16	GetSCHShift2Upload() const					{ return m_uSCHShift2Upload; }
	void	SetSCHShift2Upload(uint16 Value)			{ m_uSCHShift2Upload = Value; }
	uint16	GetSCHShift2Download() const				{ return m_uSCHShift2Download; }
	void	SetSCHShift2Download(uint32 dwVal)			{ m_uSCHShift2Download = (uint16)dwVal; }
	uint16	GetSCHShift2conn()							{ return m_nSCHShift2conn; }
	void	SetSCHShift2conn(uint16 Value)				{ m_nSCHShift2conn = Value; }
	uint16	GetSCHShift25sec()							{ return m_nSCHShift25sec; }
	void	SetSCHShift25sec(uint16 Value)				{ m_nSCHShift25sec = Value; }

	void	SetMaxUpload(uint32 dwMaxUpload) 			{ m_dwMaxUpload = dwMaxUpload; }
	uint32	SetMaxUploadWithCheck(uint32 dwMaxUpload);
	void	SetMaxDownload(uint32 dwMaxDownload)		{ m_dwMaxDownload = dwMaxDownload; }
	uint32	SetMaxDownloadWithCheck(uint32 dwMaxDownload);
	uint16	GetMaxDownloadValue() const					{ return static_cast<uint16>(m_dwMaxDownload); }

	bool	GetLancastEnabled()							{ return m_bLancastEnabled; }
	void	SetLancastEnabled(bool bEnable)				{ m_bLancastEnabled = bEnable; }
	bool	GetLancastUseDefaultIP()					{ return m_bUseDefaultIP; }
	uint32	GetLancastIP();
	uint32	GetLancastSubnet()							{ return m_dwLancastSubnet; }
	uint16	GetLancastPort() const						{ return m_uLancastPort; }

	WINDOWPLACEMENT GetEmuleWindowPlacement() const		{ return m_WindowPlacement; }
	void SetWindowLayout(WINDOWPLACEMENT in) 			{ m_WindowPlacement = in; }
	static int GetRecommendedMaxConnections();

	bool IsWSIntruderDetectionEnabled()					{ return m_bWebIntruderDetection; }
	void SetWSIntruderDetectionEnabled(bool bEn)		{ m_bWebIntruderDetection = bEn; }
	uint32 GetWSTempDisableLogin()						{ return m_dwWebTempDisableLogin; }
	void SetWSTempDisableLogin(uint32 dwVal)			{ m_dwWebTempDisableLogin = dwVal; }
	uint32	GetWSLoginAttemptsAllowed() const			{ return m_dwWSLoginAttemptsAllowed; }
	void SetWSLoginAttemptsAllowed(int iVal)				{ m_dwWSLoginAttemptsAllowed = iVal; }

	void	LoadServerlistAddresses();

	bool	IsCounterMeasures() const					{ return m_bCounterMeasures; }
	void	SetCounterMeasures(bool bEnable)			{ m_bCounterMeasures = bEnable; }
	bool	IsCMNotLog() const							{ return m_bCMNotLog; }
	void	SetCMNotLog(bool bEnable)					{ m_bCMNotLog = bEnable; }

	const ProxySettings& GetProxySettings() const		{ return m_proxy; }
	void SetProxySettings(const ProxySettings &proxysettings)	{ m_proxy = proxysettings; }

	CStringList m_addressesList;

	void	SetLanguage();
	int		GetIPFilterLevel()							{ return static_cast<int>(m_byteIPFilterLevel); }
	void	SetIPFilterLevel(int iIPFilterLevel)		{ m_byteIPFilterLevel = static_cast<byte>(iIPFilterLevel); }
	CString GetMessageFilter()							{ return m_strMessageFilter; }
	void	SetMessageFilter(const CString& in)			{ m_strMessageFilter = in; }
	bool	ShowRatesOnTitle() const					{ return m_bShowRatesInTitle; }
	void	SetRatesOnTitle(bool bShow)					{ m_bShowRatesInTitle = bShow; }

//	Messaging preferences
	CString   GetAwayStateMessage()						{ return m_sAwayStateMessage.Get(); }
	void	SetAwayStateMessage(const CString& in)		{ m_sAwayStateMessage.Put(in); }
	unsigned	GetAcceptMessagesFrom() const			{ return m_uiAcceptMessagesFrom; }
	void		SetAcceptMessagesFrom(unsigned uiVal)	{ m_uiAcceptMessagesFrom = uiVal; }
	bool	GetAwayState() const						{ return m_bAwayState; }
	void	SetAwayState(bool bVal)						{ m_bAwayState = bVal; }

//	MobileMule
	const byte*	GetMMPass() const						{ return m_abyteMMPassword; }
	void	SetMMPass(const CString &strNewPass);
	bool	IsMMServerEnabled()							{ return m_bMMEnabled; }
	void	SetMMIsEnabled(bool bEnable)				{ m_bMMEnabled = bEnable; }
	uint16	GetMMPort() const							{ return m_uMMPort; }
	void	SetMMPort(uint16 uPort)						{ m_uMMPort = uPort; }

	void	SetUseProxy(bool in)						{ m_proxy.m_bUseProxy = in;}

	CString	GetFilenameCleanups()						{ return m_sFilenameCleanups.Get(); }
	void	SetFilenameCleanups(const CString& in)		{ m_sFilenameCleanups.Put(in); }
	bool	GetAutoFilenameCleanup()					{ return m_bAutoFilenameCleanup; }
	void	SetAutoFilenameCleanup(bool in)				{ m_bAutoFilenameCleanup = in; }
	bool	GetFilenameCleanupTags()					{ return m_bFilenameCleanupTags; }
	void	SetFilenameCleanupTags(bool in)				{ m_bFilenameCleanupTags = in; }

	CString GetCommentFilter()							{ return m_sCommentFilter.Get(); }
	void	SetCommentFilter(const CString& in)			{ m_sCommentFilter.Put(in); }

	CString	GetTemplate() const							{ return m_strTemplateFile; }
	void	SetTemplate(CString &strVal)				{ m_strTemplateFile = strVal; }

	bool	GetShowAverageDataRate()					{ return m_bShowAverageDataRate; }
	void	SetShowAverageDataRate(bool show) 			{ m_bShowAverageDataRate = show; }

	bool	LimitlessDownload()							{ return m_bLimitlessDownload; }
	void	SetLimitlessDownload(bool bEnable)			{ m_bLimitlessDownload = bEnable; }

	bool	ShowFileTypeIcon()							{ return m_bShowFileTypeIcon; }
	void	SetShowFileTypeIcon(bool bEnable)			{ m_bShowFileTypeIcon = bEnable; }

	CString GetSMTPServer()								{ return m_sSMTPServer.Get(); }
	void	SetSMTPServer(const CString& in)			{ m_sSMTPServer.Put(in); }
	CString GetSMTPName()								{ return m_sSMTPName.Get(); }
	void	SetSMTPName(const CString& in)				{ m_sSMTPName.Put(in); }
	CString GetSMTPFrom()								{ return m_sSMTPFrom.Get(); }
	void	SetSMTPFrom(const CString& in)				{ m_sSMTPFrom.Put(in); }
	CString GetSMTPTo()									{ return m_sSMTPTo.Get(); }
	void	SetSMTPTo(const CString& in)				{ m_sSMTPTo.Put(in); }
	CString GetSMTPUserName()							{ return m_sSMTPUserName.Get(); }
	void	SetSMTPUserName(const CString& in)			{ m_sSMTPUserName.Put(in); }
	CString	GetSMTPPassword()							{ return m_sSMTPPassword.Get(); }
	void	SetSMTPPassword(const CString& in)			{ m_sSMTPPassword.Put(in); }
	bool	IsSMTPAuthenticated()						{ return m_bSMTPAuthenticated; }
	void	SetSMTPAuthenticated(bool bEnable)			{ m_bSMTPAuthenticated = bEnable; }
	bool	IsSMTPInfoEnabled()							{ return m_bSMTPInfo; }
	void	SetSMTPInfoEnabled(bool bEnable)			{ m_bSMTPInfo = bEnable; }
	bool	IsSMTPWarningEnabled()						{ return m_bSMTPWarning; }
	void	SetSMTPWarningEnabled(bool bEnable)			{ m_bSMTPWarning = bEnable; }
	bool	IsSMTPMsgInSubjEnabled()					{ return m_bSMTPMsgInSubj; }
	void	SetSMTPMsgInSubjEnabled(bool bEnable)		{ m_bSMTPMsgInSubj = bEnable; }

	bool	IsTransferredOnCompleted()					{ return m_bTransferredOnCompleted; }
	void	SetTransferredOnCompleted(bool bEnable)		{ m_bTransferredOnCompleted = bEnable; }

	bool	GetUseDwlPercentage()						{ return m_bUseDwlPercentage; }
	void	SetUseDwlPercentage(bool bEnable)			{ m_bUseDwlPercentage = bEnable; }

//	Backup feature
	bool	IsAutoBackup()								{ return m_bAutoBackup; }
	void	SetAutoBackup(bool in)						{ m_bAutoBackup =in; }
	bool	GetBackupDatFiles()							{ return m_bDatFiles; }
	void	SetBackupDatFiles(bool in)					{ m_bDatFiles =in; }
	bool	GetBackupMetFiles()							{ return m_bMetFiles; }
	void	SetBackupMetFiles(bool in)					{ m_bMetFiles =in; }
	bool	GetBackupIniFiles()							{ return m_bIniFiles; }
	void	SetBackupIniFiles(bool in)					{ m_bIniFiles =in; }
	bool	GetBackupPartFiles()						{ return m_bPartFiles; }
	void	SetBackupPartFiles(bool in)					{ m_bPartFiles =in; }
	bool	GetBackupPartMetFiles()						{ return m_bPartMetFiles; }
	void	SetBackupPartMetFiles(bool in)				{ m_bPartMetFiles =in; }
	bool	GetBackupPartTxtsrcFiles()					{ return m_bPartTxtsrcFiles; }
	void	SetBackupPartTxtsrcFiles(bool in)			{ m_bPartTxtsrcFiles =in; }
	bool	GetBackupOverwrite()						{ return m_bBackupOverwrite; }
	void	SetBackupOverwrite(bool in) 				{ m_bBackupOverwrite =in; }
	CString	GetBackupDir() const						{ return m_sBackupDir.Get(); }
	void	SetBackupDir(const CString& in)				{ m_sBackupDir.Put(in); }
	void	SetScheduledBackup(bool in)					{ m_bScheduledBackup = in; }
	bool	IsScheduledBackup()							{ return m_bScheduledBackup; }
	void	SetScheduledBackupInterval(uint16 in)		{ m_nScheduledBackupInterval = in; }
	uint16	GetScheduledBackupInterval()				{ return m_nScheduledBackupInterval; }
	CString	GetURLsForICC()								{ return m_sURLsForICC.Get(); }
	bool	ShowFullFileStatusIcons()					{ return m_bShowFullFileStatusIcons; }
	void	SetShowFullFileStatusIcons(bool in)			{ m_bShowFullFileStatusIcons = in; }
	void 	SetURLsForICC(const CString& in)			{ m_sURLsForICC.Put(in); }
	bool	ShowPausedGray()							{ return m_bShowPausedGray; }
	void	SetShowPausedGray(bool in)					{ m_bShowPausedGray = in; }
	bool	ShowRoundSizes()							{ return m_bRoundSizes; }
	void	SetShowRoundSizes(bool in)					{ m_bRoundSizes = in; }
	uint16	GetMaxChatHistoryLines()					{ return 20;}
	bool	IsScanFilterEnabled()						{ return m_bScanFilter; }
	void	SetScanFilterEnabled(bool in)				{ m_bScanFilter = in; }
	bool	IsFakeRxDataFilterEnabled()					{ return m_bFakeRxDataFilter; }
	void	SetFakeRxDataFilterEnabled(bool bVal)		{ m_bFakeRxDataFilter = bVal; }

	bool	BackupPreview() const						{ return m_bBackupPreview; }
	void	SetBackupPreview(bool bVal)					{ m_bBackupPreview = bVal; }
	bool	GetPreviewSmallBlocks() const				{ return m_bPreviewSmallBlocks; }
	void	SetPreviewSmallBlocks(bool bVal)			{ m_bPreviewSmallBlocks = bVal; }

	short	GetShortcutCode(uint32 dwIdx) const			{ return (dwIdx < SCUT_COUNT) ? m_anShortcutCode[dwIdx] : /*** should never happen ***/ static_cast<short>(VK_RETURN); }
	void	SetShortcutCode(short nCode, uint32 dwIdx)	{ if (dwIdx < SCUT_COUNT) m_anShortcutCode[dwIdx] = nCode; }

	DWORD	GetServerKeepAliveTimeout()					{ return m_dwServerKeepAliveTimeout; }
	void	SetServerKeepAliveTimeout(DWORD value)		{ m_dwServerKeepAliveTimeout = value; }

	uint16	GetSmartFilterMaxQueueRank()				{ return m_nSmartFilterMaxQR; }
	void	SetSmartFilterMaxQueueRank(uint16 in)		{ m_nSmartFilterMaxQR = in; }
	bool	GetSmartFilterShowOnQueue()					{ return m_bSmartFilterShowOQ; }
	void	SetSmartFilterShowOnQueue(bool in)			{ m_bSmartFilterShowOQ = in; }

	bool	IsWatchClipboard4ED2KLinks() const			{ return m_bWatchClipboard;}
	void	SetWatchClipboard4ED2KLinks(bool in)		{ m_bWatchClipboard = in; }
	bool	GetExportLocalizedLinks() const				{ return m_bExportLocalizedLinks; }
	void	SetExportLocalizedLinks(bool bVal)			{ m_bExportLocalizedLinks = bVal; }
	byte	GetDetailedPartsFilter() const				{ return m_byteDetailedPartsFilter; }
	void	SetDetailedPartsFilter(byte byteVal)		{ m_byteDetailedPartsFilter = byteVal; }

	void	LoadSharedDirs();
	void	LoadTempDirs();

	bool	SharedDirListCheckAndAdd(const CString &strNewDir, bool bAdd, bool bVerifyExistence = false);
	void	SharedDirListRefill(CStringList *pNewList);
	void	SharedDirListCopy(CStringList *pOutputList);
	bool	SharedDirListCmp(CStringList *pNewList);
	int		TempDirListCheckAndAdd(const CString &strNewDir, bool bAdd);
	void	TempDirListRefill(CStringList *pNewList);
	void	TempDirListCopy(CStringList *pOutputList);
	bool	TempDirListCmp(CStringList *pNewList);

	CString	GetFilterWords() const						{ return m_strFilterWords; }	// filter words
	CString	GetDownloadLogName() const					{ return m_strDownloadLogFilePath; }

//	Window splitter settings
	uint32	GetSplitterbarPositionFriend() const		{ return static_cast<uint32>(m_uSplitterPosFriend); }
	void	SetSplitterbarPositionFriend(uint32 dwPos)	{ m_uSplitterPosFriend = static_cast<uint16>(dwPos); }

	BOOL	IsNTBased(void);

	void	WritePreparedNameTag(CFile &file) const	{ file.Write(m_pNameTag, m_dwNameTagSz); }

	bool	IsServerAuxPortUsed() const				{ return m_bUseServerAuxPort; }
	void	SetServerAuxPortUsed(bool bUseAuxPort)	{ m_bUseServerAuxPort = bUseAuxPort; }

	CString	GetIPFilterURL() const					{ return m_strIPFilterURL; }
	void	SetIPFilterURL(const CString& strURL)	{ m_strIPFilterURL = strURL; }
	bool	IsIPFilterUpdateOnStart() const			{ return m_bIPFilterUpdateOnStart; }
	void	SetIPFilterUpdateOnStart(bool bIsUpdate){ m_bIPFilterUpdateOnStart = bIsUpdate; }
	uint32	GetIPFilterUpdateFrequency() const		{ return m_dwIPFilterUpdateFrequency; }
	void	SetIPFilterUpdateFrequency(int iDays)	{ m_dwIPFilterUpdateFrequency = iDays; }
	uint32	GetLastIPFilterUpdate()					{ return m_dwLastIPFilterUpdate; }
	void	SetLastIPFilterUpdate(uint32 dwDate)	{ m_dwLastIPFilterUpdate = dwDate; }

	bool	IsAVEnabled() const						{ return m_bAVEnabled; }
	void	SetAVEnabled(bool in)					{ m_bAVEnabled = in; }
	bool	IsAVScanCompleted() const				{ return m_bAVScanCompleted; }
	void	SetAVScanCompleted(bool in)				{ m_bAVScanCompleted = in; }
	CString	GetAVPath() const						{ return m_strAVPath; }
	void	SetAVPath(const CString &str)			{ m_strAVPath = str; }
	CString	GetAVParams() const						{ return m_strAVParams; }
	void	SetAVParams(const CString &str)			{ m_strAVParams = str; }

//	Encryption
	bool	IsClientCryptLayerSupported() const		{ return m_bCryptLayerSupported; }
	bool	IsClientCryptLayerRequested() const		{ return IsClientCryptLayerSupported() && m_bCryptLayerRequested; }
	bool	IsClientCryptLayerRequired() const		{ return IsClientCryptLayerRequested() && m_bCryptLayerRequired; }
	bool	IsServerCryptLayerUDPEnabled() const	{ return IsClientCryptLayerSupported(); }
	bool	IsServerCryptLayerTCPRequested() const	{ return IsClientCryptLayerRequested(); }
	bool	SetClientCryptLayerSupported(bool bVal)	{ return m_bCryptLayerSupported = bVal; }
	bool	GetClientCryptLayerRequested() const	{ return m_bCryptLayerRequested; }
	bool	SetClientCryptLayerRequested(bool bVal)	{ return m_bCryptLayerRequested = bVal; }
	bool	GetClientCryptLayerRequired() const		{ return m_bCryptLayerRequired; }
	bool	SetClientCryptLayerRequired(bool bVal)	{ return m_bCryptLayerRequired = bVal; }
	uint32	GetCryptTCPPaddingLengthMod() const		{ return m_dwCryptTCPPaddingLenMod; }

	double*	GetRollupPosPtr()						{ return &m_adRollupPos[0][0]; }
	bool*	GetRollupStatePtr()						{ return m_abRollupState; }

	void	InitThreadLocale();

private:
	void	CreateUserHash();
	void	SetStandardValues();

	void	LoadIniPreferences();
	void	LoadDatPreferences();

	void	SetUserNickTag();
	bool	LoadFilterFile();

private:
	CString					m_strAppDir;
	CString					m_strConfigDir;
	CString 				m_strDownloadLogFilePath;

	uchar					m_userHash[16];
	WORD					m_wWinVer;

	CSecuredVar<CString>	m_sNick;
	WORD					m_nLanguageID;

	uint32					m_dwMaxUpload;
	uint32					m_dwMaxDownload;
	uint32					m_dwMaxSourcePerFile;
	uint16					m_nMaxConnections;

	CSecuredVar<uint64>		m_nTotalDownloadedBytes;
	CSecuredVar<uint64>		m_nTotalUploadedBytes;

	uint32					m_dwMaxGraphDownloadRate;
	uint32					m_dwMaxGraphUploadRate;
	byte					m_byteGraphRatio;

	bool					m_bReconnect;
	bool					m_bRemoveDeadServers;
	bool					m_bUseServerPriorities;
	bool					m_bAutoServerList;
	bool					m_bAutoConnect;
	bool					m_bAutoConnectStaticOnly;
	bool					m_bAddServersFromServer;
	bool					m_bAddServersFromClients;
	bool					m_bFilterBadIP;
	bool					m_bFilterServersByIP;
	enSeeShare				m_nSeeShares;
	byte					m_byteFilePermission;	// Default shared file permission

	bool					m_bUpdateNotify;
	bool					m_bMinToTray;
	bool					m_bConfirmExit;
	bool					m_bConfirmDisconnect;
	bool					m_bConfirmFriendDel;
	bool					m_bBeepOnError;
	bool					m_bSplashScreen;
	bool					m_bOnlineSig;
	bool					m_bShowOverhead;
	bool					m_bBackupPreview;

	byte					m_byteDepth3D;
	uint16					m_nTrafficOMeterInterval;
	uint16					m_nStatsInterval;
	int						m_iDetailColumnWidth;

	CSecuredVar<CString>	m_sIncomingDir;
	CSecuredVar<CString>	m_sTempDir;
	CString					m_strVideoPlayer;
	CString					m_strVideoPlayerArgs;

	CString					m_strBindAddr;
	CStringA				m_strBindAddrA;
	const TCHAR				*m_pcBindAddr;
	const char				*m_pcBindAddrA;
	uint16					m_uPort;
	uint16					m_uUDPPort;
	bool					m_bOpenPorts;

	bool					m_bA4AFStringEnabled;
	bool					m_bA4AFCountEnabled;
	uint32					m_dwSearchMethod;
	bool					m_bAutoTakeLinks;
	uint32					m_dwFileBufferSize;
	int						m_nMainProcessPriority;

	// Scheduler
	bool					m_bSCHEnabled;
	uint32					m_nSCHShift1;
	uint32					m_nSCHShift2;
	uint16					m_uSCHShift1Upload;
	uint16					m_uSCHShift1Download;
	uint16					m_nSCHShift1conn;
	uint16					m_nSCHShift15sec;
	uint16					m_uSCHShift2Upload;
	uint16					m_uSCHShift2Download;
	uint16					m_nSCHShift2conn;
	uint16					m_nSCHShift25sec;
	bool					m_bSCHExceptMon;
	bool					m_bSCHExceptTue;
	bool					m_bSCHExceptWed;
	bool					m_bSCHExceptThu;
	bool					m_bSCHExceptFri;
	bool					m_bSCHExceptSat;
	bool					m_bSCHExceptSun;

	unsigned				m_uiProfile;
	bool					m_bUAP;
	bool					m_bDAP;
	bool					m_bDisableXS;
	bool					m_bStartDownloadPaused;
	bool					m_bDownloadPausedOnComplete;
	bool					m_bResumeOtherCat;
	bool					m_bAutoClearCompleted;
	bool					m_bAutoSourcesEnabled;
	uint32					m_nMinAutoSourcesPerFile;
	uint32					m_nMaxAutoSourcesPerFile;
	uint32					m_nMaxAutoSourcesTotal;
	uint32					m_nMaxAutoExchangeSources;
	bool					m_bAutoSourcesLogEnabled;
	bool					m_bClientTransferLogEnabled;

	uint32					m_dwBadClientBanTime;
	uint32					m_dwMinRequestTime;
	byte					m_byteBadClientBan;
	bool					m_bBanMessageEnabled;
	bool					m_bBanEnabled;

	CSecuredVar<CString>	m_sToolbarSettings;

	bool					m_bUseProxyListenPort;
	uint16					m_nListenPort;
	bool					m_bCounterMeasures;
	bool					m_bCMNotLog;

	uint32					m_dwSLSMaxSrcPerFile;
	uint32					m_dwSLSOutdated;
	bool					m_bSLSEnable;

	uint32					m_dwQueueSize;
	uint32					m_dwDeadServerRetries;
	bool					m_bSmartIdCheck;
	byte					m_nSmartIdState;
	bool					m_bVerbose;
	uint16					m_nMaxConPerFive;

	bool					m_bMultiple;
	uint32					m_dwTooltipDelay;
	bool					m_bBringToForeground;
	uint16					m_nStatsMax;
	byte					m_nStatsAverageMinutes;
	bool					m_bShowToolbarSpeedMeter;
	bool					m_bShowCountryFlag;
	bool					m_bCloseToTray;
	bool					m_bDetailsOnClick;
	bool					m_bStartMinimized;
	bool					m_bCommunityEnabled;
	CSecuredVar<CString>	m_sCommunityString;
	bool					m_bCommunityNoBan;
	uint16					m_nPriorityHigh;
	uint16					m_nPriorityLow;
	bool					m_bRestartWaiting;
	bool					m_bLogToFile;
	bool					m_bLogUploadToFile;
	bool					m_bLogDownloadToFile;
	bool					m_bDisableXSUpTo;
	uint16					m_nXSUpTo;
	uint32					m_nSrvConTimeout;
	uint32					m_dwSlowCompleteBlockSize;
	enHashPriority			m_HashingPriority;
	bool					m_bUploadParts;

	bool					m_bUseDownloadNotifier;
	bool					m_bUseDownloadAddNotifier;
	bool					m_bUseChatNotifier;
	bool					m_bUseLogNotifier;
	bool					m_bUseSoundInNotifier;
	bool					m_bUseSchedulerNotifier;
	bool					m_bNotifierImportantError;
	bool					m_bNotifierWebServerError;
	bool					m_bNotifierServerError;
	CSecuredVar<CString>	m_sNotifierSoundFilePath;
	bool					m_bNotifierPopsEveryChatMsg;
	uint32					m_nNotificationDisplayTime;
	uint32					m_nNotificationFontSize;

	CSecuredVar<CString>	m_sUsedFont;
	byte					m_nFontSize;

	// Sort
	COLORREF				m_dwStatColors[12];
	bool					m_bUseSort;
	bool					m_bUseSrcSortCol2;
	bool					m_bPausedStoppedLast;
	unsigned				m_uiServerSortCol;
	unsigned				m_uiUploadSortCol;
	unsigned				m_uiQueueSortCol;
	unsigned				m_uiSearchSortCol;
	unsigned				m_uiIRCSortCol;
	unsigned				m_uiClientListSortCol;
	unsigned				m_uiFileSortCol;
	unsigned				m_uiDownloadSortCol;
	unsigned				m_uiSrcSortCol1;
	unsigned				m_uiSrcSortCol2;

	// IRC
	CSecuredVar<CString>	m_sIRCNick;
	CSecuredVar<CString>	m_sIRCServer;
	bool					m_bIRCAddTimestamp;
	CSecuredVar<CString>	m_sIRCChanNameFilter;
	bool					m_bIRCUseChanFilter;
	uint16					m_nIRCChannelUserFilter;
	CSecuredVar<CString>	m_sIRCPerformString;
	bool					m_bIRCUsePerform;
	bool					m_bIRCListOnConnect;
	bool					m_bIRCIgnoreInfoMessage;
	bool					m_bIRCMessageEncodingUTF8;
	bool					m_bIRCStripColor;

//	WebServer
	byte					m_abyteWebPassword[16];
	byte					m_abyteLowWebPassword[16];
	WSPrefParams			m_WSPrefs;
	uint32 					m_dwWebTempDisableLogin;
	uint16					m_uWSPort;
	bool					m_bWebEnabled;
	bool					m_bWebLowEnabled;
	int						m_nWebPageRefresh;
	bool					m_bWebIntruderDetection;
	uint32					m_dwWSLoginAttemptsAllowed;

	// Part Traffic
	bool					m_bUsePartTraffic;
	byte					m_byteUpbarPartTraffic;			// 0=one info 1=2 infos 2=3infos 3=TraffiGram
	byte					m_byteUpbarColorPartTraffic;	// 0=rainbow style 1=more rainbow 2=downloadlist-like 3=girlie

	// LANCAST (moosetea) - Settings
	bool  					m_bLancastEnabled;
	bool   					m_bUseDefaultIP;
	uint32 					m_dwDefaultLancastIP;
	uint32					m_dwLancastIP;
	uint32					m_dwLancastSubnet;
	uint16					m_uLancastPort;

	CSecuredVar<CString>	m_sToolbarBitmap;
	CSecuredVar<CString>	m_sToolbarBitmapFolder;
	int						m_iToolbarLabels;

//	Messaging
	unsigned				m_uiAcceptMessagesFrom;
	bool					m_bAwayState;
	CSecuredVar<CString>	m_sAwayStateMessage;

	bool					m_bIsNTBased;

	//SyruS: cleanup
	CSecuredVar<CString>	m_sFilenameCleanups;
	CString					m_strFilenameCleanupsUpd;
	bool					m_bAutoFilenameCleanup;
	bool					m_bFilenameCleanupTags;

	CSecuredVar<CString>	m_sCommentFilter;
	CString					m_strCommentFilterUpd;

	bool					m_bShowRatingIcons;
	bool					m_bManuallyAddedServerHighPrio;
	static bool				bWinVerAlreadyDetected;
	bool					m_bShowAverageDataRate;
	bool					m_bLimitlessDownload;
	bool					m_bShowFileTypeIcon;

	CSecuredVar<CString>	m_sSMTPServer;
	CSecuredVar<CString>	m_sSMTPName;
	CSecuredVar<CString>	m_sSMTPFrom;
	CSecuredVar<CString>	m_sSMTPTo;
	CSecuredVar<CString>	m_sSMTPUserName;
	CSecuredVar<CString>	m_sSMTPPassword;
	bool					m_bSMTPAuthenticated;
	bool					m_bSMTPInfo;
	bool					m_bSMTPWarning;
	bool					m_bSMTPMsgInSubj;
	bool					m_bTransferredOnCompleted;
	bool					m_bUseDwlPercentage;

//	Backup feature
	bool					m_bDatFiles;
	bool					m_bMetFiles;
	bool					m_bIniFiles;
	bool					m_bPartFiles;
	bool					m_bPartMetFiles;
	bool					m_bPartTxtsrcFiles;
	bool					m_bAutoBackup;
	bool					m_bBackupOverwrite;
	CSecuredVar<CString>	m_sBackupDir;
	bool					m_bScheduledBackup;
	uint16					m_nScheduledBackupInterval;
	bool					m_bShowFullFileStatusIcons;
	bool					m_bShowPausedGray;
	bool					m_bRoundSizes;

	//FakeCheck
	uint32					m_nFakesDatVersion;
	bool					m_bUpdateFakeStartup;
	CString					m_sFakeListURL;
	uint32					m_dwDLingFakeListVersion;
	CString					m_strDLingFakeListLink;
	COLORREF				m_clrFakeListDownloadColor;

	//AutoCheck for new version
	bool					m_bAutoCheckForNewVersion;
	int						m_iAutoCheckLastTime;

	uint16					m_nSmartFilterMaxQR;
	bool					m_bSmartFilterShowOQ;

	//stats
	// -khaos--+++> Struct Members for Storing Statistics

	// Saved stats for cumulative downline overhead...
	uint64	cumDownOverheadTotal;
	uint64	cumDownOverheadFileReq;
	uint64	cumDownOverheadSrcEx;
	uint64	cumDownOverheadServer;
	uint64	cumDownOverheadOther;
	uint64	cumDownOverheadTotalPackets;
	uint64	cumDownOverheadFileReqPackets;
	uint64	cumDownOverheadSrcExPackets;
	uint64	cumDownOverheadServerPackets;
	uint64	cumDownOverheadOtherPackets;

	// Saved stats for cumulative upline overhead...
	uint64	cumUpOverheadTotal;
	uint64	cumUpOverheadFileReq;
	uint64	cumUpOverheadSrcEx;
	uint64	cumUpOverheadServer;
	uint64	cumUpOverheadOther;
	uint64	cumUpOverheadTotalPackets;
	uint64	cumUpOverheadFileReqPackets;
	uint64	cumUpOverheadSrcExPackets;
	uint64	cumUpOverheadServerPackets;
	uint64	cumUpOverheadOtherPackets;

	// Saved stats for cumulative upline data...
	uint32	cumUpSuccessfulSessions;
	uint32	cumUpFailedSessions;

	// Client breakdown stats for sent bytes...
	uint64	cumUpDataClients[SO_LAST];
	uint64	sesUpDataClients[SO_LAST];

	// Session data stats by priority
	uint64	sesUpDataPriority[5];

	// Cumulative source breakdown stats for sent bytes...
	uint64	cumUpData_File;
	uint64	cumUpData_PartFile;

	// Session source breakdown stats for sent bytes...
	uint64	sesUpData_File;
	uint64	sesUpData_PartFile;

	// Cumulative community breakdown stats for sent bytes...
	uint64	cumUpData_Community;
	uint64	cumUpData_NoCommunity;

	// Session community breakdown stats for sent bytes...
	uint64	sesUpData_Community;
	uint64	sesUpData_NoCommunity;

	// Saved stats for cumulative downline data...
	uint32	cumDownCompletedFiles;
	uint32	dwCumDownSuccessfulSessions;
	uint32	dwCumDownFailedSessions;

	// Cumulative statistics for saved due to compression/lost due to corruption
	uint64	m_qwCumLostFromCorruption;
	uint64	m_qwCumSavedFromCompression;
	uint32	m_dwCumPartsSavedByICH;
	uint32	m_dwSesPartsSavedByICH;

	// Session statistics for download sessions
	uint64	m_qwSesLostFromCorruption;
	uint64	m_qwSesSavedFromCompression;
	uint16	sesDownSuccessfulSessions;
	uint16	sesDownFailedSessions;
	uint16	sesDownFailedSessionsNoRequiredData;
	uint32	sesDownAvgTime;
	uint16	sesDownCompletedFiles;

	// Client breakdown stats for received bytes...
	uint64	cumDownDataClients[SO_LAST];
	uint64	sesDownDataClients[SO_LAST];

	// Saved stats for cumulative connection data...
	double	cumConnMaxAvgDownRate;
	double	cumConnMaxDownRate;
	double	cumConnMaxAvgUpRate;
	double	cumConnMaxUpRate;
	uint32	dwCumConnRunTime;
	uint16	cumConnNumReconnects;
	uint16	cumConnAvgConnections;
	uint16	cumConnMaxConnLimitReached;
	uint16	cumConnPeakConnections;
	uint32	cumConnTransferTime;
	uint32	cumConnDownloadTime;
	uint32	cumConnUploadTime;
	uint32	cumConnServerDuration;

	// Saved records for servers / network...
	uint16	cumSrvrsMostWorkingServers;
	uint32	cumSrvrsMostUsersOnline;
	uint32	cumSrvrsMostFilesAvail;

	// Saved records for shared files...
	uint16	cumSharedMostFilesShared;
	uint64	m_qwCumSharedLargestShareSize;
	uint64	m_qwCumSharedLargestAvgFileSize;
	uint64	m_qwCumSharedLargestFileSize;

	// Save the date when the statistics were last reset...
	time_t	stat_datetimeLastReset;

	// Save the expanded branches of the stats tree (don't convert in Unicode!!!)
	CString m_strStatsExpandedTreeItems;

	// <-----khaos- End Statistics Members
	bool	m_bScanFilter;
	bool	m_bFakeRxDataFilter;

	bool	m_bPreviewSmallBlocks;
	DWORD	m_dwServerKeepAliveTimeout;

	CSecuredVar<CString>	m_sURLsForICC;

	short m_anShortcutCode[SCUT_COUNT];

	bool	m_bUseServerAuxPort;

//	Protect list operations
	CCriticalSection	m_csDirList;

//	Protected lists
	CStringList				m_sharedDirList;	// all entries has trailing '\'
	CStringList				m_tempDirList;		// all entries has trailing '\'

	byte	m_byteIPFilterLevel;
	CString m_strIPFilterURL;
	bool	m_bIPFilterUpdateOnStart;
	uint32	m_dwLastIPFilterUpdate;
	uint32	m_dwIPFilterUpdateFrequency;

	bool	m_bAVEnabled;
	bool	m_bAVScanCompleted;
	CString	m_strAVPath;
	CString	m_strAVParams;

//	MobileMule
	byte	m_abyteMMPassword[16];
	bool	m_bMMEnabled;
	uint16	m_uMMPort;

	uchar	m_A4AF_FileHash[16];
	CString	m_strTxtEditor;
	CString	m_strMessageFilter;
	CString	m_strTemplateFile;

	WINDOWPLACEMENT m_WindowPlacement;
	ProxySettings m_proxy;

	uint16	m_auDownloadColumnWidths[DLCOL_NUMCOLUMNS];
	uint16	m_auUploadColumnWidths[ULCOL_NUMCOLUMNS];
	uint16	m_auQueueColumnWidths[QLCOL_NUMCOLUMNS];
	uint16	m_auSearchColumnWidths[SEARCHCOL_NUMCOLUMNS];
	uint16	m_auSharedColumnWidths[SFLCOL_NUMCOLUMNS];
	uint16	m_auServerColumnWidths[SRVCOL_NUMCOLUMNS];
	uint16	m_auIrcNickColumnWidths[IRC1COL_NUMCOLUMNS];
	uint16	m_auIrcColumnWidths[IRC2COL_NUMCOLUMNS];
	uint16	m_auClientListColumnWidths[CLCOL_NUMCOLUMNS];
	uint16	m_auPartStatusColumnWidths[FDPARTSCOL_NUMCOLUMNS];
	uint16	m_auFriendColumnWidths[FRIENDCOL_NUMCOLUMNS];
	uint16	m_auSrcFileNameColumnWidths[FDSRCCOL_NUMCOLUMNS];

	int		m_aiDownloadColumnOrder[DLCOL_NUMCOLUMNS];
	int		m_aiUploadColumnOrder[ULCOL_NUMCOLUMNS];
	int		m_aiQueueColumnOrder[QLCOL_NUMCOLUMNS];
	int		m_aiSearchColumnOrder[SEARCHCOL_NUMCOLUMNS];
	int		m_aiSharedColumnOrder[SFLCOL_NUMCOLUMNS];
	int		m_aiServerColumnOrder[SRVCOL_NUMCOLUMNS];
	int		m_aiIrcNickColumnOrder[IRC1COL_NUMCOLUMNS];
	int		m_aiIrcColumnOrder[IRC2COL_NUMCOLUMNS];
	int		m_aiClientListColumnOrder[CLCOL_NUMCOLUMNS];
	int		m_aiPartStatusColumnOrder[FDPARTSCOL_NUMCOLUMNS];
	int		m_aiFriendColumnOrder[FRIENDCOL_NUMCOLUMNS];
	int		m_aiSrcFileNameColumnOrder[FDSRCCOL_NUMCOLUMNS];

	unsigned	m_auiSortItem[TABLE_COUNT];

	bool	m_abDownloadColumnHidden[DLCOL_NUMCOLUMNS];
	bool	m_abUploadColumnHidden[ULCOL_NUMCOLUMNS];
	bool	m_abQueueColumnHidden[QLCOL_NUMCOLUMNS];
	bool	m_abSearchColumnHidden[SEARCHCOL_NUMCOLUMNS];
	bool	m_abSharedColumnHidden[SFLCOL_NUMCOLUMNS];
	bool	m_abServerColumnHidden[SRVCOL_NUMCOLUMNS];
	bool	m_abIrcNickColumnHidden[IRC1COL_NUMCOLUMNS];
	bool	m_abIrcColumnHidden[IRC2COL_NUMCOLUMNS];
	bool	m_abClientListColumnHidden[CLCOL_NUMCOLUMNS];
	bool	m_abPartStatusColumnHidden[FDPARTSCOL_NUMCOLUMNS];
	bool	m_abFriendColumnHidden[FRIENDCOL_NUMCOLUMNS];
	bool	m_abSrcFileNameColumnHidden[FDSRCCOL_NUMCOLUMNS];

	byte	m_abyteSortAscendingDownload[DLCOL_NUMCOLUMNS];
	byte	m_abyteSortAscendingDownload2[DLCOL_NUMCOLUMNS];
	byte	m_abyteSortAscendingUpload[ULCOL_NUMCOLUMNS];
	byte	m_abyteSortAscendingQueue[QLCOL_NUMCOLUMNS];
	byte	m_abyteSortAscendingSearch[SEARCHCOL_NUMCOLUMNS];
	byte	m_abyteSortAscendingShared[SFLCOL_NUMCOLUMNS];
	byte	m_abyteSortAscendingServer[SRVCOL_NUMCOLUMNS];
	byte	m_abyteSortAscendingIRCNick[IRC1COL_NUMCOLUMNS];
	byte	m_abyteSortAscendingIRCChannel[IRC2COL_NUMCOLUMNS];
	byte	m_abyteSortAscendingClients[CLCOL_NUMCOLUMNS];
	byte	m_abyteSortAscendingPartStatus[FDPARTSCOL_NUMCOLUMNS];
	byte	m_abyteSortAscendingFriend[FRIENDCOL_NUMCOLUMNS];
	byte	m_abyteSortAscendingSrcFileName[FDSRCCOL_NUMCOLUMNS];

	bool	m_bBugReport;
	bool	m_bAllowLocalHostIP;	// Allow local sources 127.*.*.*
	bool	m_bShowRatesInTitle;
	byte	m_byteDetailedPartsFilter;
	bool	m_bKeepSearchHistory;	// Name Field History
	bool	m_bWatchClipboard;
	bool	m_bExportLocalizedLinks;	// Allow non-latin characters in the exported ed2k links

	void	*m_pNameTag;
	uint32	m_dwNameTagSz;

	CString	m_strFilterWords;	// search filter exclude word list

//	Window splitter settings
	uint16	m_uSplitterPosFriend;

//	Encryption
	bool	m_bCryptLayerRequested;
	bool	m_bCryptLayerSupported;
	bool	m_bCryptLayerRequired;
	uint32	m_dwCryptTCPPaddingLenMod;

	double	m_adRollupPos[3][8];
	bool	m_abRollupState[3];
};
@


1.270
log
@Removed emugle website search, as site changed orientation.
@
text
@d831 1
a831 1
	bool	IsFilterBadIPs()							{ return m_bFilterBadIP; }
d833 1
a833 1
	bool	IsFilterServersByIP()						{ return m_bFilterServersByIP; }
@


1.269
log
@Add network interface to bind (from original) {Zom}.
@
text
@a204 1
	EP_SEARCHMETHOD_WEB2,
@


1.268
log
@Encryption preparations.
@
text
@d522 3
a524 1
	uint16	GetUDPPort()								{ return m_uUDPPort; }
d526 2
a527 2
	bool	GetOpenPorts()						{ return m_bOpenPorts; }
	void	SetOpenPorts(bool bEnable)			{ m_bOpenPorts = bEnable; }
d1420 4
@


1.267
log
@Unified list column definitions; Save state of the source file name list; Save sorting directions for all GUI lists.
@
text
@d1344 1
d1887 1
@


1.266
log
@Removed some old not used statistics values to preserve cumulative Average Up/Download Rate (currently used cumulative data is calculated based on session results);
Don't save DownCompletedFiles statistics value to the disk after every file completion (do it together with other preferences.ini values);
Removed meaningless Average Up/Download Time cumulative statistics (our code can't preserve and calculate it properly, so better to remove it than show some wrong stuff).
@
text
@d88 11
a98 11
	SL_COLUMN_FILENAME = 0,
	SL_COLUMN_SIZE,
	SL_COLUMN_SOURCES,
	SL_COLUMN_TYPE,
	SL_COLUMN_FILEHASH,
	SL_COLUMN_FAKECHECK,
	SL_COLUMN_LASTSEENCOMPLETE,
	SL_COLUMN_FOLDER,
	SL_COLUMN_LENGTH,
	SL_COLUMN_BITRATE,
	SL_COLUMN_CODEC,
d100 1
a100 1
	SL_NUMCOLUMNS
d105 13
a117 13
	SFL_COLUMN_FILENAME = 0,
	SFL_COLUMN_FILESIZE,
	SFL_COLUMN_TYPE,
	SFL_COLUMN_PRIORITY,
	SFL_COLUMN_PERMISSION,
	SFL_COLUMN_FILEID,
	SFL_COLUMN_REQUESTS,
	SFL_COLUMN_ACCEPTED,
	SFL_COLUMN_TRANSFERRED,
	SFL_COLUMN_PARTTRAFFIC,
	SFL_COLUMN_UPLOADS,
	SFL_COLUMN_COMPLETESRC,
	SFL_COLUMN_FOLDER,
d119 1
a119 1
	SFL_NUMCOLUMNS
d124 13
a136 13
	SL_COLUMN_SERVERNAME = 0,
	SL_COLUMN_SERVERIP,
	SL_COLUMN_DESCRIPTION,
	SL_COLUMN_PING,
	SL_COLUMN_NUMUSERS,
	SL_COLUMN_NUMFILES,
	SL_COLUMN_PREFERENCES,
	SL_COLUMN_FAILEDCOUNT,
	SL_COLUMN_STATIC,
	SL_COLUMN_SOFTFILELIMIT,
	SL_COLUMN_SOFTWAREVER,
	SL_COLUMN_COUNTRY,
	SL_COLUMN_LOWIDUSERS,
d138 1
a138 1
	SL_COLUMN_NUMCOLUMNS
d191 9
d469 1
a469 1
	enum EnumTable
d471 1
a471 1
		TABLE_DOWNLOAD,
d482 3
a484 1
		TABLE_FRIENDLIST
d852 10
a861 11
	int		GetColumnWidth(EnumTable t, int index) const;
	BOOL	GetColumnHidden(EnumTable t, int index) const;
	int		GetColumnOrder(EnumTable t, int index) const;
	void	SetColumnWidth(EnumTable t, int index, int width);
	void	SetColumnHidden(EnumTable t, int index, bool bHidden);
	void	SetColumnOrder(EnumTable t, int *piOrder);

	int		GetColumnSortItem(EnumTable t) const;
	bool	GetColumnSortAscending(EnumTable t) const;
	void	SetColumnSortItem(EnumTable t, int sortItem);
	void	SetColumnSortAscending(EnumTable t, bool sortAscending);
d1814 3
a1816 3
	uint16	m_auSearchColumnWidths[SL_NUMCOLUMNS];
	uint16	m_auSharedColumnWidths[SFL_NUMCOLUMNS];
	uint16	m_auServerColumnWidths[SL_COLUMN_NUMCOLUMNS];
d1822 1
d1827 3
a1829 3
	int		m_aiSearchColumnOrder[SL_NUMCOLUMNS];
	int		m_aiSharedColumnOrder[SFL_NUMCOLUMNS];
	int		m_aiServerColumnOrder[SL_COLUMN_NUMCOLUMNS];
d1835 1
d1837 1
a1837 12
	int		m_iTableSortItemDownload;
	int		m_iTableSortItemDownload2;
	int		m_iTableSortItemUpload;
	int		m_iTableSortItemQueue;
	int		m_iTableSortItemSearch;
	int		m_iTableSortItemShared;
	int		m_iTableSortItemServer;
	int		m_iTableSortItemIRCNick;
	int		m_iTableSortItemIRCChannel;
	int		m_iTableSortItemClientList;
	int		m_iTableSortItemPartStatus;
	int		m_iTableSortItemFriend;
d1842 3
a1844 3
	bool	m_abSearchColumnHidden[SL_NUMCOLUMNS];
	bool	m_abSharedColumnHidden[SFL_NUMCOLUMNS];
	bool	m_abServerColumnHidden[SL_COLUMN_NUMCOLUMNS];
d1850 1
d1852 13
a1864 12
	bool	m_bTableSortAscendingDownload;
	bool	m_bTableSortAscendingDownload2;
	bool	m_bTableSortAscendingUpload;
	bool	m_bTableSortAscendingQueue;
	bool	m_bTableSortAscendingSearch;
	bool	m_bTableSortAscendingShared;
	bool	m_bTableSortAscendingServer;
	bool	m_bTableSortAscendingIRCNick;
	bool	m_bTableSortAscendingIRCChannel;
	bool	m_bTableSortAscendingClientList;
	bool	m_bTableSortAscendingPartStatus;
	bool	m_bTableSortAscendingFriend;
@


1.265
log
@Combine preferences.ini access to avoid multiple loadings and savings (on startup file was loads 3 times, plus twice saved on every saving);
Save the whole preferences.ini periodically (not only statistics values) {muleteer}.
@
text
@a613 1
	void	SaveCompletedDownloadsStat();
a626 1
	void	Add2ConnAvgUpRate(double in)				{ cumConnAvgUpRate = in; }
a629 1
	void	Add2UpAvgTime(int in)						{ cumUpAvgTime = in; }
a630 1
	void	Add2DownCAvgTime(int in)					{ cumDownAvgTime = in; }
a677 1
	uint32	GetUpAvgTime()								{ return cumUpAvgTime;}
a682 1
	uint32	GetDownC_AvgTime() const					{ return cumDownAvgTime; }
a757 1
	double	GetConnAvgDownRate()						{ return cumConnAvgDownRate;}
a759 1
	double	GetConnAvgUpRate()							{ return cumConnAvgUpRate;}
a1676 1
	uint32	cumUpAvgTime;
a1704 1
	uint32	cumDownAvgTime;
a1725 1
	double	cumConnAvgDownRate;
a1727 1
	double	cumConnAvgUpRate;
@


1.264
log
@Strip IRC user message colors {xalbux}.
@
text
@d455 2
d482 1
d612 1
a612 1
	void	SaveStats(int bBackUp = 0);
d615 1
a615 1
	bool	LoadStats(int loadBackUp = 0, CString sFileName = _T(""));
a1353 1
	void	SaveIniPreferences();
@


1.263
log
@Temporary structure moved from class to local variables.
@
text
@d933 3
d1555 1
@


1.262
log
@Removed unused variable.
@
text
@a1355 2
	Preferences_Ext_Struct	m_prefsExt;

@


1.261
log
@IRC: save state of the user list.
@
text
@a1761 2
	// Save new preferences for PPgStats
	byte	statsConnectionsGraphRatio; // This will store the divisor, i.e. for 1:3 it will be 3, for 1:20 it will be 20.
@


1.260
log
@Extended cumulative statistics successful and failed download sessions to keep bigger values (only 65535 before);
Suppressed compiler warnings; Additional sanity checks; Formatting.
@
text
@d141 8
d467 1
d1817 1
d1829 1
d1842 1
d1854 1
d1867 1
@


1.259
log
@added UTF8 encoding support for IRC (can be activated only over pref.ini)
@
text
@d550 2
a551 2
	byte	GetToolbarLabelSettings()					{ return m_nToolbarLabels; }
	void	SetToolbarLabelSettings(byte settings)		{ m_nToolbarLabels = settings; }
d630 1
a630 1
														  cumDownSuccessfulSessions++; }
d632 1
a632 1
														  cumDownFailedSessions++; }
d673 4
a676 4
	uint32	GetDownCompletedFiles()						{ return cumDownCompletedFiles;}
	uint16	GetDownC_SuccessfulSessions()				{ return cumDownSuccessfulSessions;}
	uint16	GetDownC_FailedSessions()					{ return cumDownFailedSessions;}
	uint32	GetDownC_AvgTime()							{ return cumDownAvgTime;}
d906 1
a906 1
	bool	GetIRCAddTimestamp()						{ return m_bIRCAddTimestamp; }
d910 1
a910 1
	bool	GetIRCUseChanFilter()						{ return m_bIRCUseChanFilter; }
d912 2
a913 2
	uint16	GetIRCChannelUserFilter()					{ return m_nIRCChannelUserFilter; }
	void	SetIRCChanUserFilter(uint16 in_user)		{ m_nIRCChannelUserFilter = in_user; }
d916 8
a923 8
	bool	GetIrcUsePerform()							{ return m_bIRCUsePerform; }
	void	SetIrcUsePerform(bool flag)					{ m_bIRCUsePerform = flag; }
	bool	GetIRCListOnConnect()						{ return m_bIRCListOnConnect; }
	void	SetIRCListonConnect(bool flag)				{ m_bIRCListOnConnect = flag; }
	bool	GetIrcIgnoreInfoMessage()					{ return m_bIRCIgnoreInfoMessage; }
	void	SetIrcIgnoreInfoMessage(bool flag)			{ m_bIRCIgnoreInfoMessage = flag; }
	bool	GetIrcMessageEncodingUTF8()					{ return m_bIRCMessageEncodingUTF8; }
	void	SetIrcMessageEncodingUTF8(bool flag)		{ m_bIRCMessageEncodingUTF8 = flag; }
d1053 2
a1054 2
	byte	GetSearchMethod() const						{ return m_byteSearchMethod; }
	void	SetSearchMethod(byte byteValue)				{ m_byteSearchMethod = byteValue; }
d1409 1
a1409 1
	byte					m_byteSearchMethod;
d1573 1
a1573 1
	byte					m_nToolbarLabels;
d1699 2
a1700 2
	uint16	cumDownSuccessfulSessions;
	uint16	cumDownFailedSessions;
@


1.258
log
@Allow export localized ed2k links (skip utf8 conversion) {DoubleT} -- GUI part will be added later.
@
text
@d922 2
d1544 1
@


1.257
log
@improved string processing
@
text
@a18 1
#include "types.h"
d1265 2
a1638 2
	bool					m_bWatchClipboard;

d1861 2
@


1.256
log
@Added more sanity checks for input; Defined some default values;
Fixed potential stack corruption on reading of extremely long category paths;
Suppressed compiler warnings; Formatting.
@
text
@d469 2
a470 2
	CString	GetAppDir() const							{ return m_strAppDir; }
	CString GetConfigDir() const						{ return m_strConfigDir; }
@


1.255
log
@Remove Dead Server enable/disable should be bool value;
Introduced max dead server retries limit (20);
Corrected IP Filter Update Frequency default value (7) which was above the possible range (0-6);
Added sanity check for IP Filter Update Frequency value; Formatting.
@
text
@d366 1
d369 2
d384 6
a389 1

d479 2
a480 2
	uint16	Profile()									{ return m_nProfile; }
	void	SetProfile(uint16 uProfile)					{ m_nProfile = uProfile; }
d559 2
a560 2
	uint16	GetWSPort()									{ return m_nWebPort; }
	void	SetWSPort(uint16 uPort)						{ m_nWebPort = uPort; }
d789 2
a790 2
	uint16	GetQueueSize()								{ return m_nQueueSize; }
	void	SetQueueSize(uint16 iSize)					{ m_nQueueSize = iSize; }
d1038 2
a1039 2
	uint16	SlowCompleteBlockSize()						{ return m_nSlowCompleteBlockSize; }
	void	SetSlowCompleteBlockSize(uint16 uSize)		{ m_nSlowCompleteBlockSize = uSize; }
d1111 1
a1111 1
	uint16	GetLancastPort()							{ return m_uLancastPort; }
d1121 2
a1122 2
	byte GetWSLoginAttemptsAllowed()					{ return m_nWebLoginAttemptsAllowed; }
	void SetWSLoginAttemptsAllowed(byte n)				{ m_nWebLoginAttemptsAllowed = n; }
d1157 1
a1157 1
	uint16	GetMMPort()									{ return m_uMMPort; }
d1431 1
a1431 1
	uint16					m_nProfile;
d1464 1
a1464 1
	uint16					m_nQueueSize;
d1493 1
a1493 1
	uint16					m_nSlowCompleteBlockSize;
d1547 1
a1547 1
	uint16					m_nWebPort;
d1552 1
a1552 1
	byte					m_nWebLoginAttemptsAllowed;
@


1.254
log
@Reduced minimal value of save/load sources from 5 to 2 (if somebody wants more there's no point to limit that); Formatting.
@
text
@d378 3
d477 2
a478 2
	byte	DeadServer()								{ return m_nDeadServer; }
	void	SetDeadServer(byte iDead)					{ m_nDeadServer = iDead; }
d827 2
a828 2
	uint16	GetDeadserverRetries()						{ return m_nDeadServerRetries; }
	void	SetDeadserverRetries(uint16 uRetries)		{ m_nDeadServerRetries = uRetries; }
d1291 2
a1292 2
	int		GetIPFilterUpdateFrequency() const		{ return m_iIPFilterUpdateFrequency; }
	void	SetIPFilterUpdateFrequency(int iDays)	{ m_iIPFilterUpdateFrequency = iDays; }
d1359 1
a1359 1
	byte					m_nDeadServer;
d1457 1
a1457 1
	uint16					m_nDeadServerRetries;
d1772 1
a1772 1
	int		m_iIPFilterUpdateFrequency;
@


1.253
log
@Formatting.
@
text
@d368 10
d568 6
a573 6
	uint32	BadClientBanTime()							{ return m_nBadClientBanTime; }
	void	SetBadClientBanTime(uint32 uTime)			{ m_nBadClientBanTime = uTime; }
	uint32	BadClientMinRequestTime()					{ return m_nMinRequestTime; }
	void	SetBadClientMinRequestTime(uint32 uTime)	{ m_nMinRequestTime = uTime; }
	byte	BadClientMinRequestNum()					{ return m_nBadClientBan; }
	void	SetBadClientMinRequestNum(byte uVal)		{ m_nBadClientBan = uVal; }
d583 4
a586 4
	uint32	WhenSourcesOutdated()						{ return m_nSLSOutdated; }
	void	SetWhenSourcesOutdated(uint32 uVal)			{ m_nSLSOutdated = uVal;}
	uint32	SLSMaxSourcesPerFile()						{ return m_SLSMaxSourcesPerFile; }
	void	SetSLSMaxSourcesPerFile(uint32 MaxSrc)		{ m_SLSMaxSourcesPerFile = MaxSrc; }
d820 2
a821 2
	uint16	GetMaxSourcePerFile()						{ return m_nMaxSourcePerFile; }
	void	SetMaxSourcePerFile(uint32 dwVal)			{ m_nMaxSourcePerFile = static_cast<uint16>(dwVal); }
d848 2
a849 2
	byte	GetToolTipDelay(void)						{ return m_nTooltipDelayTime; }
	void	SetToolTipDelay(byte iDelay)				{ m_nTooltipDelayTime = iDelay; }
d955 2
a956 2
	byte	GetGraphRatio()								{ return m_nGraphRatio; }
	void	SetGraphRatio(byte iNum)					{ m_nGraphRatio = iNum; }
d1095 3
a1097 3
	bool	GetLancastEnabled()							{ return m_LancastEnabled; }
	void	SetLancastEnabled(bool bEnable)				{ m_LancastEnabled = bEnable; }
	bool	GetLancastUseDefaultIP()					{ return m_UseDefaultIP; }
d1099 2
a1100 2
	uint32	GetLancastSubnet()							{ return m_LancastSubnet; }
	uint16	GetLancastPort()							{ return m_LancastPort; }
d1345 1
a1346 1
	uint16					m_nMaxSourcePerFile;
d1353 1
a1353 1
	byte					m_nGraphRatio;
d1436 3
a1438 3
	uint32					m_nBadClientBanTime;
	uint32					m_nMinRequestTime;
	byte					m_nBadClientBan;
d1449 2
a1450 2
	uint32					m_SLSMaxSourcesPerFile;
	uint32					m_nSLSOutdated;
d1461 1
a1461 1
	byte					m_nTooltipDelayTime;
d1549 6
a1554 6
	bool  					m_LancastEnabled;
	bool   					m_UseDefaultIP;
	uint32 					m_DefaultLancastIP;
	uint32					m_LancastIP;
	uint32					m_LancastSubnet;
	uint16					m_LancastPort;
@


1.252
log
@changed the intialization of thread locale
@
text
@d357 2
a358 2
	uint16 wLangs;
	uint16 wCodepage;
d371 1
@


1.251
log
@Suppressed compiler warnings.
@
text
@d355 6
d371 1
d1306 2
@


1.250
log
@Added value check for "AcceptMessageFrom".
@
text
@d771 2
a772 2
	uint16	GetDetailColumnWidth()						{ return m_nDetailColumnWidth; }
	void	SetDetailColumnWidth(uint16 in)				{ m_nDetailColumnWidth = in; }
d1057 1
a1057 1
	void	SetSCHShift1Download(uint16 Value)			{ m_uSCHShift1Download = Value; }
d1065 1
a1065 1
	void	SetSCHShift2Download(uint16 Value)			{ m_uSCHShift2Download = Value; }
d1362 1
a1362 1
	uint16					m_nDetailColumnWidth;
@


1.249
log
@Preparation to add player parameters; Suppressed compiler warnings; Formatting;
Removed protection for video player path, as it isn't accessed from other threads it should be safe without it.
@
text
@d1118 2
a1119 2
	byte	GetAcceptMessagesFrom()						{ return m_nAcceptMessagesFrom; }
	void	SetAcceptMessagesFrom(byte in)				{ m_nAcceptMessagesFrom = in; }
d1541 1
a1541 1
	byte					m_nAcceptMessagesFrom;
@


1.248
log
@Simplified transfer statistics gathering;
Increased upper range for 'File Buffer Size', setting was made compatible with original (setting name was changed from "FileBufferSizePref" to "FileBufferSize", smooth migration is in place with slight deviation of values; Bigger File Buffer Size is recommended for higher speeds to stabilize and slightly improve downloading speed; New configuration is done with different granuality).
@
text
@d480 4
a483 2
	CString	GetVideoPlayer()  							{ return m_sVideoPlayer.Get(); }
	void    SetVideoPlayer(const CString& str)			{ m_sVideoPlayer.Put(str); }
d512 1
a512 1
	void	SetAutoSourcesLogEnabled(bool bEnabled)		{ m_bAutoSourcesLogEnabled = bEnabled; }
d514 1
a514 1
	void	SetClientTransferLogEnabled(bool bEnabled)	{ m_bClientTransferLogEnabled = bEnabled; }
d906 2
a907 4
	bool	ShowOverhead()								{ return m_bShowOverhead;}
	void	SetShowOverhead(bool bit)					{ m_bShowOverhead = bit;}
	bool	BackupPreview()								{ return m_bBackupPreview;}
	void	SetBackupPreview(bool bit)					{ m_bBackupPreview = bit;}
d945 20
a964 20
	byte	GetServerSortCol()							{ return m_nServerSortCol; }
	void	SetServerSortCol(byte iCol)					{ m_nServerSortCol = iCol; }
	byte	GetUploadSortCol()							{ return m_nUploadSortCol; }
	void	SetUploadSortCol(byte iSortCol)				{ m_nUploadSortCol = iSortCol; }
	byte	GetQueueSortCol()							{ return m_nQueueSortCol; }
	void	SetQueueSortCol(byte iSortCol)				{ m_nQueueSortCol = iSortCol; }
	byte	GetSearchSortCol()							{ return m_nSearchSortCol; }
	void	SetSearchSortCol(byte iSortCol)				{ m_nSearchSortCol = iSortCol; }
	byte	GetIrcSortCol()								{ return m_nIRCSortCol; }
	void	SetIrcSortCol(byte iSortCol)				{ m_nIRCSortCol = iSortCol; }
	byte	GetClientListSortCol()						{ return m_nClientListSortCol; }
	void	SetClientListSortCol(byte iSortCol)			{ m_nClientListSortCol = iSortCol; }
	uint16	GetFileSortCol()							{ return m_nFileSortCol; }
	void	SetFileSortCol(uint16 uCol)					{ m_nFileSortCol = uCol; }
	byte	GetDownloadSortCol()						{ return m_nDownloadSortCol; }
	void	SetDownloadSortCol(byte iSortCol)			{ m_nDownloadSortCol = iSortCol; }
	byte	GetSrcSortCol1()							{ return m_nSrcSortCol1; }
	void	SetSrcSortCol1(byte iSortCol)				{ m_nSrcSortCol1 = iSortCol; }
	byte	GetSrcSortCol2()							{ return m_nSrcSortCol2; }
	void	SetSrcSortCol2(byte iSortCol)				{ m_nSrcSortCol2 = iSortCol; }
d975 4
a978 4
	byte	GetUpbarStyle()								{ return m_nUpbarPartTraffic; }
	void	SetUpbarStyle(byte uStyle)					{ m_nUpbarPartTraffic = uStyle; }
	byte	GetUpbarColor()								{ return m_nUpbarColorPartTraffic; }
	void	SetUpbarColor(byte uColor)					{ m_nUpbarColorPartTraffic = uColor; }
d1219 4
a1222 2
	bool	GetPreviewSmallBlocks()						{ return m_iPreviewSmallBlocks; }
	void	SetPreviewSmallBlocks(bool in)				{ m_iPreviewSmallBlocks = in; }
d1366 2
a1367 1
	CSecuredVar<CString>	m_sVideoPlayer;
d1488 10
a1497 10
	byte					m_nServerSortCol;
	byte					m_nUploadSortCol;
	byte					m_nQueueSortCol;
	byte					m_nSearchSortCol;
	byte					m_nIRCSortCol;
	byte					m_nClientListSortCol;
	uint16					m_nFileSortCol;
	byte					m_nDownloadSortCol;
	byte					m_nSrcSortCol1;
	byte					m_nSrcSortCol2;
d1525 2
a1526 2
	byte					m_nUpbarPartTraffic;		// 0=one info 1=2 infos 2=3infos
	byte					m_nUpbarColorPartTraffic;	// 0=rainbow style 1=more rainbow 2=downloadlist-like 3=girlie
d1729 1
a1729 1
	bool	m_iPreviewSmallBlocks;
@


1.247
log
@Transfer window sub-pane state was moved to preferenes.ini (gui.dat is not used anymore) -- sub-pane state will be set to default on the first start.
@
text
@d597 2
a598 1
	void	Add2SessionTransferData (byte uClientID, BOOL bFromPF, EnumTransferType eUpDown, uint32 bytes, BOOL bCommunity, byte byteFilePriority);
d1029 2
a1030 2
	uint16	GetFileBufferSize()							{ return m_nFileBufferSize; }
	void	SetFileBufferSize(int Value)				{ m_nFileBufferSize = static_cast<uint16>(Value); }
d1374 1
a1374 1
	uint16					m_nFileBufferSize;
@


1.246
log
@Removed secure protection for password hashes -- no point to do it for something changed once in a blue moon;
Reduced H-file dependency; Formatting.
@
text
@d1293 3
d1536 1
a1536 1
	//Messaging preferences-
d1840 3
@


1.245
log
@changes after review
@
text
@a19 3
#include "opcodes.h"
#include "otherfunctions.h"
#include "MD5Sum.h"
a20 1
#include "Category.h"
d525 1
a525 1
	void	SetA4AFHash(const uchar* file_hash)			{ md4cpy(m_A4AF_FileHash, file_hash); }
d530 4
a533 4
	const byte*	GetWSPass(byte *pbyteHash)									{ return reinterpret_cast<const byte*>(m_sWebPassword.Get(reinterpret_cast<HashType*>(pbyteHash))); }
	void	SetWSPass(const CString& strNewPass)		{ HashType Digest; m_sWebPassword.Put(*reinterpret_cast<const HashType*>(MD5Sum(strNewPass, Digest.hash))); }
	const byte*	GetWSLowPass(byte *pbyteHash)								{ return reinterpret_cast<const byte*>(m_sLowWebPassword.Get(reinterpret_cast<HashType*>(pbyteHash))); }
	void	SetWSLowPass(const CString& strNewPass)		{ HashType Digest; m_sLowWebPassword.Put(*reinterpret_cast<const HashType*>(MD5Sum(strNewPass, Digest.hash))); }
d801 2
a802 2
	uint16	GetMaxSourcePerFileSoft() const				{ unsigned ui = static_cast<unsigned>(m_nMaxSourcePerFile) * 9u / 10u; return static_cast<uint16>((ui > MAX_SOURCES_FILE_SOFT) ? MAX_SOURCES_FILE_SOFT : ui); }
	uint16	GetMaxSourcePerFileUDP() const				{ unsigned ui = (static_cast<unsigned>(m_nMaxSourcePerFile) * 3u) >> 2u; return static_cast<uint16>((ui > MAX_SOURCES_FILE_UDP)? MAX_SOURCES_FILE_UDP : ui); }
d1070 1
a1070 1
	void	SetMaxUpload(uint16 uMaxUpload) 			{ m_dwMaxUpload = uMaxUpload; }
d1072 1
a1072 1
	void	SetMaxDownload(uint16 uMaxDownload)			{ m_dwMaxDownload = uMaxDownload; }
d1123 2
a1124 2
	const byte*	GetMMPass(byte *pbyteHash)					{ return reinterpret_cast<const byte*>(m_sMMPassword.Get(reinterpret_cast<HashType*>(pbyteHash))); }
	void	SetMMPass(const CString& strNewPass)		{ HashType Digest; m_sMMPassword.Put(*reinterpret_cast<const HashType*>(MD5Sum(strNewPass, Digest.hash))); }
d1505 2
a1506 2
	CSecuredVar<HashType>	m_sWebPassword;
	CSecuredVar<HashType>	m_sLowWebPassword;
d1750 1
a1750 1
	CSecuredVar<HashType>	m_sMMPassword;
@


1.244
log
@Remove unused but active code that can be used to retrieve IP and port of users through IRC {Bruno}
@
text
@d1244 1
a1244 1
	bool	SharedDirListCheckAndAdd(const CString &strNewDir, bool bAdd);
@


1.243
log
@Added facility to update comment filter and file cleanup tags for current installation (comment filter was extended with "fastest eMule ever", file cleanup tags with "shareconnector");
Suppressed some compiler warnings.
@
text
@a894 2
	bool	GetIrcIgnoreEmuleProtoInfoMessage()			{ return m_bIRCIgnoreEmuleProtoInfoMessage; }
	void	SetIrcIgnoreEmuleProtoInfoMessage(bool flag){ m_bIRCIgnoreEmuleProtoInfoMessage = flag;}
a1506 1
	bool					m_bIRCIgnoreEmuleProtoInfoMessage;
@


1.242
log
@Preserve WebServer list statuses between restarts [Aw3].
@
text
@d487 1
a487 1
	uint16	GetMaxUpload() const						{ return m_uMaxUpload; }
d534 1
a534 1
	byte*	GetWSPass(byte *pbyteHash)									{ return reinterpret_cast<byte*>(m_sWebPassword.Get(reinterpret_cast<HashType*>(pbyteHash))); }
d536 1
a536 1
	byte*	GetWSLowPass(byte *pbyteHash)								{ return reinterpret_cast<byte*>(m_sLowWebPassword.Get(reinterpret_cast<HashType*>(pbyteHash))); }
d1076 1
a1076 1
	void	SetMaxUpload(uint16 uMaxUpload) 			{ m_uMaxUpload = uMaxUpload; }
d1078 1
a1078 1
	void	SetMaxDownload(uint16 uMaxDownload)			{ m_uMaxDownload = uMaxDownload; }
d1080 1
a1080 1
	uint16	GetMaxDownloadValue() const					{ return m_uMaxDownload; }
d1129 1
a1129 1
	byte*	GetMMPass(byte *pbyteHash)					{ return reinterpret_cast<byte*>(m_sMMPassword.Get(reinterpret_cast<HashType*>(pbyteHash))); }
d1323 2
a1324 2
	uint16					m_uMaxUpload;
	uint16					m_uMaxDownload;
d1549 1
d1554 1
@


1.241
log
@Suppressed compiler warnings [Aw3].
@
text
@d198 86
d287 7
d305 5
@


1.240
log
@WebServer: preserve client queue statuses between restarts (preferences.ini) [Aw3];
WebServer: don't load/save preferences.ini on change of particular parameters (load is done only on startup to avoid double preferences.ini reading when WS is enabled; Save is done with other preferences when it happens) [Aw3].
@
text
@d451 3
a453 3
	byte*	GetMinTrayPTR()								{ return &m_bMinToTray; }
	bool	DoAutoConnect() 							{ return m_bAutoConnect; }
	void    SetAutoConnect(bool bConnect)				{ m_bAutoConnect = bConnect; }
d461 1
a461 1
	void	SetBanMessageEnabled(bool bEnable)          { m_bBanMessageEnabled = bEnable; }
d467 1
a467 1
	void	SetShowRatingIcons(bool bEnable)		    { m_bShowRatingIcons = bEnable; }
d495 1
a495 1
	void	Add2ConnPeakConnections(int in)				{ cumConnPeakConnections = in; }
d655 1
a655 1
	__int64	GetStatsLastResetLng()						{ return stat_datetimeLastReset;}
d706 1
a706 1
	void	SetMaxSourcePerFile(uint16 uVal)			{ m_nMaxSourcePerFile = uVal; }
d873 1
a873 1
	void	SetMaxDownloadConperFive(int in)			{ m_nMaxConPerFive = in; }
d913 1
a913 1
	void	SetXSUpTo(uint16 uVal)						{ m_nXSUpTo = uVal; }
d937 2
a938 2
	void	SetFileBufferSize(int Value)				{ m_nFileBufferSize = Value; }
	int	GetMainProcessPriority()						{ return m_nMainProcessPriority; }
d997 2
a998 2
	uint32 GetWSTempDisableLogin()						{ return m_nWebTempDisableLogin; }
	void SetWSTempDisableLogin(uint32 n)				{ m_nWebTempDisableLogin = n; }
d1027 2
a1028 2
	bool	GetAwayState()								{ return m_nAwayState; }
	void	SetAwayState(bool in)						{ m_nAwayState = in; }
d1169 1
a1169 1
	void	SetServerAuxPortUsed(BOOL bUseAuxPort)	{ m_bUseServerAuxPort = bUseAuxPort; }
d1251 1
a1251 1
	byte					m_bMinToTray;
d1417 1
a1423 1
	byte 					m_nWebTempDisableLogin;
d1444 1
a1444 1
	byte					m_nAwayState;
d1618 1
a1618 1
	__int64	stat_datetimeLastReset;
@


1.239
log
@Added 'Keep search history' setting to preserve or not search history [Aw3];
Keep "ConnRunTime" setting as 32bit instead of 64bit value -- enough for over 100 years; Clean-up [Aw3].
@
text
@d198 16
d446 1
a446 2
	bool	GetWSMenuLocked()							{ return m_bWebMenuLocked; }
	void	SetWSMenuLocked(bool bEnable)				{ m_bWebMenuLocked = bEnable; }
d1416 1
a1423 1
	bool					m_bWebMenuLocked;
@


1.238
log
@More appropriate name for service to avoid confusion.
@
text
@d571 1
a571 1
	uint64	GetUpDataByPriority(byte bytePrio)			{ return ((bytePrio < ELEMENT_COUNT(sesUpDataPriority)) ? sesUpDataPriority[bytePrio] : 0);}
d618 1
a618 1
	uint64	GetConnRunTime()							{ return cumConnRunTime;}
d917 2
d1581 1
a1581 1
	uint64	cumConnRunTime;
d1715 1
@


1.237
log
@Encryption preparations.
@
text
@d763 1
a763 1
	void	SetIRCNick( const CString& in_nick )		{ m_sIRCNick.Put(in_nick); }
d767 1
a767 1
	void	SetIRCAddTimestamp( bool flag )				{ m_bIRCAddTimestamp = flag; }
d771 1
a771 1
	void	SetIRCUseChanFilter(bool flag)				{ m_bIRCUseChanFilter = flag; }
d793 3
a795 3
	void	SetVerbose(bool bEnabled)					{ m_bVerbose = bEnabled; }
	bool	GetManualHighPrio()							{ return m_bManualHighPrio; }
	void	SetManualHighPrio (bool bEnabled)			{ m_bManualHighPrio = bEnabled; }
d1440 1
a1440 1
	bool					m_bManualHighPrio;
@


1.236
log
@Encryption preparations; Combined public sections.
@
text
@d1179 1
d1181 1
@


1.235
log
@removed the port statistic (part 2)
@
text
@d2 1
a2 1
//Copyright (C)2002 Merkur ( merkur-@@users.sourceforge.net / http://www.emule-project.net )
d11 1
a11 1
//MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
d17 1
a18 1
#pragma once
d1147 36
a1182 1
protected:
a1185 1
private:
d1720 4
a1723 25
public:
	BOOL IsNTBased(void);

	void	WritePreparedNameTag(CFile &file) const	{ file.Write(m_pNameTag, m_dwNameTagSz); }

	bool	IsServerAuxPortUsed() const				{ return m_bUseServerAuxPort; }
	void	SetServerAuxPortUsed(BOOL bUseAuxPort)	{ m_bUseServerAuxPort = bUseAuxPort; }

	CString	GetIPFilterURL() const					{ return m_strIPFilterURL; }
	void	SetIPFilterURL(const CString& strURL)	{ m_strIPFilterURL = strURL; }
	bool	IsIPFilterUpdateOnStart() const			{ return m_bIPFilterUpdateOnStart; }
	void	SetIPFilterUpdateOnStart(bool bIsUpdate){ m_bIPFilterUpdateOnStart = bIsUpdate; }
	int		GetIPFilterUpdateFrequency() const		{ return m_iIPFilterUpdateFrequency; }
	void	SetIPFilterUpdateFrequency(int iDays)	{ m_iIPFilterUpdateFrequency = iDays; }
	uint32	GetLastIPFilterUpdate()					{ return m_dwLastIPFilterUpdate; }
	void	SetLastIPFilterUpdate(uint32 dwDate)	{ m_dwLastIPFilterUpdate = dwDate; }

	bool	IsAVEnabled() const						{ return m_bAVEnabled; }
	void	SetAVEnabled(bool in)					{ m_bAVEnabled = in; }
	bool	IsAVScanCompleted() const				{ return m_bAVScanCompleted; }
	void	SetAVScanCompleted(bool in)				{ m_bAVScanCompleted = in; }
	CString	GetAVPath() const						{ return m_strAVPath; }
	void	SetAVPath(const CString &str)			{ m_strAVPath = str; }
	CString	GetAVParams() const						{ return m_strAVParams; }
	void	SetAVParams(const CString &str)			{ m_strAVParams = str; }
@


1.234
log
@corrected type of return value
@
text
@d488 1
a488 1
	void	Add2SessionTransferData (byte uClientID, uint16 uClientPort, BOOL bFromPF, EnumTransferType eUpDown, uint32 bytes, BOOL bCommunity, byte byteFilePriority);
a572 9
	// Cumulative port breakdown stats for sent bytes...
	uint64	GetUpTotalPortData()						{ return (GetCumUpDataPort_4662() + GetCumUpDataPort_OTHER() );}
	uint64	GetCumUpDataPort_4662()						{ return (cumUpDataPort_4662 + sesUpDataPort_4662 );}
	uint64	GetCumUpDataPort_OTHER()					{ return (cumUpDataPort_OTHER + sesUpDataPort_OTHER );}
	// Session port breakdown stats for sent bytes...
	uint64	GetUpSessionPortData()						{ return (sesUpDataPort_4662 + sesUpDataPort_OTHER );}
	uint64	GetUpDataPort_4662()						{ return sesUpDataPort_4662;}
	uint64	GetUpDataPort_OTHER()						{ return sesUpDataPort_OTHER;}

a610 10
	// Cumulative port breakdown stats for received bytes...
	uint64	GetDownTotalPortData()						{ return (GetCumDownDataPort_4662() +	GetCumDownDataPort_OTHER() );}
	uint64	GetCumDownDataPort_4662()					{ return (cumDownDataPort_4662 + sesDownDataPort_4662 );}
	uint64	GetCumDownDataPort_OTHER()					{ return (cumDownDataPort_OTHER + sesDownDataPort_OTHER );}

	// Session port breakdown stats for received bytes...
	uint64	GetDownSessionDataPort()					{ return (sesDownDataPort_4662 + sesDownDataPort_OTHER );}
	uint64	GetDownDataPort_4662()						{ return sesDownDataPort_4662;}
	uint64	GetDownDataPort_OTHER()						{ return sesDownDataPort_OTHER;}

a1494 8
	// Cumulative port breakdown stats for sent bytes...
	uint64	cumUpDataPort_4662;
	uint64	cumUpDataPort_OTHER;

	// Session port breakdown stats for sent bytes...
	uint64	sesUpDataPort_4662;
	uint64	sesUpDataPort_OTHER;

a1535 8
	// Cumulative port breakdown stats for received bytes...
	uint64	cumDownDataPort_4662;
	uint64	cumDownDataPort_OTHER;

	// Session port breakdown stats for received bytes...
	uint64	sesDownDataPort_4662;
	uint64	sesDownDataPort_OTHER;

@


1.233
log
@Added filename cleanup shortcut {Towelie}.
@
text
@d840 1
a840 1
	byte	UseFlatBar() const							{ return m_byteDepth3D == 0; }
@


1.232
log
@Server list update option was split into update from servers and clients {ElAguila};
Save only used plot colors to the configuration file.
@
text
@d240 1
@


1.231
log
@Removed not working 'Automatic serverconnect without proxy' feature.
@
text
@d669 4
a672 2
	bool	GetAddServersFromConn()						{ return m_bAddServersFromConn; }
	void	SetAddServersFromConn(bool bAdd)			{ m_bAddServersFromConn = bAdd; }
d845 2
a846 2
	DWORD	GetStatsColor(int index)					{ return m_nStatColors[index]; }
	void	SetStatsColor(int index, DWORD value)		{ m_nStatColors[index] = value; }
d880 1
a880 1
	DWORD	GetDefaultStatsColor(int index);
d1208 2
a1209 1
	bool					m_bAddServersFromConn;
d1350 1
a1350 1
	DWORD					m_nStatColors[15];
@


1.230
log
@Added preferences.ini option (AllowLocalHostIP) to allow acceptance of local sources (127.*.*.*).
@
text
@a1037 2
	bool	IsProxyASCWOP()								{ return m_bIsASCWOP;}
	void	SetProxyASCWOP(bool in)						{ m_bIsASCWOP = in;}
a1419 1
	bool					m_bIsASCWOP;
@


1.229
log
@Configuration of default file permission [DarkSoul/Aw3]
(the feature isn't finished yet -- just GUI and value save/load are ready).
@
text
@d753 1
d1003 1
a1003 1
	bool	IsCounterMeasures()							{ return m_bCounterMeasures; }
d1005 1
a1005 2

	bool	IsCMNotLog()								{ return m_bCMNotLog; }
d1708 1
@


1.228
log
@Large file size support preparations.
@
text
@a191 1
//	EP_SEARCHMETHOD_FILT,
d303 5
d732 2
d1212 1
@


1.227
log
@Added default statistics tree mask.
@
text
@d649 3
a651 3
	uint64	GetSharedLargestShareSize()					{ return cumSharedLargestShareSize; }
	uint32	GetSharedLargestAvgFileSize()				{ return dwCumSharedLargestAvgFileSize; }
	uint32	GetSharedLargestFileSize()					{ return dwCumSharedLargestFileSize; }
d1587 3
a1589 3
	uint64	cumSharedLargestShareSize;
	uint32	dwCumSharedLargestAvgFileSize;
	uint32	dwCumSharedLargestFileSize;
@


1.226
log
@new email notifier code (adapted from original) - fully UNICODE ready;
option to send email notification messages in subject
@
text
@d251 1
@


1.225
log
@Dropped import of old preferences (preceding eMule v0.21);
Added ta define for default proxy port.
@
text
@d1074 2
d1429 1
@


1.224
log
@Unicode corrections; Ranamed GetProxy into GetProxySettings; Optimization.
@
text
@d250 1
a302 93
#pragma pack(1)
struct Preferences_Import19c_Struct{
	byte	version;
	TCHAR	nick[50];
	uint16	maxupload;
	uint16	maxdownload;
	uint16	port;
	uint16	maxconnections;
	byte	reconnect;
	byte	deadserver;
	byte	scorsystem;
	TCHAR	incomingdir[510];
	TCHAR	tempdir[510];
	byte	autoserverlist;
	byte	updatenotify;
	byte	mintotray;
	uchar	abyteUserHash[16];
	byte	autoconnect;
	byte	addServersFromConn;
};

struct Preferences_Import20a_Struct{
	byte	version;
	TCHAR	nick[50];
	uint16	maxupload;
	uint16	maxdownload;
	uint16	port;
	uint16	maxconnections;
	byte	reconnect;
	byte	deadserver;
	uint16	deadserverretries;
	byte	scorsystem;
	TCHAR	incomingdir[510];
	TCHAR	tempdir[510];
	byte	autoserverlist;
	byte	updatenotify;
	byte	mintotray;
	uchar	abyteUserHash[16];
	byte	autoconnect;
	byte	addServersFromConn;
	byte	addserversfromclient;
	uint16	maxsourceperfile;
	uint16	trafficOMeterInterval;
	uint32   totalDownloaded;
	uint32	totalUploaded;
	int	maxGraphDownloadRate;
	int	maxGraphUploadRate;
	byte	beepOnError;
	byte	confirmExit;
	WINDOWPLACEMENT EmuleWindowPlacement;
	int transferColumnWidths[9];
	int serverColumnWidths[8];
	byte	splashscreen;
	byte	filerBadIP;
};

struct Preferences_Import20b_Struct{
	byte	version;
	TCHAR	nick[50];
	uint16	maxupload;
	uint16	maxdownload;
	uint16	port;
	uint16	maxconnections;
	byte	reconnect;
	byte	deadserver;
	byte	scorsystem;
	TCHAR	incomingdir[510];
	TCHAR	tempdir[510];
	byte	autoserverlist;
	byte	updatenotify;
	byte	mintotray;
	uchar	abyteUserHash[16];
	byte	autoconnect;
	byte	addServersFromConn;
	byte	addserversfromclient;
	uint16	maxsourceperfile;
	uint16	trafficOMeterInterval;
	uint32   totalDownloaded;	// outdated
	uint32	totalUploaded;		// outdated
	int		maxGraphDownloadRate;
	int		maxGraphUploadRate;
	byte	beepOnError;
	byte	confirmExit;
	WINDOWPLACEMENT EmuleWindowPlacement;
	int transferColumnWidths[9];
	int serverColumnWidths[8];
	byte	splashscreen;
	byte	filerBadIP;
	uint64   totalDownloadedBytes;
	uint64	totalUploadedBytes;
};
#pragma pack()

@


1.223
log
@Added shortcut for "Download from all A4AF sources (same category)" {Fuxie - DK}.
@
text
@d275 1
d281 3
a283 3
	CString		m_strName;
	CString		m_strUser;
	CString		m_strPassword;
d302 1
d394 1
d1093 2
a1094 2
	ProxySettings GetProxy() const						{ ProxySettings Ret = m_proxy; return Ret; }
	void SetProxySettings(ProxySettings proxysettings)	{ m_proxy = proxysettings; }
d1115 1
a1115 1
	byte*	GetMMPass(byte *pbyteHash)									{ return reinterpret_cast<byte*>(m_sMMPassword.Get(reinterpret_cast<HashType*>(pbyteHash))); }
@


1.222
log
@Removed preferences stuff (not used anymore) related to gzip compression.
@
text
@d231 1
@


1.221
log
@UNICODE preparation (first shot)
@
text
@a509 2
	bool	GetWebUseGzip()								{ return m_bWebUseGzip; }
	void	SetWebUseGzip(bool bUse)					{ m_bWebUseGzip = bUse; }
a1460 1
	bool					m_bWebUseGzip;
@


1.220
log
@Added defines for max sources thresholds;
Substituted float calculations with integers.
@
text
@d548 1
a548 1
	bool	LoadStats(int loadBackUp = 0, CString sFileName = "");
d1261 1
a1261 1
	Preferences_Ext_Struct m_prefsExt;
d1265 2
a1266 2
	uchar m_userHash[16];
	WORD  m_wWinVer;
@


1.219
log
@Fixed session statistics 'Parts Saved Due To ICH' {Fuxie - DK}.
@
text
@d793 2
a794 2
	uint16	GetMaxSourcePerFileSoft()					{ uint16 temp = m_nMaxSourcePerFile*0.9;  return (temp > 1000)?1000:temp; }
	uint16	GetMaxSourcePerFileUDP()					{ uint16 temp = m_nMaxSourcePerFile*0.75; return (temp > 100)? 100:temp; }
d798 3
a800 3
	int     GetColumnWidth(EnumTable t, int index) const;
	BOOL    GetColumnHidden(EnumTable t, int index) const;
	int     GetColumnOrder(EnumTable t, int index) const;
@


1.218
log
@Removed "Drop sources with highest queue ranking".
@
text
@d584 1
a584 1
	void	Add2SessionPartsSavedByICH()				{ sesPartsSavedByICH++; }
d633 2
a634 1
	uint32	GetPartsSavedByICH() const					{ return cumPartsSavedByICH; }
d1626 2
a1627 2
	uint32	cumPartsSavedByICH;
	uint16	sesPartsSavedByICH;
@


1.217
log
@Renamed service to follow real actions.
@
text
@a751 2
	bool	GetDropHighestQREnabled()					{ return m_bDropHighestQR; }
	void	SetDropHighestQREnabled(bool bEnable)		{ m_bDropHighestQR = bEnable; }
a1315 1
	bool					m_bDropHighestQR;
@


1.216
log
@const is added to the method.
@
text
@d424 2
a425 2
	byte	Score()										{ return m_nScoreSystem; }
	void	SetScore(byte iScore)						{ m_nScoreSystem = iScore; }
d431 2
a432 2
	void    SetUserNick(const CString& strNewNick)	
	{ 
d1286 1
a1286 1
	byte					m_nScoreSystem;
@


1.215
log
@download log (part1: without GUI)
@
text
@d992 1
a992 1
	bool	LogDownloadToFile()							{ return m_bLogDownloadToFile; }
d1241 1
a1246 2
	CString 	GetDownloadLogName() const 			{ return m_strDownloadLogFilePath;}

@


1.214
log
@Shortcut to copy file hash to clipboard.
@
text
@d992 2
d1246 2
d1265 2
d1406 1
@


1.213
log
@A fix for the previous change.
@
text
@d239 1
@


1.212
log
@Fixed saving and display of "Gained Due To Compression" global statistics.
@
text
@d582 1
a582 1
	void	Add2SavedFromCompression(uint32 dwVal)		{ m_qwSesSavedFromCompression += dwVal; }
@


1.211
log
@Save state of Friends list.
@
text
@d582 1
a582 1
	void	Add2SavedFromCompression(uint64 in)			{ cumSavedFromCompression += in; }
d630 2
a631 1
	uint64	GetSavedFromCompression() const				{ return cumSavedFromCompression; }
d1620 1
a1620 2
	uint64	m_qwSesLostFromCorruption;
	uint64	cumSavedFromCompression;
d1625 2
@


1.210
log
@Removed unused ini file variable; Friend splitter preparations.
@
text
@d180 8
d393 14
a406 1
	enum EnumTable {TABLE_DOWNLOAD, TABLE_DOWNLOAD2, TABLE_UPLOAD, TABLE_QUEUE, TABLE_SEARCH, TABLE_SHARED, TABLE_SERVER, TABLE_IRC, TABLE_CLIENTLIST, TABLE_PARTSTATUS};
d1732 1
d1743 1
d1755 1
d1766 1
d1778 1
@


1.209
log
@filter.txt -> filter.dat.
@
text
@a799 2
	byte	GetSplitterbarPosition()					{ return m_nSplitterBarPosition; }
	void	SetSplitterbarPosition(byte pos)			{ m_nSplitterBarPosition = pos; }
d815 14
a828 14
	bool    GetUseDownloadAddNotifier()					{ return m_bUseDownloadAddNotifier; }
	void    SetUseDownloadAddNotifier(bool bUse)		{ m_bUseDownloadAddNotifier = bUse; }
	bool    GetUseDownloadNotifier() 					{ return m_bUseDownloadNotifier; }
	void    SetUseDownloadNotifier(bool bUse)			{ m_bUseDownloadNotifier = bUse; }
	bool    GetUseChatNotifier()						{ return m_bUseChatNotifier; }
	void    SetUseChatNotifier(bool bUse)				{ m_bUseChatNotifier = bUse; }
	bool    GetUseLogNotifier()			 				{ return m_bUseLogNotifier; }
	void    SetUseLogNotifier(bool bUse) 				{ m_bUseLogNotifier = bUse; }
	bool    GetUseSoundInNotifier()		 				{ return m_bUseSoundInNotifier; }
	void    SetUseSoundInNotifier(bool bUse)			{ m_bUseSoundInNotifier = bUse; }
	bool    GetUseSchedulerNotifier()					{ return m_bUseSchedulerNotifier; }
	void    SetUseSchedulerNotifier(bool bUse)			{ m_bUseSchedulerNotifier = bUse; }
	bool    GetNotifierPopsEveryChatMsg()				{ return m_bNotifierPopsEveryChatMsg; }
	void    SetNotifierPopsEveryChatMsg(bool bPop)		{ m_bNotifierPopsEveryChatMsg = bPop; }
d835 1
a835 1
	CString GetNotifierWavSoundPath() 					{ return m_sNotifierSoundFilePath.Get(); }
d868 3
a870 3
	bool	GetVerbose()						        { return m_bVerbose; }
	void 	SetVerbose(bool bEnabled)			        { m_bVerbose = bEnabled; }
	bool	GetManualHighPrio()					        { return m_bManualHighPrio; }
d872 1
a872 1
	bool	ShowOverhead()						        { return m_bShowOverhead;}
d955 8
a962 8
	uint32 	NotificationDisplayTime()					{ return m_nNotificationDisplayTime; }
	void 	SetNotificationDisplayTime(uint32 uTime)	{ m_nNotificationDisplayTime = uTime; }
	uint32 	NotificationFontSize()						{ return m_nNotificationFontSize; }
	void 	SetNotificationFontSize(uint32 uFontSize)	{ m_nNotificationFontSize = uFontSize; }
	uint16 	PriorityHigh()								{ return m_nPriorityHigh; }
	void 	SetPriorityHigh(uint16 iPrio)				{ m_nPriorityHigh = iPrio; }
	uint16 	PriorityLow()								{ return m_nPriorityLow; }
	void 	SetPriorityLow(uint16 iPrio)				{ m_nPriorityLow = iPrio; }
d973 1
a973 1
	uint32  SrvConTimeout()								{ return m_nSrvConTimeout; }
d1041 6
a1046 6
	bool GetLancastEnabled()							{ return m_LancastEnabled; }
	void SetLancastEnabled(bool bEnable)				{ m_LancastEnabled = bEnable; }
	bool GetLancastUseDefaultIP()						{ return m_UseDefaultIP; }
	uint32 GetLancastIP();
	uint32 GetLancastSubnet()							{ return m_LancastSubnet; }
	uint16 GetLancastPort()								{ return m_LancastPort; }
d1067 2
a1068 2
	ProxySettings GetProxy() const                      { ProxySettings Ret = m_proxy; return Ret; }
	void SetProxySettings(ProxySettings proxysettings)  { m_proxy = proxysettings; }
d1217 4
d1222 2
a1223 2
	void		CreateUserHash();
	void		SetStandardValues();
a1361 1
	byte					m_nSplitterBarPosition;
d1763 3
@


1.208
log
@Cumulative statistics of lost due to corruption was always zero after restart {muleteer}.
@
text
@d1760 1
a1760 1
	CString	m_strFilterWords;	// filter.txt exclude word list
@


1.207
log
@main menu lock
@
text
@d539 1
a539 1
	void	Add2ConnAvgUpRate(double in)					{ cumConnAvgUpRate = in; }
d541 1
a541 1
	void	Add2ConnMaxUpRate(double in)					{ cumConnMaxUpRate = in; }
d555 7
a561 3
	void	Add2DownFailedSessionsNoRequiredData()		{ sesDownFailedSessionsNoRequiredData++;}
	void	Add2LostFromCorruption(uint64 in)			{ cumLostFromCorruption += in;}
	void	Add2SavedFromCompression(uint64 in)			{ cumSavedFromCompression += in;}
d606 5
a610 4
	//		Saved stats for corruption/compression
	uint64	GetLostFromCorruption()						{ return cumLostFromCorruption;}
	uint64	GetSavedFromCompression()					{ return cumSavedFromCompression;}
	uint32	GetPartsSavedByICH()						{ return cumPartsSavedByICH;}
d628 1
a628 1
	uint64	GetUpData(EnumClientTypes eClientID)			{ return sesUpDataClients[eClientID]; }
d678 1
a678 1
	uint64	GetDownData(EnumClientTypes eClientID)			{ return sesDownDataClients[eClientID]; }
d800 2
a801 2
	byte    GetSplitterbarPosition()					{ return m_nSplitterBarPosition; }
	void	SetSplitterbarPosition(byte pos) 			{ m_nSplitterBarPosition = pos; }
d811 1
a811 1
	bool    GetCloseToTray()							{ return m_bCloseToTray; }
d813 3
a815 3
	bool    GetDetailsOnClick()							{ return m_bDetailsOnClick; }
	void    SetDetailsOnClick(bool bSet)				{ m_bDetailsOnClick = bSet; }
	bool    GetBugReport() const						{ return m_bBugReport; }
d864 1
a864 1
	void    SetStartMinimized(bool bStart)				{ m_bStartMinimized = bStart; }
d879 1
a879 1
	CString	GetTxtEditor() const				        {return m_strTxtEditor;}
d902 2
a903 2
	bool    AutoConnectStaticOnly()                   	{return m_bAutoConnectStaticOnly;}
	void    SetAutoConnectStaticOnly(bool bEnabled)		{m_bAutoConnectStaticOnly = bEnabled;}
d905 2
a906 2
	DWORD	GetStatsColor(int index) 					{ return m_nStatColors[index]; }
	void	SetStatsColor(int index, DWORD value) 		{ m_nStatColors[index] = value; }
d910 1
a910 1
	void    SetUseSort(bool bUseSort)					{ m_bUseSort = bUseSort; }
d1596 2
a1597 1
	uint64	cumLostFromCorruption;
@


1.206
log
@Disabled code prepared for Local Filter (let's hope to use it some day).
@
text
@d492 2
d1435 1
@


1.205
log
@added number of download failed sessions due to NNS sources to the statistic
@
text
@d184 1
a184 1
	EP_SEARCHMETHOD_FILT,
@


1.204
log
@Unified and regrouped shortcuts.
@
text
@d553 1
d597 1
d1596 1
@


1.203
log
@Some renaming.
@
text
@a24 1
#include "PPgShortcuts.h"
d191 44
d1180 2
a1181 2
	short	GetShortcutCode(int iIndex)					{ return iIndex >= 0 ? m_anShortcutCode[iIndex] : /*** should never happen ***/ static_cast<short>(VK_RETURN); }
	void	SetShortcutCode(short nCode, int iIndex)	{ if (iIndex >= 0) m_anShortcutCode[iIndex] = nCode; }
d1654 1
a1654 1
	short m_anShortcutCode[NUMBER_OF_ACTIONS];
@


1.202
log
@Unified search methods.
@
text
@d183 5
a187 5
	EP_SEARCHTYPE_SERV = 0,
	EP_SEARCHTYPE_GLOB,
	EP_SEARCHTYPE_FILT,
	EP_SEARCHTYPE_WEB1,
	EP_SEARCHTYPE_WEB2,
d189 1
a189 1
	EP_SEARCHTYPE_COUNT
@


1.201
log
@Corrections and optimization for local exception filter.
@
text
@d181 11
d936 1
a936 1
	void	SetA4AFStringEnabled(bool bEnable)          { m_bA4AFStringEnabled = bEnable; }
d938 3
a940 3
	void	SetA4AFCountEnabled(bool bEnable)          { m_bA4AFCountEnabled = bEnable; }
	int	GetMethod()									{ return m_nSearchMethod; }
	void	SetMethod(int Value) 						{ m_nSearchMethod = Value; }
d942 1
a942 1
	void	SetAutoTakeED2KLinks(bool bEnable)          { m_bAutoTakeLinks = bEnable; }
d944 2
a945 2
	void	SetFileBufferSize(int Value)      		    { m_nFileBufferSize = Value; }
	int	GetMainProcessPriority()					{ return m_nMainProcessPriority; }
d1235 1
a1235 1
	bool  					m_bOpenPorts;
d1240 1
a1240 1
	int						m_nSearchMethod;
@


1.200
log
@happyslinky's changes to search
@
text
@d1088 1
a1088 1
	void	SetAutoBackup(bool in) 						{ m_bAutoBackup =in; }
d1090 1
a1090 1
	void	SetBackupDatFiles(bool in) 					{ m_bDatFiles =in; }
d1092 1
a1092 1
	void	SetBackupMetFiles(bool in) 					{ m_bMetFiles =in; }
d1094 1
a1094 1
	void	SetBackupIniFiles(bool in) 					{ m_bIniFiles =in; }
d1096 1
a1096 1
	void	SetBackupPartFiles(bool in) 				{ m_bPartFiles =in; }
d1098 1
a1098 1
	void	SetBackupPartMetFiles(bool in) 				{ m_bPartMetFiles =in; }
d1109 1
a1109 1
	CString GetURLsForICC()								{ return m_sURLsForICC.Get(); }
d1129 2
a1130 2
	DWORD	GetServerKeepAliveTimeout() 				{ return m_dwServerKeepAliveTimeout; }
	void	SetServerKeepAliveTimeout(DWORD value) 		{ m_dwServerKeepAliveTimeout = value; }
d1154 1
a1154 2
	// filter words -- happyslinky
	CString GetFilterWords() { return m_strFilterWords; }
d1166 1
d1694 1
a1694 3
	// Filter.txt exclude word list - happyslinky
	CString m_strFilterWords;
	bool LoadFilterFile();
@


1.199
log
@Preparations to show media information.
@
text
@d1154 3
d1694 4
@


1.198
log
@Better way to prepare user name tag.
@
text
@d102 3
@


1.197
log
@Type of statistics values Max. Shared File Size and Max. Shared Average File Size
was changed from 64-bit into 32-bit to speed up processing as max. supported ed2k file size fits 32-bit.
@
text
@d355 1
a355 2
		safe_delete(m_pNameTag);
		m_pNameTag = new CClientTag(CT_NAME, m_sNick.Get());
d360 1
a360 1
    uint16	GetListenPort()								{ if(m_bUseProxyListenPort) return m_nListenPort; else return GetPort(); }
a463 1
	// -khaos--+++> Many, many, many, many methods.
a873 1
	//void	ResetStatsColor(int index); //Cax2 changed this function to GetDefaultStatsColor to use it in the colour picker!
d1083 1
a1083 1
//	(Backup feature)
d1156 7
a1169 5
	void LoadIniPreferences();
	void LoadDatPreferences();
	void SaveIniPreferences();

private:
d1685 3
d1691 1
a1691 2
	CClientTag*	m_pVersionTag;
	CClientTag*	m_pNameTag;
@


1.196
log
@Server LowID users statistics.
@
text
@d649 4
a652 4
	uint16	GetSharedMostFilesShared()					{ return cumSharedMostFilesShared;}
	uint64	GetSharedLargestShareSize()					{ return cumSharedLargestShareSize;}
	uint64	GetSharedLargestAvgFileSize()				{ return cumSharedLargestAvgFileSize;}
	uint64	GetSharedLargestFileSize()					{ return cumSharedLargestFileSize;}
d660 1
a660 1
	CString 	GetExpandedTreeItems() const			{ return m_strStatsExpandedTreeItems; }
d1399 2
a1400 2
	bool  					m_bAutoFilenameCleanup;
	bool   					m_bFilenameCleanupTags;
d1575 2
a1576 2
	uint64	cumSharedLargestAvgFileSize;
	uint64	cumSharedLargestFileSize;
@


1.195
log
@Removed useless ShowCatTabInfo setting and all related processing.
@
text
@d139 1
@


1.194
log
@Added 'Folder' column to Search window (shows the location of the remote client's files).
@
text
@a1084 3
	bool	ShowCatTabInfo() const						{ return m_bShowCatTabInfo; }
	void	ShowCatTabInfo(bool in)						{ m_bShowCatTabInfo=in; }

a1422 2
	bool					m_bShowCatTabInfo;

@


1.193
log
@Add sources possibly received from global search (official).
Added missing translations in case countryflag.dll / ip-to-country.cvs is not found.
Notifier informs if a new version is available (not annoying, but still more likely
 to be noticed than just a log line).
Added 'Folder' column to Shared files window.
Prevent adding install/working dirs (\Webserver, \Db...) to Shared files.
+ some other minor changes/fixes.
@
text
@d101 1
@


1.192
log
@Fixed VLC auto-detection in registry.
@
text
@d119 1
d1100 2
a1101 2
	bool	GetBackupPartTxtsrcFiles()						{ return m_bPartTxtsrcFiles; }
	void	SetBackupPartTxtsrcFiles(bool in) 				{ m_bPartTxtsrcFiles =in; }
d1104 1
a1104 1
	CString	GetBackupDir()								{ return m_sBackupDir.Get(); }
@


1.191
log
@Open client ports on Windows XP internal firewall (adopted from koizo)
@
text
@a370 1
	CString	GetVlcDir()  								{ return m_sVlcDir.Get(); }
a1214 1
	CSecuredVar<CString>	m_sVlcDir;
@


1.190
log
@Save state of the Parts Status list.
@
text
@d364 2
d1221 1
@


1.189
log
@Added protection to correctly check 3DDepth parameter
(there could be memory access outside boundaries).
@
text
@d1639 1
d1649 1
d1670 1
@


1.188
log
@Detailed file parts information.
@
text
@d831 3
a833 3
	byte	UseFlatBar()								{ return m_nDepth3D==0; }
	byte	Get3DDepth()                                { return m_nDepth3D; }
	void	Set3DDepth(byte iStyle)                      { m_nDepth3D = iStyle; }
d1207 1
a1207 1
	int						m_nDepth3D;
@


1.187
log
@Last Seen Complete was added to search results.
@
text
@d165 10
d325 1
a325 1
	enum EnumTable {TABLE_DOWNLOAD, TABLE_DOWNLOAD2, TABLE_UPLOAD, TABLE_QUEUE, TABLE_SEARCH, TABLE_SHARED, TABLE_SERVER, TABLE_IRC, TABLE_CLIENTLIST};
d1085 1
a1085 1
    //N@@boleo (Backup feature)
d1125 2
a1126 2
	short 	GetShortcutCode(int iIndex)					{ return iIndex >= 0 ? m_anShortcutCode[iIndex] : /*** should never happen ***/ static_cast<short>(VK_RETURN); }
	void  	SetShortcutCode(short nCode, int iIndex)	{ if (iIndex >= 0) m_anShortcutCode[iIndex] = nCode; }
d1136 4
a1139 2
	bool	IsWatchClipboard4ED2KLinks()				{ return m_bWatchClipboard;}
	void	SetWatchClipboard4ED2KLinks (bool in)		{ m_bWatchClipboard = in; }
d1141 2
a1142 2
	void LoadSharedDirs();
	void LoadTempDirs();
d1658 1
d1678 1
d1682 1
@


1.186
log
@Random TCP and UDP ports for new users.
@
text
@d100 1
@


1.185
log
@More robust settings validation.
@
text
@d167 4
@


1.184
log
@Fixed temporary directory list processing (double list entries which could be caused
by case sensitive compares; remove incorrect entries from the list; don't allow
main temp dir to be added to the list).
@
text
@d164 18
@


1.183
log
@Proper function to add and check TempDirs
@
text
@a971 1
	CStringList m_tempDirList;
a1109 1
	bool	TempDirListCheckAndAdd(const CString &strNewDir, bool bAdd);
d1113 4
d1566 1
a1566 1
	CCriticalSection	m_csSharedDirList;
d1570 1
@


1.182
log
@Fractional upload/download limits (min 1 KB/s, granularity 0.1 KB/s).
@
text
@d1111 1
@


1.181
log
@One more storage reorganization.
@
text
@d340 1
a340 1
	uint16	GetMaxUpload()								{ return m_nMaxUpload; }
d660 4
a663 4
	int		GetMaxGraphUploadRate()						{ return m_nMaxGraphUploadRate; }
	void	SetMaxGraphUploadRate(int in)				{ m_nMaxGraphUploadRate = in; }
	int		GetMaxGraphDownloadRate()					{ return m_nMaxGraphDownloadRate; }
	void	SetMaxGraphDownloadRate(int in)				{ m_nMaxGraphDownloadRate = in; }
d920 4
a923 4
	uint16	GetSCHShift1Upload()						{ return m_nSCHShift1Upload; }
	void	SetSCHShift1Upload(uint16 Value)			{ m_nSCHShift1Upload = Value; }
	uint16	GetSCHShift1Download()						{ return m_nSCHShift1Download; }
	void	SetSCHShift1Download(uint16 Value)			{ m_nSCHShift1Download = Value; }
d928 4
a931 4
	uint16	GetSCHShift2Upload()						{ return m_nSCHShift2Upload; }
	void	SetSCHShift2Upload(uint16 Value)			{ m_nSCHShift2Upload = Value; }
	uint16	GetSCHShift2Download()						{ return m_nSCHShift2Download; }
	void	SetSCHShift2Download(uint16 Value)			{ m_nSCHShift2Download = Value; }
d937 5
a941 3
	void	SetMaxUpload(uint16 nMaxUpload) 			{ m_nMaxUpload = nMaxUpload; }
	void	SetMaxDownload(uint16 nMaxDownload)			{ m_nMaxDownload = nMaxDownload; }
	uint16  GetMaxDownloadValue()						{ return m_nMaxDownload; }
d1135 2
a1136 2
	uint16					m_nMaxUpload;
	uint16					m_nMaxDownload;
d1143 2
a1144 2
	int						m_nMaxGraphDownloadRate;
	int						m_nMaxGraphUploadRate;
d1194 2
a1195 2
	uint16					m_nSCHShift1Upload;
	uint16					m_nSCHShift1Download;
d1198 2
a1199 2
	uint16					m_nSCHShift2Upload;
	uint16					m_nSCHShift2Download;
@


1.180
log
@Preferences storage reorganization and minor optimization.
@
text
@d169 1
a169 1
	uchar	m_userHash[16];
d213 1
a213 1
	uchar	m_userHash[16];
d234 1
a234 1
	uchar	m_userHash[16];
d268 1
a268 1
	uchar	m_userHash[16];
d1120 1
a1120 5
	Preferences_Ext_Struct* m_prefsExt;

	Preferences_Import19c_Struct* prefsImport19c;
	Preferences_Import20a_Struct* prefsImport20a;
	Preferences_Import20b_Struct* prefsImport20b;
@


1.179
log
@Optional filtering of small fake RX packets.
@
text
@d27 137
a197 58
struct Preferences_Struct_DONTUSE{
	uchar	m_userHash[16];
	WINDOWPLACEMENT EmuleWindowPlacement;
	uint16	downloadColumnWidths[21];
	BOOL	downloadColumnHidden[21];
	INT		downloadColumnOrder[21];
	uint16	uploadColumnWidths[11];
	BOOL	uploadColumnHidden[11];
	INT		uploadColumnOrder[11];
	uint16	queueColumnWidths[14];
	BOOL	queueColumnHidden[14];
	INT		queueColumnOrder[14];
	uint16	searchColumnWidths[6];
	BOOL	searchColumnHidden[6];
	INT		searchColumnOrder[6];
	uint16	sharedColumnWidths[12];
	BOOL	sharedColumnHidden[12];
	INT		sharedColumnOrder[12];
	uint16	serverColumnWidths[12];
	BOOL	serverColumnHidden[12];
	INT 	serverColumnOrder[12];
	uint16	ircColumnWidths[3];
	BOOL	ircColumnHidden[3];
	INT		ircColumnOrder[3];
	uint16	clientListColumnWidths[9];
	BOOL	clientListColumnHidden[9];
	INT 	clientListColumnOrder[9];

	bool	BugReport;
	uchar	A4AF_file_hash[16];

	int		tableSortItemDownload;
	int		tableSortItemDownload2;
	int		tableSortItemUpload;
	int		tableSortItemQueue;
	int		tableSortItemSearch;
	int		tableSortItemShared;
	int		tableSortItemServer;
	int		tableSortItemIRCChannel;
	int		tableSortItemClientList;
	bool	tableSortAscendingDownload;
	bool	tableSortAscendingDownload2;
	bool	tableSortAscendingUpload;
	bool	tableSortAscendingQueue;
	bool	tableSortAscendingSearch;
	bool	tableSortAscendingShared;
	bool	tableSortAscendingServer;
	bool	tableSortAscendingIRCChannel;
	bool	tableSortAscendingClientList;

	CString	TxtEditor;
	bool	showRatesInTitle;
	CString	messageFilter;

	char	m_sTemplateFile[MAX_PATH];
	ProxySettings proxy;
};

d339 1
a339 1
	uchar*	GetUserHash()								{ return m_prefs->m_userHash; }
d381 2
a382 2
	uchar*	GetA4AFHash(void)							{ return m_prefs->A4AF_file_hash; }
	void	SetA4AFHash(const uchar* file_hash)			{ md4cpy(m_prefs->A4AF_file_hash, file_hash); }
d436 2
a437 2
	//void	Add2TotalDownloaded(uint64 in) {m_prefs->totalDownloadedBytes+=in;}
	//void	Add2TotalUploaded(uint64 in) {m_prefs->totalUploadedBytes+=in;}
d622 2
a623 2
	void		SetExpandedTreeItems(CString in)		{ statsExpandedTreeItems = in; }
	CString 	GetExpandedTreeItems()					{ return statsExpandedTreeItems; }
d675 1
a675 1
	int     GetColumnWidth (EnumTable t, int index) const;
d677 9
a685 9
	int     GetColumnOrder (EnumTable t, int index) const;
	void	SetColumnWidth (EnumTable t, int index, int width);
	void	SetColumnHidden(EnumTable t, int index, BOOL bHidden);
	void	SetColumnOrder (EnumTable t, INT *piOrder);

	int		GetColumnSortItem (EnumTable t) const;
	bool	GetColumnSortAscending (EnumTable t) const;
	void	SetColumnSortItem (EnumTable t, int sortItem);
	void	SetColumnSortAscending (EnumTable t, bool sortAscending);
d714 1
a714 1
	bool    GetBugReport()								{ return m_prefs->BugReport; }
d778 1
a778 1
	CString	GetTxtEditor() const				        {return m_prefs->TxtEditor;}
d785 1
a785 1
	void	SetFakeListURL(CString url)					{m_sFakeListURL = url;}
d948 3
a950 3
	WINDOWPLACEMENT GetEmuleWindowPlacement()			{ return m_prefs->EmuleWindowPlacement; }
	void SetWindowLayout(WINDOWPLACEMENT in) 			{ m_prefs->EmuleWindowPlacement = in; }
	static int	GetRecommendedMaxConnections();
d967 2
a968 2
	ProxySettings GetProxy() const                      { ProxySettings Ret = m_prefs->proxy; return Ret; }
	void SetProxySettings(ProxySettings proxysettings)  { m_prefs->proxy = proxysettings; }
d976 4
a979 4
	CString GetMessageFilter()							{ return m_prefs->messageFilter; }
	void	SetMessageFilter(const CString& in)			{ m_prefs->messageFilter=in; }
	bool	ShowRatesOnTitle()							{ return m_prefs->showRatesInTitle; }
	void	SetRatesOnTitle(bool show) 					{ m_prefs->showRatesInTitle=show; }
d997 1
a997 1
	void	SetUseProxy(bool in)						{ m_prefs->proxy.m_bUseProxy=in;}
d999 1
a999 1
	void	SetProxyASCWOP(bool in)						{ m_bIsASCWOP=in;}
d1011 2
a1012 2
	CString	GetTemplate()								{ return CString(m_prefs->m_sTemplateFile);}
	void	SetTemplate(CString in)						{ sprintf(m_prefs->m_sTemplateFile,"%s",in);}
a1119 1
	Preferences_Struct_DONTUSE* m_prefs;
d1549 1
a1549 1
	CString statsExpandedTreeItems;
d1586 58
d1663 1
a1663 1
	void	SetAVEnabled (bool in)					{ m_bAVEnabled = in; }
d1665 1
a1665 1
	void	SetAVScanCompleted (bool in)			{ m_bAVScanCompleted = in; }
d1667 3
a1669 3
	void	SetAVPath( const CString& str)			{ m_strAVPath = str; }
	CString	GetAVParams () const					{ return m_strAVParams; }
	void	SetAVParams ( const CString& str)		{ m_strAVParams = str; }
@


1.178
log
@Final stage of MD5 changes (MobileMule code);
Removed some unused settings; Minor preferences storage reorganization.
@
text
@d1006 2
d1475 1
@


1.177
log
@Faster processing of ini-file settings and preferences values; MD5 optimization.
@
text
@a88 1
	byte	flatbar;
a90 1
	byte	globalsearch;
a116 4

	char		m_sMMPassword[256];
	bool		m_bMMEnabled;
	uint16		m_nMMPort;
d303 1
a303 1
	void	SetA4AFHash(const uchar* file_hash)			{ memcpy2(m_prefs->A4AF_file_hash, file_hash, sizeof(m_prefs->A4AF_file_hash)); }
d911 6
a916 6
	CString	GetMMPass()									{ return CString(m_prefs->m_sMMPassword); }
	void	SetMMPass(const CString &strNewPass)		{ byte abyteDigest[16]; sprintf(m_prefs->m_sMMPassword,"%s", HashToString(MD5Sum(strNewPass, abyteDigest))); }
	bool	IsMMServerEnabled()							{ return m_prefs->m_bMMEnabled; }
	void	SetMMIsEnabled(bool bEnable)				{ m_prefs->m_bMMEnabled=bEnable; }
	uint16	GetMMPort()									{ return m_prefs->m_nMMPort; }
	void	SetMMPort(uint16 uPort)						{ m_prefs->m_nMMPort=uPort; }
d1244 1
a1244 1
//	Web Server
d1499 6
@


1.176
log
@removed "leave q"
@
text
@d242 1
a242 1
	CString	GetUserNick()								{ return CString(m_sNick.Get()); }
d247 1
a247 1
		m_pNameTag = new CClientTag(CT_NAME, CString(m_sNick.Get()).GetBuffer());
d258 1
a258 1
	CString	GetIncomingDir()							{ return CString(m_sIncomingDir.Get()); }
d260 1
a260 1
	CString	GetTempDir()								{ return CString(m_sTempDir.Get()); }
d263 2
a264 2
	CString	GetVlcDir()  								{ return CString(m_sVlcDir.Get()); }
	CString	GetVideoPlayer()  							{ return CString(m_sVideoPlayer.Get()); }
d297 1
a297 1
	CString GetToolbarSettings() 						{ return CString(m_sToolbarSettings.Get()); }
d299 2
a300 2
	void	SetToolbarSettings(LPCTSTR in) 				{ m_sToolbarSettings.Put(in); }
	CString GetToolbarBitmapSettings() 					{ return CString(m_sToolbarBitmap.Get()); }
d302 1
a302 1
	CString GetToolbarBitmapFolderSettings() 			{ return CString(m_sToolbarBitmapFolder.Get()); }
d311 1
a311 1
	// WebServer
d314 4
a317 4
	CString	GetWSPass()									{ return CString(m_sWebPassword.Get()); }
	void	SetWSPass(const CString& strNewPass)		{ m_sWebPassword.Put(MD5Sum(strNewPass).GetHash()); }
	CString	GetWSLowPass()								{ return CString(m_sLowWebPassword.Get()); }
	void	SetWSLowPass(const CString& strNewPass)		{ m_sLowWebPassword.Put(MD5Sum(strNewPass).GetHash()); }
d619 2
a620 2
	enSeeShare CanSeeShares(void)						{ return m_nSeeShares.Get(); }
	void	SetCanSeeShares(enSeeShare iCan)			{ m_nSeeShares.Put(iCan); }
d663 1
a663 1
	CString GetNotifierWavSoundPath() 					{ return CString(m_sNotifierSoundFilePath.Get()); }
d666 1
a666 1
	CString	GetIRCNick()								{ return CString(m_sIRCNick.Get()); }
d668 1
a668 1
	CString	GetIRCServer()								{ return CString(m_sIRCServer.Get()); }
d672 1
a672 1
	CString	GetIRCChanNameFilter()						{ return CString(m_sIRCChanNameFilter.Get()); }
d678 1
a678 1
	CString	GetIrcPerformString()						{ return CString(m_sIRCPerformString.Get()); }
d780 1
a780 1
	CString	CommunityString()							{ return CString(m_sCommunityString.Get()); }
d806 1
a806 1
	CString	GetUsedFont()								{ return CString(m_sUsedFont.Get()); }
d810 2
a811 2
	enHashPriority	GetHashingPriority(void)			{ return m_HashingPriority.Get(); }
	void	SetHashingPriority(enHashPriority hashing)	{ m_HashingPriority.Put(hashing); }
d908 2
a909 2
	//enkeyDEV(kei-kun) -Messaging preferences-
	CString   GetAwayStateMessage()						{ return CString(m_sAwayStateMessage.Get()); }
d911 1
a911 1
	byte   GetAcceptMessagesFrom()						{ return m_nAcceptMessagesFrom; }
d913 1
a913 1
	bool    GetAwayState()								{ return m_nAwayState; }
d916 1
a916 1
	// mobileMule
d918 1
a918 1
	void	SetMMPass(CString strNewPass)				{ sprintf(m_prefs->m_sMMPassword,"%s",MD5Sum(strNewPass).GetHash().GetBuffer(0)); }
d928 1
a928 1
	CString GetFilenameCleanups()						{ return CString(m_sFilenameCleanups.Get()); }
d935 1
a935 1
	CString GetCommentFilter()							{ return CString(m_sCommentFilter.Get()); }
d950 1
a950 1
	CString GetSMTPServer()								{ return CString(m_sSMTPServer.Get()); }
d952 1
a952 1
	CString GetSMTPName()								{ return CString(m_sSMTPName.Get()); }
d954 1
a954 1
	CString GetSMTPFrom()								{ return CString(m_sSMTPFrom.Get()); }
d956 1
a956 1
	CString GetSMTPTo()									{ return CString(m_sSMTPTo.Get()); }
d958 1
a958 1
	CString GetSMTPUserName()							{ return CString(m_sSMTPUserName.Get()); }
d960 1
a960 1
	CString	GetSMTPPassword()							{ return CString(m_sSMTPPassword.Get()); }
d995 1
a995 1
	CString	GetBackupDir()								{ return CString(m_sBackupDir.Get()); }
d1001 1
a1001 1
	CString GetURLsForICC()								{ return CString(m_sURLsForICC.Get()); }
d1084 1
a1084 1
	CSecuredVar<enSeeShare>	m_nSeeShares;
d1201 1
a1201 1
	CSecuredVar<enHashPriority>	m_HashingPriority;
d1250 3
a1252 3
	// Web Server
	CSecuredVar<CString>	m_sWebPassword;
	CSecuredVar<CString>	m_sLowWebPassword;
@


1.175
log
@simplified code and removed some unneeded checks, added dynamic droplimit, added not to drop queuefull until asked twice, added preferences option with import of old ini parameter
@
text
@a554 4
	uint16	GetRemoteQueueLimit()						{ return m_nRQlimit; }
	void	SetRemoteQueueLimit(uint16 uVal)			{ m_nRQlimit = uVal; }
	bool	UseRemoteQueueLimit()						{ return m_bUseRQlimit; }
	void	UseRemoteQueueLimit(bool bit)				{ m_bUseRQlimit = bit; }
a1108 2
	bool					m_bUseRQlimit;
	uint16					m_nRQlimit;
@


1.174
log
@Fixed array boundary check added in the previous version.
@
text
@d559 2
d1115 1
@


1.173
log
@1) statistic for file priority
2) optimization in category processing
@
text
@a455 1

d457 1
a457 2
	uint64	GetUpDataByPriority(byte bytePrio)			{ if (bytePrio >= 0 && bytePrio <= 5) return sesUpDataPriority[bytePrio]; else return 0;}

@


1.172
log
@Possibility to backup .part.txtsrc files.
@
text
@d383 1
a383 1
	void	Add2SessionTransferData (byte uClientID, uint16 uClientPort, BOOL bFromPF, EnumTransferType eUpDown, uint32 bytes, BOOL bCommunity);
d456 5
d1389 3
@


1.171
log
@1) corrected default toolbar definition
2) improved processing of the username by anti-leecher feature
3) unified async GUI updade of Upload, Queue & Client lists
@
text
@d990 2
d1315 1
a1315 1
    //N@@boleo (Backup feature)
d1321 1
@


1.170
log
@Some changes...
@
text
@a26 2
const CString strDefaultToolbar = _T("0099010203040506079908");

d298 1
a696 4
	bool	GetUpdateQueueList()				        { return m_bUpdateQueueList; }
	void	SetUpdateQueueList(bool bEnabled)			{ m_bUpdateQueueList = bEnabled; }
	bool	GetUpdateKnownList()				        { return m_bUpdateKnownList; }
	void	SetUpdateKnownList(bool bEnabled)			{ m_bUpdateKnownList = bEnabled; }
a1173 2
	bool					m_bUpdateQueueList;
	bool					m_bUpdateKnownList;
@


1.169
log
@Removed AddDebugLogLine statusbar message option, added client transfer debug log option
@
text
@d346 2
a347 2
	bool	GetDisableRatingIcons()						{ return m_bDisableRatingIcons; }
	void	SetDisableRatingIcons(bool bEnable)		    { m_bDisableRatingIcons = bEnable; }
d1298 1
a1298 1
	bool					m_bDisableRatingIcons;
@


1.168
log
@Community statistics
@
text
@d287 12
a298 10
	uint32	GetMinAutoSourcesPerFile()						{ return m_nMinAutoSourcesPerFile; }
	void	SetMinAutoSourcesPerFile(uint32 nMinAuto)			{ m_nMinAutoSourcesPerFile = nMinAuto; }
	uint32	GetMaxAutoSourcesPerFile()						{ return m_nMaxAutoSourcesPerFile; }
	void	SetMaxAutoSourcesPerFile(uint32 nMaxAuto)			{ m_nMaxAutoSourcesPerFile = nMaxAuto; }
	uint32	GetMaxAutoSourcesTotal()						{ return m_nMaxAutoSourcesTotal; }
	void	SetMaxAutoSourcesTotal(uint32 nMaxAuto)			{ m_nMaxAutoSourcesTotal = nMaxAuto; }
	uint32	GetMaxAutoExchangeSources()						{ return m_nMaxAutoExchangeSources; }
	void	SetMaxAutoExchangeSources(uint32 nMaxAuto)			{ m_nMaxAutoExchangeSources = nMaxAuto; }
	bool	IsAutoSourcesLogEnabled()						{ return m_bAutoSourcesLogEnabled; }
	void	SetAutoSourcesLogEnabled(bool bAutoS)			{ m_bAutoSourcesLogEnabled = bAutoS; }
a889 1

d1155 1
a1279 1

@


1.167
log
@Updated tray dialog code from official v0.42g
@
text
@d382 1
a382 1
	void	Add2SessionTransferData ( byte uClientID , uint16 uClientPort , BOOL bFromPF, EnumTransferType eUpDown, uint32 bytes );
d456 3
a458 3
	uint64	GetUpTotalPortData()						{ return (GetCumUpDataPort_4662() +			GetCumUpDataPort_OTHER() );}
	uint64	GetCumUpDataPort_4662()						{ return (cumUpDataPort_4662 +		sesUpDataPort_4662 );}
	uint64	GetCumUpDataPort_OTHER()					{ return (cumUpDataPort_OTHER +		sesUpDataPort_OTHER );}
d460 1
a460 1
	uint64	GetUpSessionPortData()						{ return (sesUpDataPort_4662 +		sesUpDataPort_OTHER );}
d465 1
a465 1
	uint64	GetUpTotalDataFile()						{ return (GetCumUpData_File() +	GetCumUpData_PartFile() );}
d467 2
a468 1
	uint64	GetCumUpData_PartFile()						{ return (sesUpData_PartFile + sesUpData_PartFile );}
d474 10
d1403 8
@


1.166
log
@Added missed save of IRC channel list sort direction when sort settings aren't in use.
@
text
@d329 1
d1077 1
a1077 1
	bool					m_bMinToTray;
@


1.165
log
@Added option "Resume from other category when all done".
@
text
@d103 1
d112 1
@


1.164
log
@Removed Slow Completion setting.
@
text
@d279 2
d1132 1
@


1.163
log
@Support for external antivirus program + removed SUI preferences + minor changes
@
text
@a789 2
	bool	SlowComplete()								{ return m_bSlowComplete; }
	void	SetSlowComplete(uint16 bSlow)				{ m_bSlowComplete = bSlow; }
a1185 1
	bool					m_bSlowComplete;
@


1.162
log
@xrmb fix for inability to receive instant messages
@
text
@a987 1
	bool	IsSecureIdentEnabled()						{ return m_bUseSecureIdent;} // use m_pClientCreditList->CryptoAvailable() to check if crypting is really available and not this function
a1455 1
	bool	m_bUseSecureIdent;
d1479 4
d1500 9
@


1.161
log
@new FakeCheck autoupdate system
@
text
@a115 1
	uint16	maxmsgsessions;
a904 2
	uint16	GetMsgSessionsMax()							{ return m_prefs->maxmsgsessions;}

@


1.160
log
@minor changes (function renamings, unused typedef removal)
@
text
@d700 6
d1328 3
@


1.159
log
@Disable scheduled backup and backup on exit if a file corruption is detected on start + minor changes
@
text
@d872 2
a873 2
	bool	GetMlDonkeyCM()								{ return m_bMlDonkeyCM; }
	void	SetMlDonkeyCM(bool bEnable)					{ m_bMlDonkeyCM = bEnable; }
d875 1
a875 1
	bool	GetCMNotLog()								{ return m_bCMNotLog; }
d1148 1
a1148 1
	bool					m_bMlDonkeyCM;
@


1.158
log
@New option to disable round of sizes for files and transfers
@
text
@d965 1
a965 1
	bool	GetAutoBackup()								{ return m_bAutoBackup; }
@


1.157
log
@added Scheduled Backup feature
@
text
@d992 2
d1316 1
@


1.156
log
@minor changes (Partfile --> PartFile...)
@
text
@d981 4
d1310 2
@


1.155
log
@Fixed some changes
@
text
@d461 1
a461 1
	uint64	GetUpTotalDataFile()						{ return (GetCumUpData_File() +	GetCumUpData_Partfile() );}
d463 1
a463 1
	uint64	GetCumUpData_Partfile()						{ return (sesUpData_Partfile + sesUpData_Partfile );}
d465 1
a465 1
	uint64	GetUpSessionDataFile()						{ return (sesUpData_File + sesUpData_Partfile );}
d467 1
a467 1
	uint64	GetUpData_Partfile()						{ return sesUpData_Partfile;}
d1369 1
a1369 1
	uint64	cumUpData_Partfile;
d1373 1
a1373 1
	uint64	sesUpData_Partfile;
@


1.154
log
@added IP to Country from MorphXT (Please extract ip-to-country.rar in your config dir in order for this to work)
@
text
@d69 6
a74 6
	uint16	uploadColumnWidths[10];
	BOOL	uploadColumnHidden[10];
	INT		uploadColumnOrder[10];
	uint16	queueColumnWidths[13];
	BOOL	queueColumnHidden[13];
	INT		queueColumnOrder[13];
d81 3
a83 3
	uint16	serverColumnWidths[11];
	BOOL	serverColumnHidden[11];
	INT 	serverColumnOrder[11];
d87 3
a89 3
	uint16	clientListColumnWidths[8];
	BOOL	clientListColumnHidden[8];
	INT 	clientListColumnOrder[8];
@


1.153
log
@added auto-update for ipfilter
@
text
@d618 2
d1165 1
@


1.152
log
@auto max sources per file
@
text
@d563 1
a563 1
	bool	FilterBadIPs()								{ return m_bFilterBadIP; }
d565 1
a565 1
	bool	FilterServersByIP()							{ return m_bFilterServersByIP; }
d883 2
a884 1
	int		GetIPFilterLevel()							{ return 127; }
d1457 6
d1469 1
a1469 1
	bool	IsServerAuxPortUsed()					{ return m_bUseServerAuxPort; }
d1471 9
@


1.151
log
@Fixed shared directory list corruption caused by asynchronous access (bug #502);
Fixed shared directory list processing to eliminate double list entries (that can be caused by case sensitive compares, by the bug on file completion after file destination change, or by initial shareddir.dat values).
@
text
@d282 12
d1122 6
@


1.150
log
@added auxiliary port support from KuSh (commited with eklmn's authorization)
@
text
@a866 1
	CStringList m_sharedDirList;
d997 5
d1406 1
a1406 1
    uint16	cumSharedMostFilesShared;
d1423 1
a1423 1
	bool 	m_iPreviewSmallBlocks;
d1432 6
@


1.149
log
@Updated preferences dialogs.
Added upload log file (should be tested).
@
text
@d1426 2
d1433 3
@


1.148
log
@sorry by manual merge i forgot something :)
@
text
@d758 1
a758 1
	void 	SetPriorityLow(uint16 iPrio)					{ m_nPriorityLow = iPrio; }
d763 2
d1150 1
@


1.147
log
@speed optimization (caching of 2 tags with constant value from hello packet)
@
text
@d1425 3
@


1.146
log
@Added optional confirmations for disconnect and friend deletion
@
text
@d244 6
a249 1
	void    SetUserNick(const CString& strNewNick)		{ m_sNick.Put(strNewNick); }
@


1.145
log
@added "Watch clipboard for ed2k links"
@
text
@d528 4
a531 4
	uint16	GetStatsInterval() 							{ return m_nStatsInterval; }
	void	SetStatsInterval(uint16 in) 				{ m_nStatsInterval = in; }
	uint16  GetDetailColumnWidth()						{ return m_nDetailColumnWidth; }
	void    SetDetailColumnWidth(uint16 in)				{ m_nDetailColumnWidth = in; }
d533 2
a534 2
	uint64  GetTotalDownloaded()						{ return m_nTotalDownloadedBytes.Get(); }
	void	Add2TotalUploaded(uint64 in) 				{ uint64 nSet = m_nTotalUploadedBytes.Get(); nSet += in; m_nTotalUploadedBytes.Put(nSet); }
d539 2
d542 2
d547 1
a547 1
	void    SetFilterBadIPs(bool bFilter)				{ m_bFilterBadIP = bFilter; }
d550 1
a550 1
	bool	IsOnlineSignatureEnabled()  				{ return m_bOnlineSig; }
d1042 2
@


1.144
log
@Changed some code by other devs
@
text
@d981 3
d1281 2
@


1.143
log
@Changed uint32 to unsigned long from unsigned int and made necessary code changes. Got rid of _unsigned_ types int8,int16,int32,int64. Eliminated uint8 to avoid confusion. Use "byte".
@
text
@d697 2
d1163 1
@


1.142
log
@Formatting, name changes and deleting spaces and tabs at end of lines
@
text
@d33 1
a33 1
	int8	version;
d66 1
a66 1
	int16	downloadColumnWidths[21];
d69 1
a69 1
	int16	uploadColumnWidths[10];
d72 1
a72 1
	int16	queueColumnWidths[13];
d75 1
a75 1
	int16	searchColumnWidths[6];
d78 1
a78 1
	int16	sharedColumnWidths[12];
d81 1
a81 1
	int16	serverColumnWidths[11];
d84 1
a84 1
	int16	ircColumnWidths[3];
d87 1
a87 1
	int16	clientListColumnWidths[8];
d91 1
a91 1
	uint8	flatbar;
d94 1
a94 1
	int8	globalsearch;
d127 1
a127 1
	int8	version;
d133 3
a135 3
	int8	reconnect;
	int8	deadserver;
	int8	scorsystem;
d138 3
a140 3
	int8	autoserverlist;
	int8	updatenotify;
	int8	mintotray;
d142 2
a143 2
	int8	autoconnect;
	int8	addServersFromConn;
d147 1
a147 1
	int8	version;
d153 2
a154 2
	int8	reconnect;
	int8	deadserver;
d156 1
a156 1
	int8	scorsystem;
d159 3
a161 3
	int8	autoserverlist;
	int8	updatenotify;
	int8	mintotray;
d163 7
a169 7
	int8	autoconnect;
	int8	addServersFromConn;
	int8	addserversfromclient;
	int16	maxsourceperfile;
	int16	trafficOMeterInterval;
	int32   totalDownloaded;
	int32	totalUploaded;
d172 2
a173 2
	uint8	beepOnError;
	uint8	confirmExit;
d177 2
a178 2
	uint8	splashscreen;
	uint8	filerBadIP;
d182 1
a182 1
	int8	version;
d188 3
a190 3
	int8	reconnect;
	int8	deadserver;
	int8	scorsystem;
d193 3
a195 3
	int8	autoserverlist;
	int8	updatenotify;
	int8	mintotray;
d197 7
a203 7
	int8	autoconnect;
	int8	addServersFromConn;
	int8	addserversfromclient;
	int16	maxsourceperfile;
	int16	trafficOMeterInterval;
	int32   totalDownloaded;	// outdated
	int32	totalUploaded;		// outdated
d206 2
a207 2
	uint8	beepOnError;
	uint8	confirmExit;
d211 4
a214 4
	uint8	splashscreen;
	uint8	filerBadIP;
	int64   totalDownloadedBytes;
	int64	totalUploadedBytes;
d237 2
a238 2
	int8	Score()										{ return m_nScoreSystem; }
	void	SetScore(int8 iScore)						{ m_nScoreSystem = iScore; }
d241 2
a242 2
	int8	DeadServer()								{ return m_nDeadServer; }
	void	SetDeadServer(int8 iDead)					{ m_nDeadServer = iDead; }
d283 2
a284 2
	int8	GetToolbarLabelSettings()					{ return m_nToolbarLabels; }
	void	SetToolbarLabelSettings(int8 settings)		{ m_nToolbarLabels = settings; }
d315 2
a316 2
	uint8	BadClientMinRequestNum()					{ return m_nBadClientBan; }
	void	SetBadClientMinRequestNum(uint8 uVal)		{ m_nBadClientBan = uVal; }
d361 1
a361 1
	void	Add2SessionTransferData ( uint8 uClientID , uint16 uClientPort , BOOL bFromPF, EnumTransferType eUpDown, uint32 bytes );
d517 3
a519 3
	int16	GetQueueSize()								{ return m_nQueueSize; }
	void	SetQueueSize(int16 iSize)					{ m_nQueueSize = iSize; }
	int16	GetRemoteQueueLimit()						{ return m_nRQlimit; }
d583 2
a584 2
	int8	GetToolTipDelay(void)						{ return m_nTooltipDelayTime; }
	void	SetToolTipDelay(int8 iDelay)				{ m_nTooltipDelayTime = iDelay; }
d588 2
a589 2
	int8    GetSplitterbarPosition()					{ return m_nSplitterBarPosition; }
	void	SetSplitterbarPosition(int8 pos) 			{ m_nSplitterBarPosition = pos; }
d592 2
a593 2
	int8	GetStatsAverageMinutes()					{ return m_nStatsAverageMinutes; }
	void	SetStatsAverageMinutes(int8 in)				{ m_nStatsAverageMinutes = in; }
d653 2
a654 2
	uint8	GetSmartIdState()							{ return m_nSmartIdState; }
	void	SetSmartIdState(uint8 in_smartidstate)		{ m_nSmartIdState = in_smartidstate; }
d683 3
a685 3
	int8	UseFlatBar()								{ return m_nDepth3D==0; }
	int8	Get3DDepth()                                { return m_nDepth3D; }
	void	Set3DDepth(int8 iStyle)                      { m_nDepth3D = iStyle; }
d691 2
a692 2
	uint8	GetGraphRatio()								{ return m_nGraphRatio; }
	void	SetGraphRatio(uint8 iNum)					{ m_nGraphRatio = iNum; }
d697 12
a708 12
	int8	GetServerSortCol()							{ return m_nServerSortCol; }
	void	SetServerSortCol(int8 iCol)					{ m_nServerSortCol = iCol; }
	int8	GetUploadSortCol()							{ return m_nUploadSortCol; }
	void	SetUploadSortCol(int8 iSortCol)				{ m_nUploadSortCol = iSortCol; }
	int8	GetQueueSortCol()							{ return m_nQueueSortCol; }
	void	SetQueueSortCol(int8 iSortCol)				{ m_nQueueSortCol = iSortCol; }
	int8	GetSearchSortCol()							{ return m_nSearchSortCol; }
	void	SetSearchSortCol(int8 iSortCol)				{ m_nSearchSortCol = iSortCol; }
	int8	GetIrcSortCol()								{ return m_nIRCSortCol; }
	void	SetIrcSortCol(int8 iSortCol)				{ m_nIRCSortCol = iSortCol; }
	int8	GetClientListSortCol()						{ return m_nClientListSortCol; }
	void	SetClientListSortCol(int8 iSortCol)			{ m_nClientListSortCol = iSortCol; }
d711 6
a716 6
	int8	GetDownloadSortCol()						{ return m_nDownloadSortCol; }
	void	SetDownloadSortCol(int8 iSortCol)			{ m_nDownloadSortCol = iSortCol; }
	int8	GetSrcSortCol1()							{ return m_nSrcSortCol1; }
	void	SetSrcSortCol1(int8 iSortCol)				{ m_nSrcSortCol1 = iSortCol; }
	int8	GetSrcSortCol2()							{ return m_nSrcSortCol2; }
	void	SetSrcSortCol2(int8 iSortCol)				{ m_nSrcSortCol2 = iSortCol; }
d728 4
a731 4
	uint8	GetUpbarStyle()								{ return m_nUpbarPartTraffic; }
	void	SetUpbarStyle(uint8 uStyle)					{ m_nUpbarPartTraffic = uStyle; }
	uint8	GetUpbarColor()								{ return m_nUpbarColorPartTraffic; }
	void	SetUpbarColor(uint8 uColor)					{ m_nUpbarColorPartTraffic = uColor; }
d744 4
a747 4
	int16 	PriorityHigh()								{ return m_nPriorityHigh; }
	void 	SetPriorityHigh(int16 iPrio)				{ m_nPriorityHigh = iPrio; }
	int16 	PriorityLow()								{ return m_nPriorityLow; }
	void 	SetPriorityLow(int16 iPrio)					{ m_nPriorityLow = iPrio; }
d764 2
a765 2
	uint8	GetFontSize()								{ return m_nFontSize; }
	void	SetFontSize(uint8 size)						{ m_nFontSize = size; }
d839 2
a840 2
	int8 GetWSLoginAttemptsAllowed()					{ return m_nWebLoginAttemptsAllowed; }
	void SetWSLoginAttemptsAllowed(int8 n)				{ m_nWebLoginAttemptsAllowed = n; }
d868 2
a869 2
	uint8   GetAcceptMessagesFrom()						{ return m_nAcceptMessagesFrom; }
	void	SetAcceptMessagesFrom(uint8 in)				{ m_nAcceptMessagesFrom = in; }
d1017 1
a1017 1
	uint8					m_nGraphRatio;
d1020 2
a1021 2
	int8					m_nDeadServer;
	int8					m_nScoreSystem;
d1091 1
a1091 1
	uint8					m_nBadClientBan;
d1106 1
a1106 1
	int16					m_nQueueSize;
d1109 1
a1109 1
	uint8					m_nSmartIdState;
d1116 1
a1116 1
	int8					m_nTooltipDelayTime;
d1118 1
a1118 1
	int8					m_nSplitterBarPosition;
d1120 1
a1120 1
	int8					m_nStatsAverageMinutes;
d1128 2
a1129 2
	int16					m_nPriorityHigh;
	int16					m_nPriorityLow;
d1155 1
a1155 1
	uint8					m_nFontSize;
d1161 6
a1166 6
	int8					m_nServerSortCol;
	int8					m_nUploadSortCol;
	int8					m_nQueueSortCol;
	int8					m_nSearchSortCol;
	int8					m_nIRCSortCol;
	int8					m_nClientListSortCol;
d1168 3
a1170 3
	int8					m_nDownloadSortCol;
	int8					m_nSrcSortCol1;
	int8					m_nSrcSortCol2;
d1194 2
a1195 2
	int8					m_nWebLoginAttemptsAllowed;
	uint8 					m_nWebTempDisableLogin;
d1199 2
a1200 2
	uint8					m_nUpbarPartTraffic;		// 0=one info 1=2 infos 2=3infos
	uint8					m_nUpbarColorPartTraffic;	// 0=rainbow style 1=more rainbow 2=downloadlist-like 3=girlie
d1213 1
a1213 1
	int8					m_nToolbarLabels;
d1216 2
a1217 2
	uint8					m_nAcceptMessagesFrom;
	int8					m_nAwayState;
d1389 1
a1389 1
	uint8	statsConnectionsGraphRatio; // This will store the divisor, i.e. for 1:3 it will be 3, for 1:20 it will be 20.
@


1.141
log
@Formatting, comments, and name changes.
@
text
@d90 1
a90 1
	
d112 1
a112 1
	
d247 2
a248 2
	
	uint16	GetListenPort()								{ if(m_bUseProxyListenPort) return m_nListenPort; else return GetPort(); }
d251 1
a251 1
	
d279 1
a279 1
	CString GetToolbarBitmapSettings() 					{ return CString(m_sToolbarBitmap.Get()); } 
d281 1
a281 1
	CString GetToolbarBitmapFolderSettings() 			{ return CString(m_sToolbarBitmapFolder.Get()); } 
d417 1
a417 1
	uint64	GetUpTotalClientData()						{	uint64 transferred_data = 0; 
d423 1
a423 1
															return transferred_data; 
d428 1
a428 1
	uint64	GetUpSessionClientData()					{	uint64 transferred_data = 0; 
d430 1
a430 1
															return transferred_data; 
d433 1
a433 1
	
d453 1
a453 1
	uint64	GetDownTotalClientData()					{	uint64 transferred_data = 0; 
d459 1
a459 1
															return transferred_data; 
d462 1
a462 1
	
d464 1
a464 1
	uint64	GetDownSessionClientData()					{	uint64 transferred_data = 0; 
d466 1
a466 1
															return transferred_data; 
d474 1
a474 1
	
d523 1
a523 1
	
d672 1
a672 1
	void	SetFakesDatVersion(uint32 version)			{m_nFakesDatVersion = version;} 
d686 2
a687 2
	bool    AutoConnectStaticOnly()                   	{return m_bAutoConnectStaticOnly;}	
	void    SetAutoConnectStaticOnly(bool bEnabled)		{m_bAutoConnectStaticOnly = bEnabled;}	
d717 1
a717 1
	
d847 2
a848 2
	
	bool	GetCMNotLog()								{ return m_bCMNotLog; }	
d1121 1
a1121 1
	bool					m_bShowToolbarSpeedMeter; 
d1143 1
a1143 1
	bool					m_bUseLogNotifier;	
d1277 1
a1277 1
	
d1396 1
a1396 1
	
@


1.140
log
@changed A4AF sources count display as an option + minor cosmetic changes
@
text
@d1039 1
a1039 1
	int					m_nDepth3D;
d1056 1
a1056 1
	int					m_nSearchMethod;
d1059 1
a1059 1
	int					m_nMainProcessPriority;
@


1.139
log
@smartfilter preferences "core"
@
text
@d772 3
a774 1
	int		GetMethod()									{ return m_nSearchMethod; }
d780 1
a780 1
	int		GetMainProcessPriority()					{ return m_nMainProcessPriority; }
d1039 1
a1039 1
	int						m_nDepth3D;
d1055 2
a1056 1
	int						m_nSearchMethod;
d1059 1
a1059 1
	int						m_nMainProcessPriority;
@


1.138
log
@added 'auto-clear completed files' option
@
text
@d972 5
d1269 3
@


1.137
log
@Changed the way the preference for update of upload lists is handled
@
text
@d248 1
a248 2
    //Maverick
    uint16	GetListenPort()								{ if(m_bUseProxyListenPort) return m_nListenPort; else return GetPort(); }
a264 1
	// Added by Tarod
d275 2
d1079 1
d1207 1
a1207 1
	//START enkeyDEV(kei-kun) -Messaging preferences-
@


1.136
log
@Ops! Don't tell morevit...
@
text
@d660 2
d1103 1
@


1.135
log
@Keep-Alive for server connections
@
text
@d967 2
a968 2
	DWORD	GetServerKeepAliveTimeout() 				{ return m_nServerKeepAliveTimeout; }
	void	SetServerKeepAliveTimeout(DWORD value) 		{ m_nServerKeepAliveTimeout = value; }
d1383 1
a1383 1
	DWORD	m_nServerKeepAliveTimeout;
@


1.134
log
@Minor correction
@
text
@d964 5
a968 2
	short GetShortcutCode(int iIndex)					{ return iIndex >= 0 ? m_anShortcutCode[iIndex] : /*** should never happen ***/ static_cast<short>(VK_RETURN); }
	void  SetShortcutCode(short nCode, int iIndex)		{ if (iIndex >= 0) m_anShortcutCode[iIndex] = nCode; }
d1383 1
@


1.133
log
@Change to shortcut management code (it's easier to add an action now) / Added a lot of actions to shortcut management / Added some keys to shortcut management
@
text
@d965 1
a965 1
	void  SetShortcutCode(short nCode, int iIndex)		{ iIndex >= 0 ? m_anShortcutCode[iIndex] = nCode : /*** should never happen ***/ m_anShortcutCode[iIndex] = static_cast<short>(VK_RETURN); }
@


1.132
log
@Some minor fixes and unused preferences removed
@
text
@d25 1
d964 2
a965 35
	short GetGeneralMinimizeWindowToTrayShortcutCode(void)	{ return m_nGeneralMinimizeWindowToTrayShortcut; }
	short GetGeneralShowServerWndShortcutCode(void)			{ return m_nGeneralShowServerWndShortcut; }
	short GetGeneralShowTransferWndShortcutCode(void)		{ return m_nGeneralShowTransferWndShortcut; }
	short GetGeneralShowSearchWndShortcutCode(void)			{ return m_nGeneralShowSearchWndShortcut; }
	short GetGeneralShowSharedFilesWndShortcutCode(void)	{ return m_nGeneralShowSharedFilesWndShortcut; }
	short GetGeneralShowChatWndShortcutCode(void)			{ return m_nGeneralShowChatWndShortcut; }
	short GetGeneralShowIRCWndShortcutCode(void)			{ return m_nGeneralShowIRCWndShortcut; }
	short GetGeneralShowStatisticsWndShortcutCode(void)		{ return m_nGeneralShowStatisticsWndShortcut; }
	short GetGeneralShowPreferencesWndShortcutCode(void)	{ return m_nGeneralShowPreferencesWndShortcut; }
	short GetDownloadViewFileCommentsShortcutCode(void)		{ return m_nDownloadViewFileCommentsShortcut; }
	short GetDownloadViewFileDetailsShortcutCode(void)		{ return m_nDownloadViewFileDetailsShortcut; }
	short GetDownloadClearCompletedFilesShortcutCode(void)	{ return m_nDownloadClearCompletedFilesShortcut; }
	short GetUploadViewClientDetailsShortcutCode(void)		{ return m_nUploadViewClientDetailsShortcut; }
	short GetUploadAddClientToFriendsShortcutCode(void)		{ return m_nUploadAddClientToFriendsShortcut; }
	short GetUploadSendMessageClientShortcutCode(void)		{ return m_nUploadSendMessageClientShortcut; }
	short GetUploadViewClientFilesShortcutCode(void)		{ return m_nUploadViewClientFilesShortcut; }
	short GetShareEditFileCommentsShortcutCode(void)		{ return m_nShareEditFileCommentsShortcut; }

	void SetGeneralMinimizeWindowToTrayShortcutCode(short nCode)	{ m_nGeneralMinimizeWindowToTrayShortcut = nCode; }
	void SetGeneralShowServerWndShortcutCode(short nCode)			{ m_nGeneralShowServerWndShortcut = nCode; }
	void SetGeneralShowTransferWndShortcutCode(short nCode)			{ m_nGeneralShowTransferWndShortcut = nCode; }
	void SetGeneralShowSearchWndShortcutCode(short nCode)			{ m_nGeneralShowSearchWndShortcut = nCode; }
	void SetGeneralShowSharedFilesWndShortcutCode(short nCode)		{ m_nGeneralShowSharedFilesWndShortcut = nCode; }
	void SetGeneralShowChatWndShortcutCode(short nCode)				{ m_nGeneralShowChatWndShortcut = nCode; }
	void SetGeneralShowIRCWndShortcutCode(short nCode)				{ m_nGeneralShowIRCWndShortcut = nCode; }
	void SetGeneralShowStatisticsWndShortcutCode(short nCode)		{ m_nGeneralShowStatisticsWndShortcut = nCode; }
	void SetGeneralShowPreferencesWndShortcutCode(short nCode)		{ m_nGeneralShowPreferencesWndShortcut = nCode; }
	void SetDownloadViewFileCommentsShortcutCode(short nCode)		{ m_nDownloadViewFileCommentsShortcut = nCode; }
	void SetDownloadViewFileDetailsShortcutCode(short nCode)		{ m_nDownloadViewFileDetailsShortcut = nCode; }
	void SetDownloadClearCompletedFilesShortcutCode(short nCode)	{ m_nDownloadClearCompletedFilesShortcut = nCode; }
	void SetUploadViewClientDetailsShortcutCode(short nCode)		{ m_nUploadViewClientDetailsShortcut = nCode; }
	void SetUploadAddClientToFriendsShortcutCode(short nCode)		{ m_nUploadAddClientToFriendsShortcut = nCode; }
	void SetUploadSendMessageClientShortcutCode(short nCode)		{ m_nUploadSendMessageClientShortcut = nCode; }
	void SetUploadViewClientFilesShortcutCode(short nCode)			{ m_nUploadViewClientFilesShortcut = nCode; }
	void SetShareEditFileCommentsShortcutCode(short nCode)			{ m_nShareEditFileCommentsShortcut = nCode; }
d1383 1
a1383 17
	short m_nGeneralMinimizeWindowToTrayShortcut;
	short m_nGeneralShowServerWndShortcut;
	short m_nGeneralShowTransferWndShortcut;
	short m_nGeneralShowSearchWndShortcut;
	short m_nGeneralShowSharedFilesWndShortcut;
	short m_nGeneralShowChatWndShortcut;
	short m_nGeneralShowIRCWndShortcut;
	short m_nGeneralShowStatisticsWndShortcut;
	short m_nGeneralShowPreferencesWndShortcut;
	short m_nDownloadViewFileCommentsShortcut;
	short m_nDownloadViewFileDetailsShortcut;
	short m_nDownloadClearCompletedFilesShortcut;
	short m_nUploadViewClientDetailsShortcut;
	short m_nUploadAddClientToFriendsShortcut;
	short m_nUploadSendMessageClientShortcut;
	short m_nUploadViewClientFilesShortcut;
	short m_nShareEditFileCommentsShortcut;
@


1.131
log
@Auto-check every 12 hours + added CPU type to stats
@
text
@d77 1
a77 1
	int16	sharedColumnWidths[12];	// netwolf: complete sources (zegzav) 13.05.03
d89 1
a89 1

a90 1

a91 2

	// Tarod
d93 1
a94 3
	int8	globalsearch; // Barry

	// Barry - Provide a mechanism for all tables to store/retrieve sort order
d117 3
a119 3
	char	m_sTemplateFile[MAX_PATH];	// netwolf: WS template path
	ProxySettings proxy; // deadlake PROXYSUPPORT
	// mobilemule
a227 1
	// Download Categories (Ornis)
d259 1
a259 1
	CString	GetVlcDir()  								{ return CString(m_sVlcDir.Get()); }		//Cax2 - keep for compatibility in 1a...
a269 1
//	bool	ReconnectLowID() 							{ return m_prefs->reconnectlowid;}
d278 4
a281 4
	CString GetToolbarBitmapSettings() 					{ return CString(m_sToolbarBitmap.Get()); } // reCDVst
	void	SetToolbarBitmapSettings(const CString& path) { m_sToolbarBitmap.Put(path); } // reCDVst
	CString GetToolbarBitmapFolderSettings() 			{ return CString(m_sToolbarBitmapFolder.Get()); } // reCDVst
	void	SetToolbarBitmapFolderSettings(const CString& path){ m_sToolbarBitmapFolder.Put(path); } // reCDVst
d318 1
a318 1
	// DbT:BanEnDisable
d321 1
a321 1
	// DbT:End
a324 1
	// SLS
d480 6
a485 6
	double		GetConnAvgDownRate()					{ return cumConnAvgDownRate;}
	double		GetConnMaxAvgDownRate()					{ return cumConnMaxAvgDownRate;}
	double		GetConnMaxDownRate()					{ return cumConnMaxDownRate;}
	double		GetConnAvgUpRate()						{ return cumConnAvgUpRate;}
	double		GetConnMaxAvgUpRate()					{ return cumConnMaxAvgUpRate;}
	double		GetConnMaxUpRate()						{ return cumConnMaxUpRate;}
d520 1
a520 1
	bool	UseRemoteQueueLimit()						{ return m_bUseRQlimit; }		//Cax2 23/02/03
a528 1
	uint16  GetStatsColumnWidth()						{ return m_nStatsColumnWidth; }
a529 1
	void    SetStatsColumnWidth(uint16 in)				{ m_nStatsColumnWidth = in; }
a530 2
	CString	GetStatsListExpanded()						{ return CString(m_sStatsListExpanded.Get()); }
	void	SetStatsListExpanded(const CString& in)		{ m_sStatsListExpanded.Put(in); }
a569 1
	// Barry - Provide a mechanism for all tables to store/retrieve sort order
a667 1
	//FakeCheck
a674 1
	//AutoCheck for new version
a679 1
	// Barry
a682 1
//	bool	AddNewFilesPaused()                         {CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return m_prefs->addnewfilespaused;}
a730 1
	// DonGato
a814 1
	// quick-speed changer [xrmb]
a818 1
	// LANCAST (moosetea) - Get/Set Properties
a829 1
	//Johnny-B
a835 1
	//End Johnny-B
a836 1
	void	LoadServerlistAddresses() ; // Tarod (read addresses.dat every time)
d838 2
a839 1
	// Maverick
a842 1
	// netwolf
d850 1
a850 1
	CStringList m_tempDirList;	// InterCeptor (multiple tempdirs)
d860 1
a860 1
	//START enkeyDEV(kei-kun) -Messaging preferences-
a866 1
	//END enkeyDEV(kei-kun) -Messaging preferences-
a881 1
	//SyruS: cleanup
a888 1
	//(SyruS) netwolf commentfilter
a894 1
	// DonGato: Show Average DataRate
a897 1
	// DonGato: Limitless Download
a900 1
	// DonGato: Show File Type Icon
a903 1
	//DonGato: SMTP
a922 1
	//DonGato: View Transferred on Completed column
d929 2
a930 2
	bool	ShowCatTabInfo() const					{ return m_bShowCatTabInfo; }
	void	ShowCatTabInfo(bool in)					{ m_bShowCatTabInfo=in; }
d1062 1
a1062 3
	uint16					m_nStatsColumnWidth;
	uint16					m_nDetailColumnWidth;		//Cax2 
	CSecuredVar<CString>	m_sStatsListExpanded;
d1067 1
a1067 1
	CSecuredVar<CString>	m_sVideoPlayer;		//Cax2 import from official client.
d1071 1
a1071 1
	bool					m_bUseRQlimit;	//Cax2 change
d1111 1
a1111 1
	bool					m_bBanEnabled; 	// DbT:BanEnDisable
a1209 1
	//Johnny-B
a1212 1
	//End Johnny-B
d1244 1
a1244 1
	CSecuredVar<CString>	m_sCommentFilter;	//(SyruS) netwolf commentfilter
@


1.130
log
@Ability to turn off auto-check for new version
@
text
@d692 2
d1322 1
@


1.129
log
@Various fixes for Interim beta2 reported bugs
@
text
@d689 4
d1317 3
@


1.128
log
@Formatting, comments, and name changes.
@
text
@d1024 3
d1030 1
a1045 2
	void LoadSharedDirs();
	void LoadTempDirs();
@


1.127
log
@*** empty log message ***
@
text
@a987 1
	// DropF START - Keyboard Shortcuts
a1022 1
	// DropF END - Keyboard Shortcuts
a1437 1
	// DropF START - Keyboard Shortcuts
a1454 1
	// DropF END - Keyboard Shortcuts
@


1.126
log
@Formatting, comments, and name changes.
@
text
@d988 38
d1439 20
@


1.125
log
@Formatting, comments, and name changes.
float => double conversion
@
text
@d40 1
a40 1
	uint16		m_nPort;
d250 2
a251 2
	uint16	GetPort()									{ return m_nPort; }
	void	SetPort(uint16 uPort)						{ m_nPort = uPort; }
d1058 1
a1058 1
	uint16					m_nPort;
@


1.124
log
@Somebody forgot to update the available columns for Search window
@
text
@d355 5
a359 5
	void	Add2ConnMaxAvgDownRate(float in)			{ cumConnMaxAvgDownRate = in; }
	void	Add2ConnMaxDownRate(float in)				{ cumConnMaxDownRate = in; }
	void	Add2ConnAvgUpRate(float in)					{ cumConnAvgUpRate = in; }
	void	Add2ConnMaxAvgUpRate(float in)				{ cumConnMaxAvgUpRate = in; }
	void	Add2ConnMaxUpRate(float in)					{ cumConnMaxUpRate = in; }
d488 6
a493 6
	float		GetConnAvgDownRate()					{ return cumConnAvgDownRate;}
	float		GetConnMaxAvgDownRate()					{ return cumConnMaxAvgDownRate;}
	float		GetConnMaxDownRate()					{ return cumConnMaxDownRate;}
	float		GetConnAvgUpRate()						{ return cumConnAvgUpRate;}
	float		GetConnMaxAvgUpRate()					{ return cumConnMaxAvgUpRate;}
	float		GetConnMaxUpRate()						{ return cumConnMaxUpRate;}
d1359 6
a1364 6
	float	cumConnAvgDownRate;
	float	cumConnMaxAvgDownRate;
	float	cumConnMaxDownRate;
	float	cumConnAvgUpRate;
	float	cumConnMaxAvgUpRate;
	float	cumConnMaxUpRate;
@


1.123
log
@Removed NNS feature and changed SLS
@
text
@d74 3
a76 3
	int16	searchColumnWidths[5];
	BOOL	searchColumnHidden[5];
	INT		searchColumnOrder[5];
@


1.122
log
@Formatting, comments, and name changes.
... and a few bug fixes.
@
text
@d332 1
a332 3
	// reCDVst (Load/Save Sources settings)
	uint32	RestoreSourcesTime()						{ return m_nSLSRestoreSourcesTime; }
	void	SetRestoreSourcesTime(uint32 uTime)			{ m_nSLSRestoreSourcesTime = uTime; }
a1108 1
	uint32					m_nSLSRestoreSourcesTime;
@


1.121
log
@no message
@
text
@d258 2
a259 2
	uint16	GetUDPPort()								{ return m_nUDPPort; }
	void	SetUDPPort(uint16 uPort)					{ m_nUDPPort = uPort; }
d1061 1
a1061 1
	uint16					m_nUDPPort;
@


1.120
log
@Formatting, comments, and name changes.
Removed #includes for "memcpy_amd.h".
@
text
@d101 1
d109 1
d224 1
a224 1
	enum EnumTable {TABLE_DOWNLOAD, TABLE_UPLOAD, TABLE_QUEUE, TABLE_SEARCH, TABLE_SHARED, TABLE_SERVER, TABLE_IRC, TABLE_CLIENTLIST};
@


1.119
log
@Reinstated ShowFileStatusIcons
@
text
@a23 1
#include "memcpy_amd.h"
@


1.118
log
@FakeCheck for Search Result and Download List (Check and Report ... made by milobac ... merged by DropF ... tested by n@@boleo and me)
@
text
@d977 2
d1270 1
a1270 1

d1274 2
a1275 2
	uint32	m_nFakesDatVersion;
	bool	m_bUpdateFakeStartup;
@


1.117
log
@Removed option to disable File Status icons
Added old actions to new File Status icons
Removed spamming log from Source Saver
Removed old non used icons from resources
Updated +/- icons with Psy suggestion
@
text
@d682 8
d1270 5
@


1.116
log
@Formatting, comments, and name changes.
@
text
@a235 2
//	CString	GetDateTimeFormat()							{ return m_sDateTimeFormat;}

a969 3

	bool	ShowFullFileStatusIcons()					{ return m_bShowFullFileStatusIcons; }
	void	SetShowFullFileStatusIcons(bool in)			{ m_bShowFullFileStatusIcons = in; }
a1260 1
	bool					m_bShowFullFileStatusIcons;
a1386 1
//	CSecuredVar<CString>	m_sDateTimeFormat;
@


1.115
log
@Formatting, comments, and name changes.
@
text
@d31 2
a32 1
struct Preferences_Ext_Struct{
d37 10
a46 9
// Maverick
struct ProxySettings{
	uint16 type;
	uint16 port;
	CString name;
	CString user;
	CString password;
	bool EnablePassword;
	bool UseProxy;
d721 2
a722 2
	void	SetMaxDownloadConperFive(int in)			{ m_nMaxConperFive = in; }
	uint16	GetMaxConperFive()							{ return m_nMaxConperFive; }
d891 1
a891 1
	void	SetUseProxy(bool in)						{ m_prefs->proxy.UseProxy=in;}
d1116 1
a1116 1
	uint16					m_nMaxConperFive;
@


1.114
log
@Commented old code (let me known if I can remove it)
@
text
@d234 1
a234 1
	//CString	GetDateTimeFormat()							{ return m_sDateTimeFormat;}
d1391 1
a1391 1
	//CSecuredVar<CString>	m_sDateTimeFormat;
@


1.113
log
@URLs for IRC configuration in GUI
@
text
@d234 1
a234 1
	CString	GetDateTimeFormat()							{ return m_sDateTimeFormat;}
d1391 1
a1391 1
	CSecuredVar<CString>	m_sDateTimeFormat;
@


1.112
log
@Official code merge (katsyonak)
@
text
@d969 1
@


1.111
log
@Added download list columns for average speed, averaged time remaining, ETA, and averaged ETA. Renamed "Time" column to "Remaining Time".
@
text
@d978 3
d1388 2
@


1.110
log
@Customization for Scan Filter.
Fix for preferences toolbar button (take care when you do code renaming to keep the correct values)
@
text
@d64 3
a66 3
	int16	downloadColumnWidths[17];
	BOOL	downloadColumnHidden[17];
	INT		downloadColumnOrder[17];
@


1.109
log
@Completed statistics fix (now new values stored in preferences)
@
text
@d974 3
a976 1
	uint16	GetMaxChatHistoryLines()					{ return 10;}
d1383 2
a1384 1

@


1.108
log
@Updated Chat & IRC code. Workaround for bug #0000322
@
text
@d384 1
d389 1
d396 1
d401 1
d1269 1
d1274 1
d1281 1
d1286 1
@


1.107
log
@Added Known List to transfer window. Hope no major bug was introduced. Should be tested!
@
text
@d970 1
@


1.106
log
@Category rewrite with predefined status/media type categories.
@
text
@d85 3
d105 1
d112 2
d221 1
a221 1
	enum EnumTable {TABLE_DOWNLOAD, TABLE_UPLOAD, TABLE_QUEUE, TABLE_SEARCH, TABLE_SHARED, TABLE_SERVER, TABLE_IRC};
a584 2


d704 2
d1156 1
@


1.105
log
@(Ok, one _little_ logic change) Added "Waited" column to download list.
@
text
@d25 1
a46 10
struct Category_Struct
{
	char	incomingpath[MAX_PATH];
	char	title[64];
	char	comment[255];
	DWORD	color;
	uint8	prio;
	char 	autocat[255];
};

d937 2
a938 12
	int		AddCat(Category_Struct* cat) 				{ catMap.Add(cat); return catMap.GetCount()-1;}
	bool	MoveCat(UINT from, UINT to);
	void	RemoveCat(int index);
	int		GetCatCount()								{ return catMap.GetCount();}
	Category_Struct* GetCategory(int index) 			{ if (index>=0 && index<catMap.GetCount()) return catMap.GetAt(index); else return NULL;}
	char*	GetCatPath(uint8 index)						{ return catMap.GetAt(index)->incomingpath;}
	DWORD	GetCatColor(uint8 index)					{ if (index>=0 && index<catMap.GetCount()) return catMap.GetAt(index)->color; else return 0;}
	int		GetAllcatType()								{ return m_nAllcatType; }
	void	SetAllcatType(int in)  						{ m_nAllcatType=in; }

	bool	ShowCatTabInfos()							{ return m_bShowCatTabInfos; }
	void	ShowCatTabInfos(bool in)					{ m_bShowCatTabInfos=in; }
d1234 1
a1234 1
	CArray<Category_Struct*,Category_Struct*> catMap;
a1364 3

	bool	m_bShowCatTabInfos;
	int		m_nAllcatType;
@


1.104
log
@A little more method factoring, a few name changes, no (intended) logic changes.
@
text
@d73 3
a75 3
	int16	downloadColumnWidths[16];
	BOOL	downloadColumnHidden[16];
	INT		downloadColumnOrder[16];
@


1.103
log
@Removed all #ifndef AMDs and consolidated CPU specific behavior in md4cpy() and new method memcpy2() (come up with a better name if you can :P ). Renamed LoadPreferences() to LoadIniPreferences() and separated preferences.dat loading code out into LoadDatPreferences().
@
text
@d221 2
a222 1
class CPreferences{
d224 1
a224 1
	enum Table {tableDownload, tableUpload, tableQueue, tableSearch, tableShared, tableServer, tableIrc};
d229 2
a230 2
	CString	GetAppDir() const							{ return appdir; }
	CString GetConfigDir() const						{ return configdir; }
d575 6
a580 6
	int     GetColumnWidth (Table t, int index) const;
	BOOL    GetColumnHidden(Table t, int index) const;
	int     GetColumnOrder (Table t, int index) const;
	void	SetColumnWidth (Table t, int index, int width);
	void	SetColumnHidden(Table t, int index, BOOL bHidden);
	void	SetColumnOrder (Table t, INT *piOrder);
d583 4
a586 4
	int		GetColumnSortItem (Table t) const;
	bool	GetColumnSortAscending (Table t) const;
	void	SetColumnSortItem (Table t, int sortItem);
	void	SetColumnSortAscending (Table t, bool sortAscending);
d720 1
a720 1
	uint16	GetDefaultMaxConperFive();
d722 2
a723 2
	//void	ResetStatsColor(int index); //Cax2 changed this function to DefaultStatsColor to use it in the colour picker!
	DWORD	DefaultStatsColor(int index);
d858 3
a860 3
	CStringList shareddir_list;
	CStringList tempdir_list;	// InterCeptor (multiple tempdirs)
	CStringList adresses_list;
d988 2
a989 2
	CString appdir;
	CString configdir;
d1001 4
a1004 2
	void LoadDatPreferences(FILE *pPrefsFile);
	void SavePreferences();
@


1.102
log
@More name changes, reinstated CMuleCtrlItem class, moved srcsarevisible from CPartFile to CMuleCtrlItem (where it belongs), added "Show Full Status Icons" and "Show Gray Paused" features with corresponding preferences, modified "SmartOpen" code to make it sticky and to make it work with sources with changing states.
@
text
@d295 1
a295 5
#ifndef AMD
	void	SetA4AFHash(const uchar* file_hash)			{ memcpy(m_prefs->A4AF_file_hash, file_hash, sizeof(m_prefs->A4AF_file_hash)); }
	#else
	void	SetA4AFHash(const uchar* file_hash)			{ memcpy_amd(m_prefs->A4AF_file_hash, file_hash, sizeof(m_prefs->A4AF_file_hash)); }
	#endif
d999 2
a1000 1
	void LoadPreferences();
@


1.101
log
@First batch of the threatened name changes. Shouldn't be any logic changes here.
@
text
@d375 1
a375 1
	void	Add2SessionTransferData ( uint8 uClientID , uint16 uClientPort , BOOL bFromPF, eTransfer eUpDown, uint32 bytes );
d435 1
a435 1
	uint64	GetCumUpData(eClientTypes eClientID)		{ return (cumUpDataClients[eClientID]+sesUpDataClients[eClientID]); }
d442 1
a442 1
	uint64	GetUpData(eClientTypes eClientID)			{ return sesUpDataClients[eClientID]; }
d471 1
a471 1
	uint64	GetCumDownData(eClientTypes eClientID)		{ return (cumDownDataClients[eClientID]+sesDownDataClients[eClientID]); }
d478 1
a478 1
	uint64	GetDownData(eClientTypes eClientID)			{ return sesDownDataClients[eClientID]; }
d979 1
a979 1
	bool	IsSecureIdentEnabled()						{ return m_bUseSecureIdent;} // use clientcredits->CryptoAvailable() to check if crypting is really available and not this function
d982 5
d1264 3
@


1.100
log
@number of ICH rescued files wasn't saved to ini (stats)
@
text
@d32 1
a32 1
	uchar	userhash[16];
d71 1
a71 1
	uchar	userhash[16];
d145 1
a145 1
	uchar	userhash[16];
d166 1
a166 1
	uchar	userhash[16];
d200 1
a200 1
	uchar	userhash[16];
d231 2
d269 1
a269 1
	uchar*	GetUserHash()								{ return prefs->userhash; }
d277 1
a277 1
//	bool	ReconnectLowID() 							{ return prefs->reconnectlowid;}
d294 1
a294 1
	uchar*	GetA4AFHash(void)							{ return prefs->A4AF_file_hash; }
d296 1
a296 1
	void	SetA4AFHash(const uchar* file_hash)			{ memcpy(prefs->A4AF_file_hash, file_hash, sizeof(prefs->A4AF_file_hash)); }
d298 1
a298 1
	void	SetA4AFHash(const uchar* file_hash)			{ memcpy_amd(prefs->A4AF_file_hash, file_hash, sizeof(prefs->A4AF_file_hash)); }
d355 2
a356 2
	//void	Add2TotalDownloaded(uint64 in) {prefs->totalDownloadedBytes+=in;}
	//void	Add2TotalUploaded(uint64 in) {prefs->totalUploadedBytes+=in;}
d427 1
a427 1
	uint64	GetUpTotalClientData()						{	uint64 transfered_data = 0; 
d430 2
a431 2
																transfered_data += cumUpDataClients[i];
																transfered_data += sesUpDataClients[i];
d433 1
a433 1
															return transfered_data; 
d438 3
a440 3
	uint64	GetUpSessionClientData()					{	uint64 transfered_data = 0; 
															for (int i = 0; i<SO_LAST; i++) transfered_data += sesUpDataClients[i];
															return transfered_data; 
d463 1
a463 1
	uint64	GetDownTotalClientData()					{	uint64 transfered_data = 0; 
d466 2
a467 2
																transfered_data += cumDownDataClients[i];
																transfered_data += sesDownDataClients[i];
d469 1
a469 1
															return transfered_data; 
d474 3
a476 3
	uint64	GetDownSessionClientData()					{	uint64 transfered_data = 0; 
															for (int i = 0; i<SO_LAST; i++) transfered_data += sesDownDataClients[i];
															return transfered_data; 
d618 1
a618 1
	bool    GetBugReport()								{ return prefs->BugReport; }
d684 1
a684 1
	CString	GetTxtEditor() const				        {return prefs->TxtEditor;}
d690 1
a690 1
//	bool	AddNewFilesPaused()                         {CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->addnewfilespaused;}
d835 2
a836 2
	WINDOWPLACEMENT GetEmuleWindowPlacement()			{ return prefs->EmuleWindowPlacement; }
	void SetWindowLayout(WINDOWPLACEMENT in) 			{ prefs->EmuleWindowPlacement = in; }
d858 2
a859 2
	ProxySettings GetProxy() const                      { ProxySettings Ret = prefs->proxy; return Ret; }
	void SetProxySettings(ProxySettings proxysettings)  { prefs->proxy = proxysettings; }
d867 4
a870 4
	CString GetMessageFilter()							{ return prefs->messageFilter; }
	void	SetMessageFilter(const CString& in)			{ prefs->messageFilter=in; }
	bool	ShowRatesOnTitle()							{ return prefs->showRatesInTitle; }
	void	SetRatesOnTitle(bool show) 					{ prefs->showRatesInTitle=show; }
d881 1
a881 1
	uint16	GetMsgSessionsMax()							{ return prefs->maxmsgsessions;}
d884 6
a889 6
	CString	GetMMPass()									{ return CString(prefs->m_sMMPassword); }
	void	SetMMPass(CString strNewPass)				{ sprintf(prefs->m_sMMPassword,"%s",MD5Sum(strNewPass).GetHash().GetBuffer(0)); }
	bool	IsMMServerEnabled()							{ return prefs->m_bMMEnabled; }
	void	SetMMIsEnabled(bool bEnable)				{ prefs->m_bMMEnabled=bEnable; }
	uint16	GetMMPort()									{ return prefs->m_nMMPort; }
	void	SetMMPort(uint16 uPort)						{ prefs->m_nMMPort=uPort; }
d891 1
a891 1
	void	SetUseProxy(bool in)						{ prefs->proxy.UseProxy=in;}
d907 2
a908 2
	CString	GetTemplate()								{ return CString(prefs->m_sTemplateFile);}
	void	SetTemplate(CString in)						{ sprintf(prefs->m_sTemplateFile,"%s",in);}
d911 2
a912 2
	bool	GetShowAverageDatarate()					{ return m_bShowAverageDatarate; }
	void	SetShowAverageDatarate(bool show) 			{ m_bShowAverageDatarate = show; }
d984 1
a984 1
	void		SetStandartValues();
d988 2
a989 2
	Preferences_Struct_DONTUSE* prefs;
	Preferences_Ext_Struct* prefsExt;
d995 1
a995 1
	uchar userhash[16];
d1232 1
a1232 1
	bool					m_bShowAverageDatarate;
@


1.99
log
@First step of ICC (Internet Connection Check) configuration. Only in ini for now.
@
text
@d380 1
a380 1
	void	Add2SessionPartsSavedByICH(int in)			{ sesPartsSavedByICH = in;}
@


1.98
log
@Fixed start paused files by category (when option set or by menu)
Removed Reset All Statistics (agreed with Eklmn that has no use and it brings problems)
Removed Mobile Mule profile
Localized 'All' tab when language changed
@
text
@d978 2
d1379 1
@


1.97
log
@Fixes regarding Category directory handling
@
text
@d350 1
a350 1
	void	ResetStatistics(bool = false);
@


1.96
log
@More updates.
@
text
@a127 6

	bool	showCatTabInfos;
	bool	resumeSameCat;
	bool	dontRecreateGraphs;
	bool	autofilenamecleanup;
	int		allcatType;
d954 2
a955 2
	int		GetAllcatType()								{ return prefs->allcatType;}
	void	SetAllcatType(int in)  						{ prefs->allcatType=in; }
d957 2
a958 2
	bool	ShowCatTabInfos()							{ return prefs->showCatTabInfos;}
	void	ShowCatTabInfos(bool in)					{ prefs->showCatTabInfos=in;}
d1372 3
@


1.95
log
@Removed DoubleClick option (now is default).
Added cancel for Categories Dialog (now no more ? cats after cancel)
@
text
@d234 2
a235 2
	CString	GetAppDir() const							{return appdir;}
	CString GetConfigDir() const						{return configdir;}
d240 2
d300 1
a300 1
	void	SetA4AFHash(const uchar* file_hash)				{ memcpy(prefs->A4AF_file_hash, file_hash, sizeof(prefs->A4AF_file_hash)); }
d302 1
a302 1
	void	SetA4AFHash(const uchar* file_hash)				{ memcpy_amd(prefs->A4AF_file_hash, file_hash, sizeof(prefs->A4AF_file_hash)); }
d356 1
a356 1
	void	ResetCumulativeStatistics();
d365 14
a378 14
	void	Add2DownCompletedFiles()			{ cumDownCompletedFiles++; }
	void	Add2ConnMaxAvgDownRate(float in)	{ cumConnMaxAvgDownRate = in; }
	void	Add2ConnMaxDownRate(float in)		{ cumConnMaxDownRate = in; }
	void	Add2ConnAvgUpRate(float in)			{ cumConnAvgUpRate = in; }
	void	Add2ConnMaxAvgUpRate(float in)		{ cumConnMaxAvgUpRate = in; }
	void	Add2ConnMaxUpRate(float in)			{ cumConnMaxUpRate = in; }
	void	Add2ConnPeakConnections(int in)	{ cumConnPeakConnections = in; }
	void	Add2UpAvgTime(int in)				{ cumUpAvgTime = in; }
	void	Add2DownSAvgTime(int in)			{ sesDownAvgTime += in; }
	void	Add2DownCAvgTime(int in)			{ cumDownAvgTime = in; }
	void	Add2ConnTransferTime(int in)			{ cumConnTransferTime += in; }
	void	Add2ConnDownloadTime(int in)		{ cumConnDownloadTime += in; }
	void	Add2ConnUploadTime(int in)			{ cumConnUploadTime += in; }
	void	Add2DownSessionCompletedFiles()	{ sesDownCompletedFiles++; }
d380 7
a386 7
	void	Add2DownSuccessfulSessions()		{ sesDownSuccessfulSessions++;
												  cumDownSuccessfulSessions++; }
	void	Add2DownFailedSessions()			{ sesDownFailedSessions++;
												  cumDownFailedSessions++; }
	void	Add2LostFromCorruption(uint64 in)		{ cumLostFromCorruption += in;}
	void	Add2SavedFromCompression(uint64 in)	{ cumSavedFromCompression += in;}
	void	Add2SessionPartsSavedByICH(int in)		{ sesPartsSavedByICH = in;}
d390 8
a397 8
	uint64	GetDownOverheadTotal()				{ return cumDownOverheadTotal;}
	uint64	GetDownOverheadFileReq()			{ return cumDownOverheadFileReq;}
	uint64	GetDownOverheadSrcEx()			{ return cumDownOverheadSrcEx;}
	uint64	GetDownOverheadServer()			{ return cumDownOverheadServer;}
	uint64	GetDownOverheadTotalPackets()	{ return cumDownOverheadTotalPackets;}
	uint64	GetDownOverheadFileReqPackets() { return cumDownOverheadFileReqPackets;}
	uint64	GetDownOverheadSrcExPackets()	{ return cumDownOverheadSrcExPackets;}
	uint64	GetDownOverheadServerPackets()	{ return cumDownOverheadServerPackets;}
d400 8
a407 8
	uint64	GetUpOverheadTotal()			{ return cumUpOverheadTotal;}
	uint64	GetUpOverheadFileReq()			{ return cumUpOverheadFileReq;}
	uint64	GetUpOverheadSrcEx()			{ return cumUpOverheadSrcEx;}
	uint64	GetUpOverheadServer()			{ return cumUpOverheadServer;}
	uint64	GetUpOverheadTotalPackets()	{ return cumUpOverheadTotalPackets;}
	uint64	GetUpOverheadFileReqPackets()	{ return cumUpOverheadFileReqPackets;}
	uint64	GetUpOverheadSrcExPackets()	{ return cumUpOverheadSrcExPackets;}
	uint64	GetUpOverheadServerPackets()	{ return cumUpOverheadServerPackets;}
d410 3
a412 3
	uint32	GetUpSuccessfulSessions()		{ return cumUpSuccessfulSessions;}
	uint32	GetUpFailedSessions()			{ return cumUpFailedSessions;}
	uint32	GetUpAvgTime()					{ return cumUpAvgTime;}
d415 4
a418 4
	uint32	GetDownCompletedFiles()			{ return cumDownCompletedFiles;}
	uint16	GetDownC_SuccessfulSessions()	{ return cumDownSuccessfulSessions;}
	uint16	GetDownC_FailedSessions()			{ return cumDownFailedSessions;}
	uint32	GetDownC_AvgTime()				{ return cumDownAvgTime;}
d420 4
a423 4
	uint16	GetDownSessionCompletedFiles()	{ return sesDownCompletedFiles;}
	uint16	GetDownS_SuccessfulSessions()	{ return sesDownSuccessfulSessions;}
	uint16	GetDownS_FailedSessions()			{ return sesDownFailedSessions;}
	uint32	GetDownS_AvgTime()				{ return GetDownS_SuccessfulSessions()?sesDownAvgTime/GetDownS_SuccessfulSessions():0;}
d426 3
a428 3
	uint64	GetLostFromCorruption()			{ return cumLostFromCorruption;}
	uint64	GetSavedFromCompression()	{ return cumSavedFromCompression;}
	uint32	GetPartsSavedByICH()			{ return cumPartsSavedByICH;}
d431 1
a431 1
	uint64	GetUpTotalClientData()				{	uint64 transfered_data = 0; 
d439 1
a439 1
	uint64	GetCumUpData(eClientTypes eClientID)		{return (cumUpDataClients[eClientID]+sesUpDataClients[eClientID]);}
d442 5
a446 5
	uint64	GetUpSessionClientData()			{	uint64 transfered_data = 0; 
														for (int i = 0; i<SO_LAST; i++) transfered_data += sesUpDataClients[i];
														return transfered_data; 
													}
	uint64	GetUpData(eClientTypes eClientID)		{return sesUpDataClients[eClientID];}
d449 3
a451 3
	uint64	GetUpTotalPortData()			{ return (GetCumUpDataPort_4662() +			GetCumUpDataPort_OTHER() );}
	uint64	GetCumUpDataPort_4662()			{ return (cumUpDataPort_4662 +		sesUpDataPort_4662 );}
	uint64	GetCumUpDataPort_OTHER()		{ return (cumUpDataPort_OTHER +		sesUpDataPort_OTHER );}
d453 3
a455 3
	uint64	GetUpSessionPortData()			{ return (sesUpDataPort_4662 +		sesUpDataPort_OTHER );}
	uint64	GetUpDataPort_4662()			{ return sesUpDataPort_4662;}
	uint64	GetUpDataPort_OTHER()			{ return sesUpDataPort_OTHER;}
d458 3
a460 3
	uint64	GetUpTotalDataFile()			{ return (GetCumUpData_File() +				GetCumUpData_Partfile() );}
	uint64	GetCumUpData_File()				{ return (cumUpData_File +			sesUpData_File );}
	uint64	GetCumUpData_Partfile()			{ return (sesUpData_Partfile +		sesUpData_Partfile );}
d462 3
a464 3
	uint64	GetUpSessionDataFile()			{ return (sesUpData_File +			sesUpData_Partfile );}
	uint64	GetUpData_File()				{ return sesUpData_File;}
	uint64	GetUpData_Partfile()			{ return sesUpData_Partfile;}
d467 1
a467 1
	uint64	GetDownTotalClientData()				{	uint64 transfered_data = 0; 
d475 1
a475 1
	uint64	GetCumDownData(eClientTypes eClientID)	{return (cumDownDataClients[eClientID]+sesDownDataClients[eClientID]);}
d478 5
a482 5
	uint64	GetDownSessionClientData()			{	uint64 transfered_data = 0; 
														for (int i = 0; i<SO_LAST; i++) transfered_data += sesDownDataClients[i];
														return transfered_data; 
													}
	uint64	GetDownData(eClientTypes eClientID)	{return sesDownDataClients[eClientID];}
d485 3
a487 3
	uint64	GetDownTotalPortData()				{ return (GetCumDownDataPort_4662() +	GetCumDownDataPort_OTHER() );}
	uint64	GetCumDownDataPort_4662()		{ return (cumDownDataPort_4662 + sesDownDataPort_4662 );}
	uint64	GetCumDownDataPort_OTHER()		{ return (cumDownDataPort_OTHER + sesDownDataPort_OTHER );}
d490 3
a492 3
	uint64	GetDownSessionDataPort()		{ return (sesDownDataPort_4662 + sesDownDataPort_OTHER );}
	uint64	GetDownDataPort_4662()			{ return sesDownDataPort_4662;}
	uint64	GetDownDataPort_OTHER()		{ return sesDownDataPort_OTHER;}
d495 15
a509 15
	float		GetConnAvgDownRate()			{ return cumConnAvgDownRate;}
	float		GetConnMaxAvgDownRate()		{ return cumConnMaxAvgDownRate;}
	float		GetConnMaxDownRate()			{ return cumConnMaxDownRate;}
	float		GetConnAvgUpRate()				{ return cumConnAvgUpRate;}
	float		GetConnMaxAvgUpRate()		{ return cumConnMaxAvgUpRate;}
	float		GetConnMaxUpRate()				{ return cumConnMaxUpRate;}
	uint64	GetConnRunTime()				{ return cumConnRunTime;}
	uint16	GetConnNumReconnects()			{ return cumConnNumReconnects;}
	uint16	GetConnAvgConnections()			{ return cumConnAvgConnections;}
	uint16	GetConnMaxConnLimitReached()	{ return cumConnMaxConnLimitReached;}
	uint16	GetConnPeakConnections()		{ return cumConnPeakConnections;}
	uint32	GetConnTransferTime()			{ return cumConnTransferTime;}
	uint32	GetConnDownloadTime()			{ return cumConnDownloadTime;}
	uint32	GetConnUploadTime()			{ return cumConnUploadTime;}
	uint32	GetConnServerDuration()			{ return cumConnServerDuration;}
d512 3
a514 3
	uint16	GetSrvrsMostWorkingServers()	{ return cumSrvrsMostWorkingServers;}
	uint32	GetSrvrsMostUsersOnline()		{ return cumSrvrsMostUsersOnline;}
	uint32	GetSrvrsMostFilesAvail()			{ return cumSrvrsMostFilesAvail;}
d517 4
a520 4
	uint16	GetSharedMostFilesShared()		{ return cumSharedMostFilesShared;}
	uint64	GetSharedLargestShareSize()	{ return cumSharedLargestShareSize;}
	uint64	GetSharedLargestAvgFileSize()	{ return cumSharedLargestAvgFileSize;}
	uint64	GetSharedLargestFileSize()		{ return cumSharedLargestFileSize;}
d523 2
a524 2
	__int64	GetStatsLastResetLng()			{ return stat_datetimeLastReset;}
	CString	GetStatsLastResetStr (bool formatLong = true);
d527 1
a527 1
	void		SetExpandedTreeItems(CString in)			{ statsExpandedTreeItems = in; }
a664 2
	//	bool	GetIrcAcceptLinks()							{ return m_bIRCAcceptLinks; }
	//	void	SetIrcAcceptLInks(bool flag)				{ m_bIRCAcceptLinks = flag; }
d953 1
a953 1
	int		AddCat(Category_Struct* cat) { catMap.Add(cat); return catMap.GetCount()-1;}
d956 6
a961 6
	int		GetCatCount()			{ return catMap.GetCount();}
	Category_Struct* GetCategory(int index) { if (index>=0 && index<catMap.GetCount()) return catMap.GetAt(index); else return NULL;}
	char*	GetCatPath(uint8 index)	{ return catMap.GetAt(index)->incomingpath;}
	DWORD	GetCatColor(uint8 index)	{ if (index>=0 && index<catMap.GetCount()) return catMap.GetAt(index)->color; else return 0;}
	int		GetAllcatType()			{ return prefs->allcatType;}
	void	SetAllcatType(int in)   { prefs->allcatType=in; }
d963 2
a964 2
	bool	ShowCatTabInfos()			{ return prefs->showCatTabInfos;}
	void	ShowCatTabInfos(bool in)	{ prefs->showCatTabInfos=in;}
d983 1
a983 1
	bool	IsSecureIdentEnabled()					{ return m_bUseSecureIdent;} // use clientcredits->CryptoAvailable() to check if crypting is really available and not this function
a1180 1
	//	bool					m_bIRCAcceptLinks;
d1289 2
a1290 1
	// Cumulative client breakdown stats for sent bytes...
a1291 10
	/*
	uint64	cumUpData_EDONKEY;
	uint64	cumUpData_EDONKEYHYBRID;
	uint64	cumUpData_EMULE;
	uint64	cumUpData_MLDONKEY;
	uint64	cumUpData_CDONKEY;
	uint64	cumUpData_XMULE;
	uint64	cumUpData_SHAREAZA;
	*/
	// Session client breakdown stats for sent bytes...
a1292 9
	/*
	uint64	sesUpData_EDONKEY;
	uint64	sesUpData_EDONKEYHYBRID;
	uint64	sesUpData_EMULE;
	uint64	sesUpData_MLDONKEY;
	uint64	sesUpData_CDONKEY;
	uint64	sesUpData_XMULE;
	uint64	sesUpData_SHAREAZA;
	*/
d1297 1
d1305 1
d1328 1
a1328 1
	// Cumulative client breakdown stats for received bytes...
a1329 8
	//uint64	cumDownData_EDONKEY;
	//uint64	cumDownData_EDONKEYHYBRID;
	//uint64	cumDownData_EMULE;
	//uint64	cumDownData_MLDONKEY;
	//uint64	cumDownData_CDONKEY;
	//uint64	cumDownData_XMULE;
	//uint64	cumDownData_SHAREAZA;
	// Session client breakdown stats for received bytes...
a1330 9
	/*
	uint64	sesDownData_EDONKEY;
	uint64	sesDownData_EDONKEYHYBRID;
	uint64	sesDownData_EMULE;
	uint64	sesDownData_MLDONKEY;
	uint64	sesDownData_CDONKEY;
	uint64	sesDownData_XMULE;
	uint64	sesDownData_SHAREAZA;
	*/
d1335 1
d1377 3
a1379 1
	bool		m_bUseSecureIdent;
@


1.94
log
@Fixed autocategory (and crashes)
@
text
@a599 2
	int8	IsDoubleClickEnabled()						{ return m_nTransferDoubleclick; }
	void	SetDoubleClickEnabled(int8 iEnable)			{ m_nTransferDoubleclick = iEnable; }
a1037 1
	int8					m_nTransferDoubleclick;
@


1.93
log
@Implemented ConfigDir
@
text
@d53 1
a53 1
	CString autocat;
@


1.92
log
@SecureIdent Support Mainly
Too many changes to mention here
@
text
@d235 1
d991 1
@


1.91
log
@don't filter IP ranges with Access level 127
@
text
@d226 1
a226 1

d984 1
a984 1

d1411 1
a1411 1

@


1.90
log
@*** empty log message ***
@
text
@d871 1
a871 1
	int		GetIPFilterLevel()							{ return 128; }
@


1.89
log
@Updates/Fixes
@
text
@a45 1
#ifdef __USE_CATEGORIES__
d53 1
a54 1
#endif
d73 3
a75 3
	int16	downloadColumnWidths[14];
	BOOL	downloadColumnHidden[14];
	INT		downloadColumnOrder[14];
a128 1
#ifdef __USE_CATEGORIES__
a133 1
#endif
a235 1
#ifdef __USE_CATEGORIES__	
d238 3
a240 1
#endif
d265 1
a953 1
#ifdef __USE_CATEGORIES__
a965 1
#endif
a1251 1
#ifdef __USE_CATEGORIES__
a1252 1
#endif
@


1.88
log
@Show transferred data on Complete column
@
text
@d952 3
d1253 1
@


1.87
log
@*** empty log message ***
@
text
@d948 4
d1249 1
@


1.86
log
@new statistic (khaos based)
@
text
@d958 3
@


1.85
log
@*** empty log message ***
@
text
@d349 180
d1256 149
@


1.84
log
@Removed Safe Connect
@
text
@d46 11
d129 8
d239 4
d768 12
d1062 4
@


1.83
log
@eMailNotifier and PopUp CleanUp
@
text
@a529 2
	bool	IsSafeConnectEnabled()						{ return m_bSafeConnect; }
	void	SetSafeConnectEnabled(bool in)				{ m_bSafeConnect = in; }
a892 1
	bool					m_bSafeConnect;
@


1.82
log
@added columns Soft/Hard Files Limit and Version in server window (merge from official)
@
text
@d431 2
d927 1
@


1.81
log
@Purity's changes
@
text
@d78 3
a80 3
	int16	serverColumnWidths[9];
	BOOL	serverColumnHidden[9];
	INT 	serverColumnOrder[9];
@


1.80
log
@Updated notifications (for eMail alerts feature compatibility).
@
text
@d114 4
d685 8
@


1.79
log
@Option to disable filetype icons.
@
text
@d431 4
d914 2
@


1.78
log
@BackUp feature [n@@boleo]
@
text
@d705 4
d998 1
@


1.77
log
@SMTP Messenger: added authentication
@
text
@d725 18
d1004 10
@


1.76
log
@SMTP Messenger
@
text
@d280 1
a280 1
	void	SetWSPass(const CString& strNewPass)				{ m_sWebPassword.Put(MD5Sum(strNewPass).GetHash()); }
d282 1
a282 1
	void	SetWSLowPass(const CString& strNewPass)			{ m_sLowWebPassword.Put(MD5Sum(strNewPass).GetHash()); }
d714 6
d981 3
@


1.75
log
@FEATURE: logging countermeasures made optional [Netwolf]
plus cleanup of unused prefs (transfer full chunks, global load f/l chunks first...)
@
text
@d676 1
a676 1
	uint16	GetMsgSessionsMax()						{ return prefs->maxmsgsessions;}
d678 3
a680 3
	void	SetUseProxy(bool in)		{ prefs->proxy.UseProxy=in;}
	bool	IsProxyASCWOP()				{ return m_bIsASCWOP;}
	void	SetProxyASCWOP(bool in)		{ m_bIsASCWOP=in;}
d683 1
a683 1
	CString GetFilenameCleanups()				{ return CString(m_sFilenameCleanups.Get()); }
d685 4
a688 4
	bool	GetAutoFilenameCleanup()			{ return m_bAutoFilenameCleanup; }
	void	SetAutoFilenameCleanup(bool in)		{ m_bAutoFilenameCleanup = in; }
	bool	GetFilenameCleanupTags()			{ return m_bFilenameCleanupTags; }
	void	SetFilenameCleanupTags(bool in)		{ m_bFilenameCleanupTags = in; }
d694 2
a695 2
	CString	GetTemplate()							{ return CString(prefs->m_sTemplateFile);}
	void	SetTemplate(CString in)					{ sprintf(prefs->m_sTemplateFile,"%s",in);}
d698 2
a699 2
	bool	GetShowAverageDatarate()							{ return m_bShowAverageDatarate; }
	void	SetShowAverageDatarate(bool show) 					{ m_bShowAverageDatarate = show; }
d701 17
a717 2
	bool	LimitlessDownload()									{ return m_bLimitlessDownload; }
	void	SetLimitlessDownload(bool bEnable)					{ m_bLimitlessDownload = bEnable; }
d970 7
@


1.74
log
@FATURE: specify path to WebServer template in preferences
@
text
@a88 2
	bool	m_bpreviewprio;

d112 1
a112 1
	char	m_sTemplateFile[MAX_PATH];
a127 1
	int8	ICH;
a148 1
	int8	ICH;
a182 1
	int8	ICH;
a258 2
//	bool	IsRemoveNNSEnabled() 						{ return m_bRemoveNNS; }
//	void	SetRemoveNNSEnabled(bool bEnable)			{ m_bRemoveNNS = bEnable; }
a330 3
	//bool	AddServersFromClient()						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->addserversfromclient;}
	//void	SetAddServersFromClient(bool bAdd)			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->addserversfromclient	=	bAdd;}
//	int8*	GetMinTrayPTR() 							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return &prefs->mintotray;}
a467 2
	bool	GetPreviewPrio()					        { return prefs->m_bpreviewprio; }
	void	SetPreviewPrio(bool bPreview)				{ prefs->m_bpreviewprio = bPreview; }
a550 2
	bool	TransferFullChunks()						{ return m_bTransferFullChunks; }
	void	SetTransferFullChunks(bool bEnable)			{ m_bTransferFullChunks = bEnable; }
d648 5
d660 2
a661 2
	void SetLanguage();
	int	GetIPFilterLevel()								{ return 128; }
d663 1
a663 1
	void SetMessageFilter(const CString& in)			{ prefs->messageFilter=in; }
d692 1
a692 1
	void SetCommentFilter(const CString& in)			{ m_sCommentFilter.Put(in); }
a807 1
//	bool					m_bRemoveNNS;
d820 1
a852 1
	bool					m_bTransferFullChunks;
@


1.73
log
@Limitless Download
@
text
@d114 1
a246 1
	//void    SetVlcDir(CString strDir)					{ m_sVlcDir.Put(strDir); }			//Cax2 - not needed anymore
a378 3
	//Cax2 - now calculated via the function above...
	//uint16  GetMaxSourcesPerFileSoftValue()			{CSingleLock PrefLock(&m_Pref_Mutex_MaxSourcesPerFile,TRUE); uint16 nRet = prefs->maxsourceperfilesoft; return nRet; }
	//void    SetMaxSourcesPerFileSoftValue(uint16 uSrc) {CSingleLock PrefLock(&m_Pref_Mutex_MaxSourcesPerFile,TRUE); prefs->maxsourceperfilesoft = uSrc; }
d702 3
@


1.72
log
@now using Ottavios SLS system [netwolf]
@
text
@d710 2
d964 1
@


1.71
log
@Added Show Average Datarate option.
@
text
@a86 2
	uint32 slsmaxsourcesperfile;

d264 2
a265 2
	bool	IsRemoveNNSEnabled() 						{ return m_bRemoveNNS; }
	void	SetRemoveNNSEnabled(bool bEnable)			{ m_bRemoveNNS = bEnable; }
a321 2
	uint32	LoadQuantities()							{ return m_nSLSLoadQuantities; }
	void 	SetLoadQuantities(uint32 uVal)				{ m_nSLSLoadQuantities = uVal; }
d324 2
a325 1
	uint32	MaxSourcesPerFile()							{ return prefs->slsmaxsourcesperfile; }
d815 1
a815 1
	bool					m_bRemoveNNS;
d830 1
a830 1
	uint32					m_nSLSLoadQuantities;
@


1.70
log
@Webserver intruder detection by Purity
@
text
@d690 1
d709 5
d964 1
@


1.69
log
@FEATURE: filter servers listed in ipfilter.dat and DynIP servers (for now)
@
text
@d654 9
d916 5
@


1.68
log
@added 'Set manually added servers to High Priority' and 'Serverconnect w/o proxy' options and removed 'Accept ed2k links'
@
text
@d279 1
a279 1
	#ifndef AMD
d366 2
d741 1
@


1.67
log
@FEATURE: disable rating icons
@
text
@a95 1
	bool	m_bmanualhighprio;
a116 1
	bool		m_bIsASCWOP;
d466 2
a467 2
	bool	GetIrcAcceptLinks()							{ return m_bIRCAcceptLinks; }
	void	SetIrcAcceptLInks(bool flag)				{ m_bIRCAcceptLinks = flag; }
d486 2
a487 1
	bool	GetManualHighPrio()					        { return prefs->m_bmanualhighprio;}
d490 1
a490 1
	bool	BackupPreview()								{return m_bBackupPreview;}
d682 2
a683 2
	bool	IsProxyASCWOP()				{ return prefs->m_bIsASCWOP;}
	void	SetProxyASCWOP(bool in)		{ prefs->m_bIsASCWOP=in;}
d892 1
a892 1
	bool					m_bIRCAcceptLinks;
d938 2
@


1.66
log
@memcpy() optimized for AMD (faster in 2-2.5 times). AMD only. Compile with tag AMD
@
text
@d320 2
d938 1
@


1.65
log
@unicode cleanup
@
text
@d24 1
d281 1
d283 3
@


1.64
log
@variables converted to CString to avoid converions
@
text
@d122 1
a122 1
	char	nick[50];
d130 2
a131 2
	char	incomingdir[510];
	char	tempdir[510];
d143 1
a143 1
	char	nick[50];
d152 2
a153 2
	char	incomingdir[510];
	char	tempdir[510];
d179 1
a179 1
	char	nick[50];
d187 2
a188 2
	char	incomingdir[510];
	char	tempdir[510];
@


1.63
log
@FEATURE: en/disable banning optional [DoubleT]
@
text
@a22 1
#include <string>
a24 2
using namespace std;

a44 2


d232 2
a233 2
	CString	GetUserNick()								{ return CString(m_sNick.Get().c_str()); }
	void    SetUserNick(CString strNewNick)				{ m_sNick.Put(strNewNick.GetBuffer(0)); }
d244 8
a251 8
	CString	GetIncomingDir()							{ return CString(m_sIncomingDir.Get().c_str()); }
	void	SetIncomingDir(CString strDir)				{ m_sIncomingDir.Put(strDir.GetBuffer(0)); }
	CString	GetTempDir()								{ return CString(m_sTempDir.Get().c_str()); }
	void	SetTempDir(CString strDir)					{ m_sTempDir.Put(strDir.GetBuffer(0)); }
	CString	GetVlcDir()  								{ return CString(m_sVlcDir.Get().c_str()); }		//Cax2 - keep for compatibility in 1a...
	//void    SetVlcDir(CString strDir)					{ m_sVlcDir.Put(strDir.GetBuffer(0)); }			//Cax2 - not needed anymore
	CString	GetVideoPlayer()  							{ return CString(m_sVideoPlayer.Get().c_str()); }
	void    SetVideoPlayer(CString str)					{ m_sVideoPlayer.Put(str.GetBuffer(0)); }
d269 1
a269 1
	CString GetToolbarSettings() 						{ return CString(m_sToolbarSettings.Get().c_str()); }
d271 4
a274 4
	CString GetToolbarBitmapSettings() 					{ return CString(m_sToolbarBitmap.Get().c_str()); } // reCDVst
	void	SetToolbarBitmapSettings(CString path) 		{ m_sToolbarBitmap.Put(path.GetBuffer(0)); } // reCDVst
	CString GetToolbarBitmapFolderSettings() 			{ return CString(m_sToolbarBitmapFolder.Get().c_str()); } // reCDVst
	void	SetToolbarBitmapFolderSettings(CString path){ m_sToolbarBitmapFolder.Put(path.GetBuffer(0)); } // reCDVst
d285 4
a288 4
	CString	GetWSPass()									{ return CString(m_sWebPassword.Get().c_str()); }
	void	SetWSPass(CString strNewPass)				{ m_sWebPassword.Put(MD5Sum(strNewPass).GetHash().GetBuffer(0)); }
	CString	GetWSLowPass()								{ return CString(m_sLowWebPassword.Get().c_str()); }
	void	SetWSLowPass(CString strNewPass)			{ m_sLowWebPassword.Put(MD5Sum(strNewPass).GetHash().GetBuffer(0)); }
d347 2
a348 2
	CString	GetStatsListExpanded()						{ return CString(m_sStatsListExpanded.Get().c_str()); }
	void	SetStatsListExpanded(CString in)			{ m_sStatsListExpanded.Put(in.GetBuffer(0)); }
d440 2
a441 2
	CString GetNotifierWavSoundPath() 					{ return CString(m_sNotifierSoundFilePath.Get().c_str()); }
	void	SetNotifierWavSoundPath(CString strPath)	{ m_sNotifierSoundFilePath.Put(strPath.GetBuffer(0)); }
d443 4
a446 4
	CString	GetIRCNick()								{ return CString(m_sIRCNick.Get().c_str()); }
	void	SetIRCNick( char in_nick[] )				{ m_sIRCNick.Put(in_nick); }
	CString	GetIRCServer()								{ return CString(m_sIRCServer.Get().c_str()); }
	void	SetIRCServer( char in_serv[] )				{ m_sIRCServer.Put(in_serv); }
d449 2
a450 2
	CString	GetIRCChanNameFilter()						{ return CString(m_sIRCChanNameFilter.Get().c_str()); }
	void	SetIRCChanNameFilter(char in_name[])		{ m_sIRCChanNameFilter.Put(in_name); }
d455 2
a456 2
	CString	GetIrcPerformString()						{ return CString(m_sIRCPerformString.Get().c_str()); }
	void	SetIRCPerformString(char in_perf[])			{ m_sIRCPerformString.Put(in_perf);}
d545 2
a546 2
	CString	CommunityString()							{ return CString(m_sCommunityString.Get().c_str()); }
	void	SetCommunityString(CString strComm)			{ m_sCommunityString.Put(strComm.GetBuffer(0)); }
d573 2
a574 2
	CString	GetUsedFont()								{ return CString(m_sUsedFont.Get().c_str()); }
	void	SetUsedFont(CString font)					{ m_sUsedFont.Put(font.GetBuffer(0)); }
d661 1
a661 1
	void SetMessageFilter(CString in)					{ prefs->messageFilter=in; }
d666 2
a667 2
	CString   GetAwayStateMessage()						{ return CString(m_sAwayStateMessage.Get().c_str()); }
	void	SetAwayStateMessage(CString in)				{ m_sAwayStateMessage.Put(in.GetBuffer(0)); }
d680 2
a681 2
	CString GetFilenameCleanups()				{ return CString(m_sFilenameCleanups.Get().c_str()); }
	void	SetFilenameCleanups(CString in)		{ m_sFilenameCleanups.Put(in.GetBuffer(0)); }
d688 2
a689 2
	CString GetCommentFilter()							{ return CString(m_sCommentFilter.Get().c_str()); }
	void SetCommentFilter(CString in)					{ m_sCommentFilter.Put(in.GetBuffer(0)); }
d710 1
a710 1
	CSecuredVar<string>		m_sNick;
d750 1
a750 1
	CSecuredVar<string>		m_sStatsListExpanded;
d752 4
a755 4
	CSecuredVar<string>		m_sIncomingDir;
	CSecuredVar<string>		m_sTempDir;
	CSecuredVar<string>		m_sVlcDir;
	CSecuredVar<string>		m_sVideoPlayer;		//Cax2 import from official client.
d802 1
a802 1
	CSecuredVar<string>		m_sToolbarSettings;
d833 1
a833 1
	CSecuredVar<string>		m_sCommunityString;
d854 1
a854 1
	CSecuredVar<string>		m_sNotifierSoundFilePath;
d859 1
a859 1
	CSecuredVar<string>		m_sUsedFont;
d877 2
a878 2
	CSecuredVar<string>		m_sIRCNick;
	CSecuredVar<string>		m_sIRCServer;
d880 1
a880 1
	CSecuredVar<string>		m_sIRCChanNameFilter;
d883 1
a883 1
	CSecuredVar<string>		m_sIRCPerformString;
d891 2
a892 2
	CSecuredVar<string>		m_sWebPassword;
	CSecuredVar<string>		m_sLowWebPassword;
d913 2
a914 2
	CSecuredVar<string>		m_sToolbarBitmap;
	CSecuredVar<string>		m_sToolbarBitmapFolder;
d920 1
a920 1
	CSecuredVar<string>		m_sAwayStateMessage;
d925 1
a925 1
	CSecuredVar<string>		m_sFilenameCleanups;
d929 1
a929 1
	CSecuredVar<string>		m_sCommentFilter;	//(SyruS) netwolf commentfilter
@


1.62
log
@removed CSecuredVar protection for simple variables
@
text
@d314 6
a587 2
	bool	IsBanMessageEnabled()						{ return m_bBanMessageEnabled; }
	void	SetBanMessageEnabled(bool bEnable)          { m_bBanMessageEnabled = bEnable; }
a767 1
	bool					m_bBanMessageEnabled;
d804 2
@


1.61
log
@code cleanup
@
text
@d229 8
a236 8
	uint16	Profile()									{ return m_nProfile.Get(); }
	void	SetProfile(uint16 uProfile)					{ m_nProfile.Put(uProfile); }
	int8	Score()										{ return m_nScoreSystem.Get(); }
	void	SetScore(int8 iScore)						{ m_nScoreSystem.Put(iScore); }
	bool	Reconnect()									{ return m_bReconnect.Get(); }
	void	SetReconnect(bool bReconnect)				{ m_bReconnect.Put(bReconnect); }
	int8	DeadServer()								{ return m_nDeadServer.Get(); }
	void	SetDeadServer(int8 iDead)					{ m_nDeadServer.Put(iDead); }
d239 2
a240 2
	uint16	GetPort()									{ return m_nPort.Get(); }
	void	SetPort(uint16 uPort)						{ m_nPort.Put(uPort); }
d243 3
a245 3
    uint16	GetListenPort()								{ if(m_bUseProxyListenPort.Get()) return m_nListenPort.Get(); else return GetPort(); }
	void	SetListenPort(uint16 uPort)					{ m_nListenPort.Put(uPort); m_bUseProxyListenPort.Put(true); }
	void	ResetListenPort()							{ m_nListenPort.Put(0); m_bUseProxyListenPort.Put(false); }
d247 2
a248 2
	uint16	GetUDPPort()								{ return m_nUDPPort.Get(); }
	void	SetUDPPort(uint16 uPort)					{ m_nUDPPort.Put(uPort); }
d258 1
a258 1
	uint16	GetMaxUpload()								{ return m_nMaxUpload.Get(); }
d261 4
a264 4
	bool	IsUAPEnabled()								{ return m_bUAP.Get(); }
	void	SetUAPEnabled(bool bEnable)					{ m_bUAP.Put(bEnable); }
	bool	IsDAPEnabled()								{ return m_bDAP.Get(); }
	void	SetDAPEnabled(bool bEnable)					{ m_bDAP.Put(bEnable); }
d266 8
a273 8
	bool	IsDisabledXS()								{ return m_bDisableXS.Get(); }
	void	SetDisabledXS(bool bDisable)				{ m_bDisableXS.Put(bDisable); }
	bool	StartDownloadPaused()						{ return m_bStartDownloadPaused.Get(); }
	void	SetStartDownloadPaused(bool bPaused)		{ m_bStartDownloadPaused.Put(bPaused); }
	bool	DownloadPausedOnComplete()					{ return m_bDownloadPausedOnComplete.Get(); }
	void	SetDownloadPausedOnComplete(bool bPaused)	{ m_bDownloadPausedOnComplete.Put(bPaused); }
	bool	IsRemoveNNSEnabled() 						{ return m_bRemoveNNS.Get(); }
	void	SetRemoveNNSEnabled(bool bEnable)			{ m_bRemoveNNS.Put(bEnable); }
d280 4
a283 4
	int8	GetToolbarLabelSettings()					{ return m_nToolbarLabels.Get(); }
	void	SetToolbarLabelSettings(int8 settings)		{ m_nToolbarLabels.Put(settings); }
	bool	AutoServerlist()							{ return m_bAutoServerList.Get(); }
	void	SetAutoServerlist(bool bAuto)				{ m_bAutoServerList.Put(bAuto); }
d288 2
a289 2
	uint16	GetWSPort()									{ return m_nWebPort.Get(); }
	void	SetWSPort(uint16 uPort)						{ m_nWebPort.Put(uPort); }
d294 20
a313 20
	bool	GetWSIsEnabled()							{ return m_bWebEnabled.Get(); }
	void	SetWSIsEnabled(bool bEnable)				{ m_bWebEnabled.Put(bEnable); }
	bool	GetWSIsLowUserEnabled()						{ return m_bWebLowEnabled.Get(); }
	void	SetWSIsLowUserEnabled(bool bEnable)			{ m_bWebLowEnabled.Put(bEnable); }
	bool	GetWebUseGzip()								{ return m_bWebUseGzip.Get(); }
	void	SetWebUseGzip(bool bUse)					{ m_bWebUseGzip.Put(bUse); }
	int		GetWebPageRefresh()							{ return m_nWebPageRefresh.Get(); }
	void	SetWebPageRefresh(int nRefresh)				{ m_nWebPageRefresh.Put(nRefresh); }

	bool	UpdateNotify()								{ return m_bUpdateNotify.Get(); }
	bool	DoMinToTray()								{ return m_bMinToTray.Get(); }
	void	SetMinToTray(bool bMinToTray)				{ m_bMinToTray.Put(bMinToTray); }
	bool	DoAutoConnect() 							{ return m_bAutoConnect.Get(); }
	void    SetAutoConnect(bool bConnect)				{ m_bAutoConnect.Put(bConnect); }
	uint32	BadClientBanTime()							{ return m_nBadClientBanTime.Get(); }
	void	SetBadClientBanTime(uint32 uTime)			{ m_nBadClientBanTime.Put(uTime); }
	uint32	BadClientMinRequestTime()					{ return m_nMinRequestTime.Get(); }
	void	SetBadClientMinRequestTime(uint32 uTime)	{ m_nMinRequestTime.Put(uTime); }
	uint8	BadClientMinRequestNum()					{ return m_nBadClientBan.Get(); }
	void	SetBadClientMinRequestNum(uint8 uVal)		{ m_nBadClientBan.Put(uVal); }
d316 6
a321 6
	uint32	RestoreSourcesTime()						{ return m_nSLSRestoreSourcesTime.Get(); }
	void	SetRestoreSourcesTime(uint32 uTime)			{ m_nSLSRestoreSourcesTime.Put(uTime); }
	uint32	LoadQuantities()							{ return m_nSLSLoadQuantities.Get(); }
	void 	SetLoadQuantities(uint32 uVal)				{ m_nSLSLoadQuantities.Put(uVal); }
	uint32	WhenSourcesOutdated()						{ return m_nSLSOutdated.Get(); }
	void	SetWhenSourcesOutdated(uint32 uVal)			{ m_nSLSOutdated.Put(uVal);}
d323 2
a324 2
	bool	SLSEnable()									{ return m_bSLSEnable.Get(); }
	void	SetSLSEnable(bool bEnable)					{ m_bSLSEnable.Put(bEnable); }
d326 6
a331 6
	int16	GetQueueSize()								{ return m_nQueueSize.Get(); }
	void	SetQueueSize(int16 iSize)					{ m_nQueueSize.Put(iSize); }
	int16	GetRemoteQueueLimit()						{ return m_nRQlimit.Get(); }
	void	SetRemoteQueueLimit(uint16 uVal)			{ m_nRQlimit.Put(uVal); }
	bool	UseRemoteQueueLimit()						{ return m_bUseRQlimit.Get(); }		//Cax2 23/02/03
	void	UseRemoteQueueLimit(bool bit)				{ m_bUseRQlimit.Put(bit); }
d333 2
a334 2
	bool	GetAddServersFromConn()						{ return m_bAddServersFromConn.Get(); }
	void	SetAddServersFromConn(bool bAdd)			{ m_bAddServersFromConn.Put(bAdd); }
d338 8
a345 8
	uint16	GetTrafficOMeterInterval() 					{ return m_nTrafficOMeterInterval.Get(); }
	void	SetTrafficOMeterInterval(uint16 in) 		{ m_nTrafficOMeterInterval.Put(in); }
	uint16	GetStatsInterval() 							{ return m_nStatsInterval.Get(); }
	void	SetStatsInterval(uint16 in) 				{ m_nStatsInterval.Put(in); }
	uint16  GetStatsColumnWidth()						{ return m_nStatsColumnWidth.Get(); }
	uint16  GetDetailColumnWidth()						{ return m_nDetailColumnWidth.Get(); }
	void    SetStatsColumnWidth(uint16 in)				{ m_nStatsColumnWidth.Put(in); }
	void    SetDetailColumnWidth(uint16 in)				{ m_nDetailColumnWidth.Put(in); }
d352 15
a366 15
	bool	IsErrorBeepEnabled()						{ return m_bBeepOnError.Get(); }
	void	SetErrorBeepEnabled(bool bEnable)			{ m_bBeepOnError.Put(bEnable); }
	bool	IsConfirmExitEnabled()						{ return m_bConfirmExit.Get(); }
	void	SetConfirmExitEnabled(bool bEnable)			{ m_bConfirmExit.Put(bEnable); }
	bool	UseSplashScreen()							{ return m_bSplashScreen.Get(); }
	void	SetUseSplashScreen(bool bUse)				{ m_bSplashScreen.Put(bUse); }
	bool	FilterBadIPs()								{ return m_bFilterBadIP.Get(); }
	void    SetFilterBadIPs(bool bFilter)				{ m_bFilterBadIP.Put(bFilter); }
	bool	IsOnlineSignatureEnabled()  				{ return m_bOnlineSig.Get(); }
	void	SetOnlineSignatureEnabled(bool bEnable)		{ m_bOnlineSig.Put(bEnable); }

	int		GetMaxGraphUploadRate()						{ return m_nMaxGraphUploadRate.Get(); }
	void	SetMaxGraphUploadRate(int in)				{ m_nMaxGraphUploadRate.Put(in); }
	int		GetMaxGraphDownloadRate()					{ return m_nMaxGraphDownloadRate.Get(); }
	void	SetMaxGraphDownloadRate(int in)				{ m_nMaxGraphDownloadRate.Put(in); }
d369 5
a373 5
	uint16	GetMaxConnections()							{ return m_nMaxConnections.Get(); }
	void	SetMaxConnections(uint16 uMaxConn)			{ m_nMaxConnections.Put(uMaxConn); }
	uint16	GetMaxSourcePerFile()						{ return m_nMaxSourcePerFile.Get(); }
	void	SetMaxSourcePerFile(uint16 uVal)			{ m_nMaxSourcePerFile.Put(uVal); }
	uint16	GetMaxSourcePerFileSoft()					{ uint16 temp = m_nMaxSourcePerFile.Get()*0.9;  return (temp > 1000)?1000:temp; }
d377 3
a379 3
	uint16	GetMaxSourcePerFileUDP()					{ uint16 temp = m_nMaxSourcePerFile.Get()*0.75; return (temp > 100)? 100:temp; }
	uint16	GetDeadserverRetries()						{ return m_nDeadServerRetries.Get(); }
	void	SetDeadserverRetries(uint16 uRetries)		{ m_nDeadServerRetries.Put(uRetries); }
d396 2
a397 2
	bool	GetMultiple()								{ return m_bMultiple.Get(); }
	void	SetMultiple(bool bEnable)					{ m_bMultiple.Put(bEnable); }
d399 4
a402 4
	WORD	GetLanguageID()								{ return m_nLanguageID.Get(); }
	void	SetLanguageID(WORD wID)						{ m_nLanguageID.Put(wID); }
	int8	IsDoubleClickEnabled()						{ return m_nTransferDoubleclick.Get(); }
	void	SetDoubleClickEnabled(int8 iEnable)			{ m_nTransferDoubleclick.Put(iEnable); }
d405 18
a422 18
	int8	GetToolTipDelay(void)						{ return m_nTooltipDelayTime.Get(); }
	void	SetToolTipDelay(int8 iDelay)				{ m_nTooltipDelayTime.Put(iDelay); }
	bool	IsBringToFront()							{ return m_bBringToForeground.Get(); }
	void	SetBringToFront(bool bBTFront)				{ m_bBringToForeground.Put(bBTFront); }

	int8    GetSplitterbarPosition()					{ return m_nSplitterBarPosition.Get(); }
	void	SetSplitterbarPosition(int8 pos) 			{ m_nSplitterBarPosition.Put(pos); }
	uint16	GetStatsMax()								{ return m_nStatsMax.Get(); }
	void	SetStatsMax(uint16 uMaxStats)				{ m_nStatsMax.Put(uMaxStats); }
	int8	GetStatsAverageMinutes()					{ return m_nStatsAverageMinutes.Get(); }
	void	SetStatsAverageMinutes(int8 in)				{ m_nStatsAverageMinutes.Put(in); }

	bool	GetShowToolbarSpeedMeter()					{ return m_bShowToolbarSpeedMeter.Get(); }
	void	SetShowToolbarSpeedMeter(bool bShow)		{ m_bShowToolbarSpeedMeter.Put(bShow); }
	bool    GetCloseToTray()							{ return m_bCloseToTray.Get(); }
	void	SetCloseToTray(bool bClose)					{ m_bCloseToTray.Put(bClose); }
	bool    GetDetailsOnClick()							{ return m_bDetailsOnClick.Get(); }
	void    SetDetailsOnClick(bool bSet)				{ m_bDetailsOnClick.Put(bSet); }
d425 14
a438 14
	bool    GetUseDownloadAddNotifier()					{ return m_bUseDownloadAddNotifier.Get(); }
	void    SetUseDownloadAddNotifier(bool bUse)		{ m_bUseDownloadAddNotifier.Put(bUse); }
	bool    GetUseDownloadNotifier() 					{ return m_bUseDownloadNotifier.Get(); }
	void    SetUseDownloadNotifier(bool bUse)			{ m_bUseDownloadNotifier.Put(bUse); }
	bool    GetUseChatNotifier()						{ return m_bUseChatNotifier.Get(); }
	void    SetUseChatNotifier(bool bUse)				{ m_bUseChatNotifier.Put(bUse); }
	bool    GetUseLogNotifier()			 				{ return m_bUseLogNotifier.Get(); }
	void    SetUseLogNotifier(bool bUse) 				{ m_bUseLogNotifier.Put(bUse); }
	bool    GetUseSoundInNotifier()		 				{ return m_bUseSoundInNotifier.Get(); }
	void    SetUseSoundInNotifier(bool bUse)			{ m_bUseSoundInNotifier.Put(bUse); }
	bool    GetNotifierPopsEveryChatMsg()				{ return m_bNotifierPopsEveryChatMsg.Get(); }
	void    SetNotifierPopsEveryChatMsg(bool bPop)		{ m_bNotifierPopsEveryChatMsg.Put(bPop); }
	bool	GetNotifierPopOnImportantError()			{ return m_bNotifierImportantError.Get(); }
	void	SetNotifierPopOnImportantError(bool bPop)	{ m_bNotifierImportantError.Put(bPop); }
d446 2
a447 2
	bool	GetIRCAddTimestamp()						{ return m_bIRCAddTimestamp.Get(); }
	void	SetIRCAddTimestamp( bool flag )				{ m_bIRCAddTimestamp.Put(flag); }
d450 4
a453 4
	bool	GetIRCUseChanFilter()						{ return m_bIRCUseChanFilter.Get(); }
	void	SetIRCUseChanFilter(bool flag)				{ m_bIRCUseChanFilter.Put(flag); }
	uint16	GetIRCChannelUserFilter()					{ return m_nIRCChannelUserFilter.Get(); }
	void	SetIRCChanUserFilter(uint16 in_user)		{ m_nIRCChannelUserFilter.Put(in_user); }
d456 10
a465 10
	bool	GetIrcUsePerform()							{ return m_bIRCUsePerform.Get(); }
	void	SetIrcUsePerform(bool flag)					{ m_bIRCUsePerform.Put(flag); }
	bool	GetIRCListOnConnect()						{ return m_bIRCListOnConnect.Get(); }
	void	SetIRCListonConnect(bool flag)				{ m_bIRCListOnConnect.Put(flag); }
	bool	GetIrcAcceptLinks()							{ return m_bIRCAcceptLinks.Get(); }
	void	SetIrcAcceptLInks(bool flag)				{ m_bIRCAcceptLinks.Put(flag); }
	bool	GetIrcIgnoreInfoMessage()					{ return m_bIRCIgnoreInfoMessage.Get(); }
	void	SetIrcIgnoreInfoMessage(bool flag)			{ m_bIRCIgnoreInfoMessage.Put(flag); }
	bool	GetIrcIgnoreEmuleProtoInfoMessage()			{ return m_bIRCIgnoreEmuleProtoInfoMessage.Get(); }
	void	SetIrcIgnoreEmuleProtoInfoMessage(bool flag){ m_bIRCIgnoreEmuleProtoInfoMessage.Put(flag);}
d467 6
a472 6
	bool	GetStartMinimized()							{ return m_bStartMinimized.Get(); }
	void    SetStartMinimized(bool bStart)				{ m_bStartMinimized.Put(bStart); }
	bool	GetSmartIdCheck()							{ return m_bSmartIdCheck.Get(); }
	void	SetSmartIdCheck(bool in_smartidcheck)		{ m_bSmartIdCheck.Put(in_smartidcheck); }
	uint8	GetSmartIdState()							{ return m_nSmartIdState.Get(); }
	void	SetSmartIdState(uint8 in_smartidstate)		{ m_nSmartIdState.Put(in_smartidstate); }
d474 2
a475 2
	bool	GetVerbose()						        { return m_bVerbose.Get(); }
	void 	SetVerbose(bool bEnabled)			        { m_bVerbose.Put(bEnabled); }
d478 2
a479 2
	bool	GetUpdateQueueList()				        { return m_bUpdateQueueList.Get(); }
	void	SetUpdateQueueList(bool bEnabled)			{ m_bUpdateQueueList.Put(bEnabled); }
d481 4
a484 4
	bool	ShowOverhead()						        { return m_bShowOverhead.Get();}
	void	SetShowOverhead(bool bit)					{ m_bShowOverhead.Put(bit);}
	bool	BackupPreview()								{return m_bBackupPreview.Get();}
	void	SetBackupPreview(bool bit)					{ m_bBackupPreview.Put(bit);}
d489 3
a491 3
	int8	UseFlatBar()								{ return m_nDepth3D.Get()==0; }
	int8	Get3DDepth()                                { return m_nDepth3D.Get(); }
	void	Set3DDepth(int8 iStyle)                      { m_nDepth3D.Put(iStyle); }
d493 2
a494 2
	bool    AutoConnectStaticOnly()                   	{return m_bAutoConnectStaticOnly.Get();}	
	void    SetAutoConnectStaticOnly(bool bEnabled)		{m_bAutoConnectStaticOnly.Put(bEnabled);}	
d496 26
a521 26
	DWORD	GetStatsColor(int index) 					{ return m_nStatColors[index].Get(); }
	void	SetStatsColor(int index, DWORD value) 		{ m_nStatColors[index].Put(value); }
	uint8	GetGraphRatio()								{ return m_nGraphRatio.Get(); }
	void	SetGraphRatio(uint8 iNum)					{ m_nGraphRatio.Put(iNum); }
	bool	DoUseSort()									{ return m_bUseSort.Get(); }
	void    SetUseSort(bool bUseSort)					{ m_bUseSort.Put(bUseSort); }
	bool	DoUseSrcSortCol2()							{ return m_bUseSrcSortCol2.Get(); }
	void	SetUseSrcSortCol2(bool bUseSort)			{ m_bUseSrcSortCol2.Put(bUseSort); }
	int8	GetServerSortCol()							{ return m_nServerSortCol.Get(); }
	void	SetServerSortCol(int8 iCol)					{ m_nServerSortCol.Put(iCol); }
	int8	GetUploadSortCol()							{ return m_nUploadSortCol.Get(); }
	void	SetUploadSortCol(int8 iSortCol)				{ m_nUploadSortCol.Put(iSortCol); }
	int8	GetQueueSortCol()							{ return m_nQueueSortCol.Get(); }
	void	SetQueueSortCol(int8 iSortCol)				{ m_nQueueSortCol.Put(iSortCol); }
	int8	GetSearchSortCol()							{ return m_nSearchSortCol.Get(); }
	void	SetSearchSortCol(int8 iSortCol)				{ m_nSearchSortCol.Put(iSortCol); }
	int8	GetIrcSortCol()								{ return m_nIRCSortCol.Get(); }
	void	SetIrcSortCol(int8 iSortCol)				{ m_nIRCSortCol.Put(iSortCol); }
	uint16	GetFileSortCol()							{ return m_nFileSortCol.Get(); }
	void	SetFileSortCol(uint16 uCol)					{ m_nFileSortCol.Put(uCol); }
	int8	GetDownloadSortCol()						{ return m_nDownloadSortCol.Get(); }
	void	SetDownloadSortCol(int8 iSortCol)			{ m_nDownloadSortCol.Put(iSortCol); }
	int8	GetSrcSortCol1()							{ return m_nSrcSortCol1.Get(); }
	void	SetSrcSortCol1(int8 iSortCol)				{ m_nSrcSortCol1.Put(iSortCol); }
	int8	GetSrcSortCol2()							{ return m_nSrcSortCol2.Get(); }
	void	SetSrcSortCol2(int8 iSortCol)				{ m_nSrcSortCol2.Put(iSortCol); }
d523 2
a524 2
	void	SetMaxDownloadConperFive(int in)			{ m_nMaxConperFive.Put(in); }
	uint16	GetMaxConperFive()							{ return m_nMaxConperFive.Get(); }
d529 2
a530 2
	bool	IsSafeConnectEnabled()						{ return m_bSafeConnect.Get(); }
	void	SetSafeConnectEnabled(bool in)				{ m_bSafeConnect.Put(in); }
d533 6
a538 6
	bool	DoUsePT()									{ return m_bUsePartTraffic.Get(); }
	void	SetUsePT(bool in)							{ m_bUsePartTraffic.Put(in); }
	uint8	GetUpbarStyle()								{ return m_nUpbarPartTraffic.Get(); }
	void	SetUpbarStyle(uint8 uStyle)					{ m_nUpbarPartTraffic.Put(uStyle); }
	uint8	GetUpbarColor()								{ return m_nUpbarColorPartTraffic.Get(); }
	void	SetUpbarColor(uint8 uColor)					{ m_nUpbarColorPartTraffic.Put(uColor); }
d542 2
a543 2
	bool	CommunityEnabled()							{ return m_bCommunityEnabled.Get(); }
	void	SetCommunityEnabled(bool bEnable)			{ m_bCommunityEnabled.Put(bEnable); }
d546 26
a571 26
	bool	CommunityNoBanEnabled()						{ return m_bCommunityNoBan.Get(); }
	void	SetCommunityNoBanEnabled(bool bEnable)		{ m_bCommunityNoBan.Put(bEnable); }
	uint32 	NotificationDisplayTime()					{ return m_nNotificationDisplayTime.Get(); }
	void 	SetNotificationDisplayTime(uint32 uTime)	{ m_nNotificationDisplayTime.Put(uTime); }
	uint32 	NotificationFontSize()						{ return m_nNotificationFontSize.Get(); }
	void 	SetNotificationFontSize(uint32 uFontSize)	{ m_nNotificationFontSize.Put(uFontSize); }
	int16 	PriorityHigh()								{ return m_nPriorityHigh.Get(); }
	void 	SetPriorityHigh(int16 iPrio)				{ m_nPriorityHigh.Put(iPrio); }
	int16 	PriorityLow()								{ return m_nPriorityLow.Get(); }
	void 	SetPriorityLow(int16 iPrio)					{ m_nPriorityLow.Put(iPrio); }
	bool	RestartWaiting()							{ return m_bRestartWaiting.Get(); }
	void	SetRestartWaiting(bool bSet)				{ m_bRestartWaiting.Put(bSet); }
	bool	LogToFile()									{ return m_bLogToFile.Get(); }
	void	SetLogToFile(bool bEnable)					{ m_bLogToFile.Put(bEnable); }
	bool	TransferFullChunks()						{ return m_bTransferFullChunks.Get(); }
	void	SetTransferFullChunks(bool bEnable)			{ m_bTransferFullChunks.Put(bEnable); }
	bool	DisableXSUpTo()								{ return m_bDisableXSUpTo.Get(); }
	void	SetDisableXSUpTo(bool bDisable)				{ m_bDisableXSUpTo.Put(bDisable); }
	uint16	XSUpTo()									{ return m_nXSUpTo.Get(); }
	void	SetXSUpTo(uint16 uVal)						{ m_nXSUpTo.Put(uVal); }
	uint32  SrvConTimeout()								{ return m_nSrvConTimeout.Get(); }
	void	SetSrvConTimeout(uint32 timeout)			{ m_nSrvConTimeout.Put(timeout); }
	bool	SlowComplete()								{ return m_bSlowComplete.Get(); }
	void	SetSlowComplete(uint16 bSlow)				{ m_bSlowComplete.Put(bSlow); }
	uint16	SlowCompleteBlockSize()						{ return m_nSlowCompleteBlockSize.Get(); }
	void	SetSlowCompleteBlockSize(uint16 uSize)		{ m_nSlowCompleteBlockSize.Put(uSize); }
d574 2
a575 2
	uint8	GetFontSize()								{ return m_nFontSize.Get(); }
	void	SetFontSize(uint8 size)						{ m_nFontSize.Put(size); }
d578 13
a590 13
	bool	IsUploadPartsEnabled()						{ return m_bUploadParts.Get(); }
	void	SetUploadPartsEnabled(bool bEnable)			{ m_bUploadParts.Put(bEnable); }
	bool	IsA4AFStringEnabled()						{ return m_bA4AFStringEnabled.Get(); }
	void	SetA4AFStringEnabled(bool bEnable)          { m_bA4AFStringEnabled.Put(bEnable); }
	bool	IsBanMessageEnabled()						{ return m_bBanMessageEnabled.Get(); }
	void	SetBanMessageEnabled(bool bEnable)          { m_bBanMessageEnabled.Put(bEnable); }
	int		GetMethod()									{ return m_nSearchMethod.Get(); }
	void	SetMethod(int Value) 						{ m_nSearchMethod.Put(Value); }
	bool	AutoTakeED2KLinks()							{ return m_bAutoTakeLinks.Get(); }
	void	SetAutoTakeED2KLinks(bool bEnable)          { m_bAutoTakeLinks.Put(bEnable); }
	uint16	GetFileBufferSize()							{ return m_nFileBufferSize.Get(); }
	void	SetFileBufferSize(int Value)      		    { m_nFileBufferSize.Put(Value); }
	int		GetMainProcessPriority()					{ return m_nMainProcessPriority.Get(); }
d593 36
a628 36
	bool	IsSCHEnabled()								{ return m_bSCHEnabled.Get(); }
	void	SetSCHEnabled(bool bEnable)					{ m_bSCHEnabled.Put(bEnable); }
	bool	IsSCHExceptMon()							{ return m_bSCHExceptMon.Get(); }
	void	SetSCHExceptMon(bool bEnable)				{ m_bSCHExceptMon.Put(bEnable); }
	bool	IsSCHExceptTue()							{ return m_bSCHExceptTue.Get(); }
	void	SetSCHExceptTue(bool bEnable)				{ m_bSCHExceptTue.Put(bEnable); }
	bool	IsSCHExceptWed()							{ return m_bSCHExceptWed.Get(); }
	void	SetSCHExceptWed(bool bEnable)				{ m_bSCHExceptWed.Put(bEnable); }
	bool	IsSCHExceptThu()							{ return m_bSCHExceptThu.Get(); }
	void	SetSCHExceptThu(bool bEnable)				{ m_bSCHExceptThu.Put(bEnable); }
	bool	IsSCHExceptFri()							{ return m_bSCHExceptFri.Get(); }
	void	SetSCHExceptFri(bool bEnable)				{ m_bSCHExceptFri.Put(bEnable); }
	bool	IsSCHExceptSat()							{ return m_bSCHExceptSat.Get(); }
	void	SetSCHExceptSat(bool bEnable)				{ m_bSCHExceptSat.Put(bEnable); }
	bool	IsSCHExceptSun()							{ return m_bSCHExceptSun.Get(); }
	void	SetSCHExceptSun(bool bEnable)				{ m_bSCHExceptSun.Put(bEnable); }
	uint32	GetSCHShift1()								{ return m_nSCHShift1.Get(); }
	void	SetSCHShift1(uint32 Time)					{ m_nSCHShift1.Put(Time); }
	uint32	GetSCHShift2()								{ return m_nSCHShift2.Get(); }
	void	SetSCHShift2(uint32 Time)					{ m_nSCHShift2.Put(Time); }
	uint16	GetSCHShift1Upload()						{ return m_nSCHShift1Upload.Get(); }
	void	SetSCHShift1Upload(uint16 Value)			{ m_nSCHShift1Upload.Put(Value); }
	uint16	GetSCHShift1Download()						{ return m_nSCHShift1Download.Get(); }
	void	SetSCHShift1Download(uint16 Value)			{ m_nSCHShift1Download.Put(Value); }
	uint16	GetSCHShift1conn()							{ return m_nSCHShift1conn.Get(); }
	void	SetSCHShift1conn(uint16 Value)				{ m_nSCHShift1conn.Put(Value); }
	uint16	GetSCHShift15sec()							{ return m_nSCHShift15sec.Get(); }
	void	SetSCHShift15sec(uint16 Value)				{ m_nSCHShift15sec.Put(Value); }
	uint16	GetSCHShift2Upload()						{ return m_nSCHShift2Upload.Get(); }
	void	SetSCHShift2Upload(uint16 Value)			{ m_nSCHShift2Upload.Put(Value); }
	uint16	GetSCHShift2Download()						{ return m_nSCHShift2Download.Get(); }
	void	SetSCHShift2Download(uint16 Value)			{ m_nSCHShift2Download.Put(Value); }
	uint16	GetSCHShift2conn()							{ return m_nSCHShift2conn.Get(); }
	void	SetSCHShift2conn(uint16 Value)				{ m_nSCHShift2conn.Put(Value); }
	uint16	GetSCHShift25sec()							{ return m_nSCHShift25sec.Get(); }
	void	SetSCHShift25sec(uint16 Value)				{ m_nSCHShift25sec.Put(Value); }
d631 3
a633 3
	void	SetMaxUpload(uint16 nMaxUpload) 			{ m_nMaxUpload.Put(nMaxUpload); }
	void	SetMaxDownload(uint16 nMaxDownload)			{ m_nMaxDownload.Put(nMaxDownload); }
	uint16  GetMaxDownloadValue()						{ return m_nMaxDownload.Get(); }
d636 3
a638 3
	bool GetLancastEnabled()							{ return m_LancastEnabled.Get(); }
	void SetLancastEnabled(bool bEnable)				{ m_LancastEnabled.Put(bEnable); }
	bool GetLancastUseDefaultIP()						{ return m_UseDefaultIP.Get(); }
d640 2
a641 2
	uint32 GetLancastSubnet()							{ return m_LancastSubnet.Get(); }
	uint16 GetLancastPort()								{ return m_LancastPort.Get(); }
d650 2
a651 2
	bool	GetMlDonkeyCM()								{ return m_bMlDonkeyCM.Get(); }
	void	SetMlDonkeyCM(bool bEnable)					{ m_bMlDonkeyCM.Put(bEnable); }
d669 4
a672 4
	uint8   GetAcceptMessagesFrom()						{ return m_nAcceptMessagesFrom.Get(); }
	void	SetAcceptMessagesFrom(uint8 in)				{ m_nAcceptMessagesFrom.Put(in); }
	bool    GetAwayState()								{ return m_nAwayState.Get(); }
	void	SetAwayState(bool in)						{ m_nAwayState.Put(in); }
d683 4
a686 4
	bool	GetAutoFilenameCleanup()			{ return m_bAutoFilenameCleanup.Get(); }
	void	SetAutoFilenameCleanup(bool in)		{ m_bAutoFilenameCleanup.Put(in); }
	bool	GetFilenameCleanupTags()			{ return m_bFilenameCleanupTags.Get(); }
	void	SetFilenameCleanupTags(bool in)		{ m_bFilenameCleanupTags.Put(in); }
d712 1
a712 1
	CSecuredVar<WORD>		m_nLanguageID;
d714 4
a717 4
	CSecuredVar<uint16>		m_nMaxUpload;
	CSecuredVar<uint16>		m_nMaxDownload;
	CSecuredVar<uint16>		m_nMaxConnections;
	CSecuredVar<uint16>		m_nMaxSourcePerFile;
d722 12
a733 12
	CSecuredVar<int>		m_nMaxGraphDownloadRate;
	CSecuredVar<int>		m_nMaxGraphUploadRate;
	CSecuredVar<uint8>		m_nGraphRatio;

	CSecuredVar<bool>		m_bReconnect;
	CSecuredVar<int8>		m_nDeadServer;
	CSecuredVar<int8>		m_nScoreSystem;
	CSecuredVar<bool>		m_bAutoServerList;
	CSecuredVar<bool>		m_bAutoConnect;
	CSecuredVar<bool>		m_bAutoConnectStaticOnly;
	CSecuredVar<bool>		m_bAddServersFromConn;
	CSecuredVar<bool>		m_bFilterBadIP;
d736 15
a750 15
	CSecuredVar<bool>		m_bUpdateNotify;
	CSecuredVar<bool>		m_bMinToTray;
	CSecuredVar<bool>		m_bConfirmExit;
	CSecuredVar<bool>		m_bBeepOnError;
	CSecuredVar<bool>		m_bSplashScreen;
	CSecuredVar<bool>		m_bOnlineSig;
	CSecuredVar<bool>		m_bShowOverhead;
	CSecuredVar<bool>		m_bBackupPreview;
	CSecuredVar<int8>		m_nTransferDoubleclick;

	CSecuredVar<int>		m_nDepth3D;
	CSecuredVar<uint16>		m_nTrafficOMeterInterval;
	CSecuredVar<uint16>		m_nStatsInterval;
	CSecuredVar<uint16>		m_nStatsColumnWidth;
	CSecuredVar<uint16>		m_nDetailColumnWidth;		//Cax2 
d758 11
a768 11
	CSecuredVar<uint16>		m_nPort;
	CSecuredVar<uint16>		m_nUDPPort;
	CSecuredVar<bool>		m_bUseRQlimit;	//Cax2 change
	CSecuredVar<uint16>		m_nRQlimit;

	CSecuredVar<bool>		m_bA4AFStringEnabled;
	CSecuredVar<bool>		m_bBanMessageEnabled;
	CSecuredVar<int>		m_nSearchMethod;
	CSecuredVar<bool>		m_bAutoTakeLinks;
	CSecuredVar<uint16>		m_nFileBufferSize;
	CSecuredVar<int>		m_nMainProcessPriority;
d771 30
a800 30
	CSecuredVar<bool>		m_bSCHEnabled;
	CSecuredVar<uint32>		m_nSCHShift1;
	CSecuredVar<uint32>		m_nSCHShift2;
	CSecuredVar<uint16>		m_nSCHShift1Upload;
	CSecuredVar<uint16>		m_nSCHShift1Download;
	CSecuredVar<uint16>		m_nSCHShift1conn;
	CSecuredVar<uint16>		m_nSCHShift15sec;
	CSecuredVar<uint16>		m_nSCHShift2Upload;
	CSecuredVar<uint16>		m_nSCHShift2Download;
	CSecuredVar<uint16>		m_nSCHShift2conn;
	CSecuredVar<uint16>		m_nSCHShift25sec;
	CSecuredVar<bool>		m_bSCHExceptMon;
	CSecuredVar<bool>		m_bSCHExceptTue;
	CSecuredVar<bool>		m_bSCHExceptWed;
	CSecuredVar<bool>		m_bSCHExceptThu;
	CSecuredVar<bool>		m_bSCHExceptFri;
	CSecuredVar<bool>		m_bSCHExceptSat;
	CSecuredVar<bool>		m_bSCHExceptSun;

	CSecuredVar<uint16>		m_nProfile;
	CSecuredVar<bool>		m_bUAP;
	CSecuredVar<bool>		m_bDAP;
	CSecuredVar<bool>		m_bDisableXS;
	CSecuredVar<bool>		m_bStartDownloadPaused;
	CSecuredVar<bool>		m_bDownloadPausedOnComplete;
	CSecuredVar<bool>		m_bRemoveNNS;

	CSecuredVar<uint32>		m_nBadClientBanTime;
	CSecuredVar<uint32>		m_nMinRequestTime;
	CSecuredVar<uint8>		m_nBadClientBan;
d804 29
a832 29
	CSecuredVar<bool>		m_bUseProxyListenPort;
	CSecuredVar<uint16>		m_nListenPort;
	CSecuredVar<bool>		m_bMlDonkeyCM;

	CSecuredVar<uint32>		m_nSLSRestoreSourcesTime;
	CSecuredVar<uint32>		m_nSLSLoadQuantities;
	CSecuredVar<uint32>		m_nSLSOutdated;
	CSecuredVar<bool>		m_bSLSEnable;

	CSecuredVar<int16>		m_nQueueSize;
	CSecuredVar<uint16>		m_nDeadServerRetries;
	CSecuredVar<bool>		m_bSmartIdCheck;
	CSecuredVar<uint8>		m_nSmartIdState;
	CSecuredVar<bool>		m_bVerbose;
	CSecuredVar<bool>		m_bUpdateQueueList;
	CSecuredVar<uint16>		m_nMaxConperFive;
	CSecuredVar<bool>		m_bSafeConnect;

	CSecuredVar<bool>		m_bMultiple;
	CSecuredVar<int8>		m_nTooltipDelayTime;
	CSecuredVar<bool>		m_bBringToForeground;
	CSecuredVar<int8>		m_nSplitterBarPosition;
	CSecuredVar<uint16>		m_nStatsMax;
	CSecuredVar<int8>		m_nStatsAverageMinutes;
	CSecuredVar<bool>		m_bShowToolbarSpeedMeter; 
	CSecuredVar<bool>		m_bCloseToTray;
	CSecuredVar<bool>		m_bDetailsOnClick;
	CSecuredVar<bool>		m_bStartMinimized;
	CSecuredVar<bool>		m_bCommunityEnabled;
d834 11
a844 11
	CSecuredVar<bool>		m_bCommunityNoBan;
	CSecuredVar<int16>		m_nPriorityHigh;
	CSecuredVar<int16>		m_nPriorityLow;
	CSecuredVar<bool>		m_bRestartWaiting;
	CSecuredVar<bool>		m_bLogToFile;
	CSecuredVar<bool>		m_bTransferFullChunks;
	CSecuredVar<bool>		m_bDisableXSUpTo;
	CSecuredVar<uint16>		m_nXSUpTo;
	CSecuredVar<uint32>		m_nSrvConTimeout;
	CSecuredVar<bool>		m_bSlowComplete;
	CSecuredVar<uint16>		m_nSlowCompleteBlockSize;
d846 1
a846 1
	CSecuredVar<bool>		m_bUploadParts;
d848 6
a853 6
	CSecuredVar<bool>		m_bUseDownloadNotifier;
	CSecuredVar<bool>		m_bUseDownloadAddNotifier;
	CSecuredVar<bool>		m_bUseChatNotifier;
	CSecuredVar<bool>		m_bUseLogNotifier;	
	CSecuredVar<bool>		m_bUseSoundInNotifier;
	CSecuredVar<bool>		m_bNotifierImportantError;
d855 3
a857 3
	CSecuredVar<bool>		m_bNotifierPopsEveryChatMsg;
	CSecuredVar<uint32>		m_nNotificationDisplayTime;
	CSecuredVar<uint32>		m_nNotificationFontSize;
d860 1
a860 1
	CSecuredVar<uint8>		m_nFontSize;
d863 12
a874 12
	CSecuredVar<DWORD>		m_nStatColors[15];
	CSecuredVar<bool>		m_bUseSort;
	CSecuredVar<bool>		m_bUseSrcSortCol2;
	CSecuredVar<int8>		m_nServerSortCol;
	CSecuredVar<int8>		m_nUploadSortCol;
	CSecuredVar<int8>		m_nQueueSortCol;
	CSecuredVar<int8>		m_nSearchSortCol;
	CSecuredVar<int8>		m_nIRCSortCol;
	CSecuredVar<uint16>		m_nFileSortCol;
	CSecuredVar<int8>		m_nDownloadSortCol;
	CSecuredVar<int8>		m_nSrcSortCol1;
	CSecuredVar<int8>		m_nSrcSortCol2;
d879 1
a879 1
	CSecuredVar<bool>		m_bIRCAddTimestamp;
d881 2
a882 2
	CSecuredVar<bool>		m_bIRCUseChanFilter;
	CSecuredVar<uint16>		m_nIRCChannelUserFilter;
d884 5
a888 5
	CSecuredVar<bool>		m_bIRCUsePerform;
	CSecuredVar<bool>		m_bIRCListOnConnect;
	CSecuredVar<bool>		m_bIRCAcceptLinks;
	CSecuredVar<bool>		m_bIRCIgnoreInfoMessage;
	CSecuredVar<bool>		m_bIRCIgnoreEmuleProtoInfoMessage;
d893 5
a897 5
	CSecuredVar<uint16>		m_nWebPort;
	CSecuredVar<bool>		m_bWebEnabled;
	CSecuredVar<bool>		m_bWebLowEnabled;
	CSecuredVar<bool>		m_bWebUseGzip;
	CSecuredVar<int>		m_nWebPageRefresh;
d900 3
a902 3
	CSecuredVar<bool>		m_bUsePartTraffic;
	CSecuredVar<uint8>		m_nUpbarPartTraffic;		// 0=one info 1=2 infos 2=3infos
	CSecuredVar<uint8>		m_nUpbarColorPartTraffic;	// 0=rainbow style 1=more rainbow 2=downloadlist-like 3=girlie
d905 6
a910 6
	CSecuredVar<bool>  		m_LancastEnabled;
	CSecuredVar<bool>   	m_UseDefaultIP;
	CSecuredVar<uint32> 	m_DefaultLancastIP;
	CSecuredVar<uint32>		m_LancastIP;
	CSecuredVar<uint32>		m_LancastSubnet;
	CSecuredVar<uint16>		m_LancastPort;
d915 1
a915 1
	CSecuredVar<int8>		m_nToolbarLabels;
d918 2
a919 2
	CSecuredVar<uint8>		m_nAcceptMessagesFrom;
	CSecuredVar<int8>		m_nAwayState;
d922 1
a922 1
	CSecuredVar<BOOL>		m_bIsNTBased;
d926 2
a927 2
	CSecuredVar<bool>  		m_bAutoFilenameCleanup;
	CSecuredVar<bool>   	m_bFilenameCleanupTags;
d931 1
a931 1
	static bool bWinVerAlreadyDetected;
@


1.60
log
@code cleanup
@
text
@d41 3
a43 3
	char name[50];
	char user[50];
	char password[50];
d116 1
a116 1
	char	TxtEditor[256];
d486 1
a486 1
	char*	GetTxtEditor()						        {return prefs->TxtEditor;}
d652 1
a652 1
	ProxySettings GetProxy()                            { ProxySettings Ret = prefs->proxy; return Ret; }
@


1.59
log
@code cleanup
@
text
@d275 1
a275 1
	void	SetToolbarSettings(TCHAR* in) 				{ m_sToolbarSettings.Put(in); }
@


1.58
log
@SyruS: implemented netwolf's commentfilter (partly from 0.28b)
changed default button of "allow multiple instances" to "no"
@
text
@d285 1
a285 1
	void	SetA4AFHash(uchar* file_hash)				{ memcpy(prefs->A4AF_file_hash, file_hash, sizeof(prefs->A4AF_file_hash)); }
@


1.57
log
@complete sources column
@
text
@d688 3
d928 2
@


1.56
log
@SyruS: customizable cleanup of filenames
@
text
@d79 3
a81 3
	int16	sharedColumnWidths[11];
	BOOL	sharedColumnHidden[11];
	INT		sharedColumnOrder[11];
@


1.55
log
@code cleanup
@
text
@d680 8
d920 5
@


1.54
log
@Fixed new column in DownloadList. Queue Min Size changed in languages and some minor web template fixes.
@
text
@d226 1
a226 1
	char*	GetAppDir()									{return appdir;}
d685 1
a685 1
	char* appdir;
@


1.53
log
@Upgrade to 0.28a
@
text
@d67 3
a69 3
	int16	downloadColumnWidths[13];
	BOOL	downloadColumnHidden[13];
	INT		downloadColumnOrder[13];
@


1.52
log
@Webserver from official 0.27c
@
text
@d121 2
a122 1
	ProxySettings proxy;
d288 10
a297 10
	uint16	GetHTTPPort()								{ return m_nWebPort.Get(); }
	void	SetHTTPPort(uint16 uPort)					{ m_nWebPort.Put(uPort); }
	CString	GetHTTPPass()								{ return CString(m_sWebPassword.Get().c_str()); }
	void	SetHTTPPass(CString strNewPass)				{ m_sWebPassword.Put(MD5Sum(strNewPass).GetHash().GetBuffer(0)); }
	CString	GetHTTPLowPass()							{ return CString(m_sLowWebPassword.Get().c_str()); }
	void	SetHTTPLowPass(CString strNewPass)			{ m_sLowWebPassword.Put(MD5Sum(strNewPass).GetHash().GetBuffer(0)); }
	bool	GetHTTPIsEnabled()							{ return m_bWebEnabled.Get(); }
	void	SetHTTPIsEnabled(bool bEnable)				{ m_bWebEnabled.Put(bEnable); }
	bool	GetHTTPIsLowUserEnabled()					{ return m_bWebLowEnabled.Get(); }
	void	SetHTTPIsLowUserEnabled(bool bEnable)		{ m_bWebLowEnabled.Put(bEnable); }
d675 5
@


1.51
log
@Fixed bug #166
@
text
@d291 2
d295 2
d476 1
d875 1
d878 1
@


1.50
log
@Updated Night Shift to Scheduller (needs more testing and a new icon from DrSiRiUs... coming!)
@
text
@d119 1
d668 1
@


1.50.2.1
log
@27a partial merge
@
text
@d67 3
a69 3
	int16	downloadColumnWidths[14];
	BOOL	downloadColumnHidden[14];
	INT		downloadColumnOrder[14];
d79 6
a84 6
	int16	sharedColumnWidths[12];
	BOOL	sharedColumnHidden[12];
	INT		sharedColumnOrder[12];
	int16	serverColumnWidths[10];
	BOOL	serverColumnHidden[10];
	INT 	serverColumnOrder[10];
a120 3
	bool	watchclipboard;
	CString notifierConfiguration;
	CString datetimeformat;
d248 1
a248 1
	void	SetIncomingDir(CString strDir)				{ MakeFoldername(strDir); m_sIncomingDir.Put(strDir.GetBuffer(0)); }
d250 1
a250 1
	void	SetTempDir(CString strDir)					{ MakeFoldername(strDir); m_sTempDir.Put(strDir.GetBuffer(0)); }
a657 6
    CString   GetNotifierConfiguration()    {return prefs->notifierConfiguration;}; //<<-- enkeyDEV(kei-kun) -skinnable notifier-
    void    SetNotifierConfiguration(CString configFullPath) {prefs->notifierConfiguration=configFullPath; } //<<-- enkeyDEV(kei-kun) -skinnable notifier-
	CString	GetDateTimeFormat()		{ return prefs->datetimeformat;}
	void	SetDateTimeFormat(CString in)		{ prefs->datetimeformat=in;}
	bool	WatchClipboard4ED2KLinks()	{ return prefs->watchclipboard;}
	void	SetWatchClipboard4ED2KLinks(bool in)	{ prefs->watchclipboard=in;}
@


1.50.2.2
log
@final touches on 27a stuff, i hope...
@
text
@d121 3
d661 6
a666 6
    CString   GetNotifierConfiguration()    {return m_snotifierConfiguration.Get().c_str();}; //<<-- enkeyDEV(kei-kun) -skinnable notifier-
    void    SetNotifierConfiguration(CString configFullPath) {m_snotifierConfiguration=configFullPath.GetBuffer(0); } //<<-- enkeyDEV(kei-kun) -skinnable notifier-
	CString	GetDateTimeFormat()		{ return m_sdatetimeformat.Get().c_str();}
	void	SetDateTimeFormat(CString in)		{ m_sdatetimeformat=in.GetBuffer(0);}
	bool	WatchClipboard4ED2KLinks()	{ return m_bwatchclipboard.Get();}
	void	SetWatchClipboard4ED2KLinks(bool in)	{ m_bwatchclipboard=in;}
a905 4
	CSecuredVar<bool>		m_bwatchclipboard;
	CSecuredVar<string>		m_snotifierConfiguration;
	CSecuredVar<string>		m_sdatetimeformat;

@


1.50.2.3
log
@27c
@
text
@a118 2
	bool	dontcompressavi;
	uint16	maxmsgsessions;
d516 1
a516 1
	void	SetMaxConsPerFive(int in)			{ m_nMaxConperFive.Put(in); }
a672 2
	bool	GetDontCompressAvi()					{ return prefs->dontcompressavi;}
	uint16	GetMsgSessionsMax()						{ return prefs->maxmsgsessions;}
@


1.49
log
@*** empty log message ***
@
text
@d253 2
a254 2
	CString	GetVideoPlayer()  						{ return CString(m_sVideoPlayer.Get().c_str()); }
	void    SetVideoPlayer(CString str)				{ m_sVideoPlayer.Put(str.GetBuffer(0)); }
d278 2
a279 2
	int8	GetToolbarLabelSettings()						{ return m_nToolbarLabels.Get(); }
	void	SetToolbarLabelSettings(int8 settings)			{ m_nToolbarLabels.Put(settings); }
d323 1
a323 1
	void	SetRemoteQueueLimit(uint16 uVal)		{ m_nRQlimit.Put(uVal); }
d325 1
a325 1
	void	UseRemoteQueueLimit(bool bit)			{ m_bUseRQlimit.Put(bit); }
d369 2
a370 2
	//uint16  GetMaxSourcesPerFileSoftValue()				{CSingleLock PrefLock(&m_Pref_Mutex_MaxSourcesPerFile,TRUE); uint16 nRet = prefs->maxsourceperfilesoft; return nRet; }
	//void    SetMaxSourcesPerFileSoftValue(uint16 uSrc)  {CSingleLock PrefLock(&m_Pref_Mutex_MaxSourcesPerFile,TRUE); prefs->maxsourceperfilesoft = uSrc; }
d569 2
a570 2
	enHashPriority	GetHashingPriority(void)					{ return m_HashingPriority.Get(); }
	void	SetHashingPriority(enHashPriority hashing)			{ m_HashingPriority.Put(hashing); }
d573 11
a583 11
	bool	IsA4AFStringEnabled()						{return m_bA4AFStringEnabled.Get();}
	void	SetA4AFStringEnabled(bool bEnable)          {m_bA4AFStringEnabled.Put(bEnable);}
	bool	IsBanMessageEnabled()						{return m_bBanMessageEnabled.Get();}
	void	SetBanMessageEnabled(bool bEnable)          {m_bBanMessageEnabled.Put(bEnable);}
	int		GetMethod()									{return m_nSearchMethod.Get();}
	void	SetMethod(int Value) 						{m_nSearchMethod.Put(Value);}
	bool	AutoTakeED2KLinks()							{return m_bAutoTakeLinks.Get();}
	void	SetAutoTakeED2KLinks(bool bEnable)          {m_bAutoTakeLinks.Put(bEnable);}
	uint16	GetFileBufferSize()							{return m_nFileBufferSize.Get();}
	void	SetFileBufferSize(int Value)      		    {m_nFileBufferSize.Put(Value);}
	int		GetMainProcessPriority()					{return m_nMainProcessPriority.Get();}
d586 36
a621 18
	bool	IsNSEnabled()								{return m_bNSEnabled.Get();}
	void	SetNSEnabled(bool bEnable)					{m_bNSEnabled.Put(bEnable);}
	bool	IsNSExceptSat()								{return m_bNSExceptSat.Get();}
	void	SetNSExceptSat(bool bEnable)				{m_bNSExceptSat.Put(bEnable);}
	bool	IsNSExceptSun()								{return m_bNSExceptSun.Get();}
	void	SetNSExceptSun(bool bEnable)				{m_bNSExceptSun.Put(bEnable);}
	uint32	GetNSStart()								{return m_nNSStart.Get();}
	void	SetNSStart(uint32 Time)						{m_nNSStart.Put(Time);}
	uint32	GetNSEnd()									{return m_nNSEnd.Get();}
	void	SetNSEnd(uint32 Time)						{m_nNSEnd.Put(Time);}
	uint16	GetNSDayUpload()							{return m_nNSDayUpload.Get();}
	void	SetNSDayUpload(uint16 Value)				{m_nNSDayUpload.Put(Value);}
	uint16	GetNSDayDownload()							{return m_nNSDayDownload.Get();}
	void	SetNSDayDownload(uint16 Value)				{m_nNSDayDownload.Put(Value);}
	uint16	GetNSNightUpload()							{return m_nNSNightUpload.Get();}
	void	SetNSNightUpload(uint16 Value)				{m_nNSNightUpload.Put(Value);}
	uint16	GetNSNightDownload()						{return m_nNSNightDownload.Get();}
	void	SetNSNightDownload(uint16 Value)			{m_nNSNightDownload.Put(Value);}
d624 3
a626 3
	void	SetMaxUpload(uint16 nMaxUpload) 			{m_nMaxUpload.Put(nMaxUpload);}
	void	SetMaxDownload(uint16 nMaxDownload)			{m_nMaxDownload.Put(nMaxDownload);}
	uint16  GetMaxDownloadValue()						{return m_nMaxDownload.Get();}
d629 3
a631 3
	bool GetLancastEnabled()					{return m_LancastEnabled.Get();}
	void SetLancastEnabled(bool bEnable)		{m_LancastEnabled.Put(bEnable);}
	bool GetLancastUseDefaultIP()				{return m_UseDefaultIP.Get();}
d633 2
a634 2
	uint32 GetLancastSubnet()					{return m_LancastSubnet.Get();}
	uint16 GetLancastPort()						{return m_LancastPort.Get();}
d653 5
a657 5
	int	GetIPFilterLevel()			{ return 128;}
	CString GetMessageFilter()		{ return prefs->messageFilter;}
	void SetMessageFilter(CString in) {prefs->messageFilter=in;}
	bool	ShowRatesOnTitle()		{ return prefs->showRatesInTitle;}
	void	SetRatesOnTitle(bool show) { prefs->showRatesInTitle=show;}
d660 6
a665 6
	CString   GetAwayStateMessage()			{return CString(m_sAwayStateMessage.Get().c_str());}
	void	SetAwayStateMessage(CString in)	{m_sAwayStateMessage.Put(in.GetBuffer(0));}
	uint8   GetAcceptMessagesFrom()			{return m_nAcceptMessagesFrom.Get();}
	void	SetAcceptMessagesFrom(uint8 in)	{m_nAcceptMessagesFrom.Put(in);}
	bool    GetAwayState()					{return m_nAwayState.Get();}
	void	SetAwayState(bool in)			{m_nAwayState.Put(in);}
d745 20
a764 9
	CSecuredVar<uint16>		m_nNSDayUpload;
	CSecuredVar<uint16>		m_nNSDayDownload;
	CSecuredVar<uint16>		m_nNSNightUpload;
	CSecuredVar<uint16>		m_nNSNightDownload;
	CSecuredVar<uint32>		m_nNSStart;
	CSecuredVar<uint32>		m_nNSEnd;
	CSecuredVar<bool>		m_bNSExceptSat;
	CSecuredVar<bool>		m_bNSExceptSun;
	CSecuredVar<bool>		m_bNSEnabled;
d780 1
a780 1
    CSecuredVar<bool>		m_bUseProxyListenPort;
a877 1
	//////////////////////////////////////////////////
d879 7
a885 7
	CSecuredVar<bool>   m_LancastEnabled;
	CSecuredVar<bool>   m_UseDefaultIP;
	CSecuredVar<uint32> m_DefaultLancastIP;
	CSecuredVar<uint32> m_LancastIP;
	CSecuredVar<uint32> m_LancastSubnet;
	CSecuredVar<uint16>	m_LancastPort;
	///////////////////////////////////////////////////
a894 1
	//END enkeyDEV(kei-kun) -Messaging preferences-
@


1.48
log
@*** empty log message ***
@
text
@d28 2
@


1.47
log
@Changed SercuredVar class  to support operators "=" and <T> to addition to Set() and Get() , this way they are easier to use :)
@
text
@d24 1
a45 57
enum SecuredVarErrors
{
	VariableNotInitialized
};

// Secured variable and array
template <class T> class CSecuredVar
{
public:
	CSecuredVar()
	{
		m_bInitialized = false;
	}

	~CSecuredVar()
	{
	}

	T Get()
	{
		CSingleLock AccessLock(&m_Access, TRUE);
		if(!m_bInitialized)
			throw VariableNotInitialized;
		T TempVal = m_Val;
		return TempVal;
	}

	void Put(T NewVal)
	{
		CSingleLock AccessLock(&m_Access, TRUE);
		m_bInitialized = true;
		m_Val = NewVal;
	}
	T& operator=(T NewVal)
	{
		Put(NewVal);
		return *this;
	}
	operator T()
	{
		return Get();
	}

private:
	T m_Val;

	CMutex	m_Access;
	bool	m_bInitialized;
};
/*
template <class T, unsigned int nSize> class CSecuredArr
{
public:
	CSecuredVar()
	{
		m_bInitialized = false;
	}
a46 33
	~CSecuredVar()
	{
	}

	T* GetPointer()
	{
		if(!m_bInitialized)
			throw VariableNotInitialized;

		return m_pVal;
	}

	void Put(T* pNewVal)
	{
		CSingleLock AccessLock(&m_Access, TRUE);
		m_bInitialized = true;
		memcpy(m_pVal, pNewVal, nSize);
	}

	int Compare(T* pCompareVal)
	{
		CSingleLock AccessLock(&m_Access, TRUE);
		int nRet = memcmp(m_pVal, pCompareVal, nSize);
		return nRet;
	}

private:
	T m_pVal[nSize];

	CMutex	m_Access;
	bool	m_bInitialized;
};
*/
@


1.46
log
@*** empty log message ***
@
text
@d78 9
@


1.45
log
@*** empty log message ***
@
text
@d65 1
a67 1
		CSingleLock AccessLock(&m_Access, TRUE);
@


1.44
log
@sETtHREADlOCALE DOES NOT WORK ON NON-nt (WIN9X) BASED SYSTEMS
@
text
@d948 3
@


1.43
log
@*** empty log message ***
@
text
@d948 2
@


1.42
log
@Changed DownloadListCtrl number of columns (not updated by reCDVst)
@
text
@d946 2
@


1.41
log
@added columns from official and changed transferred column
@
text
@d145 3
a147 3
	int16	downloadColumnWidths[12];	//more columns
	BOOL	downloadColumnHidden[12];
	INT		downloadColumnOrder[12];
a156 2
	//--- xrmb:parttraffic ---
	//--- its not 9 anymore, its 11 ---
d159 1
a159 2
	INT	sharedColumnOrder[11];
	//--- :xrmb ---
a162 1
	//Cax2 irc columns
@


1.40
log
@Continuing to convert variables to CSecuredVar template
@
text
@d145 3
a147 3
	int16	downloadColumnWidths[11];	//more columns
	BOOL	downloadColumnHidden[11];
	INT		downloadColumnOrder[11];
@


1.39
log
@Continuing to convert variables to CSecuredVar template
@
text
@d135 7
a169 7
	DWORD	statcolors[15];

	//--- xrmb:partTrafficPrefs ---
	bool	m_pt_useit;			// Cax2
	uint8	m_upbar_st;			// 0=one info 1=2 infos 2=3infos
	uint8	m_upbar_cl;			// 0=rainbow style 1=more rainbow 2=downloadlist-like 3=girlie
	//--- :xrmb ---
a170 4
	int8	m_iToolDelayTime;	// tooltip delay time in seconds
	int8	bringtoforeground;
	int8	splitterbarPosition;
	uint16	deadserverretries;
a171 2
	uint16  statsMax;
	int8	statsAverageMinutes;
a172 1
	// reCDVst (Load/Save Sources settings)
d174 1
a174 14
	// DonGato
	uint32	NotificationDisplayTime;
	uint32	NotificationFontSize;
	int16	PriorityHigh;
	int16	PriorityLow;
	bool	CommunityEnabled;
	char	CommunityString[100];
	bool	CommunityNoBan;
	bool	RestartWaiting;
	bool	LogToFile;
	bool	TransferFullChunks;
	int8    closeToTray;
	bool	DetailsOnClick;
	uint32	SrvConTimeout;
a175 31
	bool	DisableXSUpTo;
	uint16	XSUpTo;
	bool	SlowComplete;
	uint16	SlowCompleteBlockSize;
	char	UsedFont[100];
	uint8	FontSize;
	int8	HashingPriority; // (0=Idle 1=Lower 2=Standard)
	bool	UploadParts;

	int8	showToolbarSpeedMeter; 
	int8    useDownloadAddNotifier;
	int8    useDownloadNotifier;
	int8    useChatNotifier;
	int8    useLogNotifier;	
	int8    useSoundInNotifier;
	int8    notifierPopsEveryChatMsg;
	int8	notifierImportantError;
	char    notifierSoundFilePath[510];

	char	m_sircserver[50];
	char	m_sircnick[30];
	char	m_sircchannamefilter[50];
	bool	m_bircaddtimestamp;
	bool	m_bircusechanfilter;
	uint16	m_iircchanneluserfilter;
	char	m_sircperformstring[255];
	bool	m_bircuseperform;
	bool	m_birclistonconnect;
	bool	m_bircacceptlinks;
	bool	m_bircignoreinfomessage;
	bool	m_bircignoreemuleprotoinfomessage;
a177 16
	bool	smartidcheck;
	uint8	smartidstate;
	bool	SafeConnect;
	bool	startMinimized;
	uint16	MaxConperFive;
	bool	useSort; // Cax2
	bool	useSrcSortCol2;
	int8	serverSortCol;
	int8	uploadSortCol;
	int8	queueSortCol;
	int8	searchSortCol;
	int8	ircSortCol;
	uint16	fileSortCol;
	int8	downloadSortCol;
	int8	srcSortCol1;
	int8	srcSortCol2;
a181 2
	bool	m_bVerbose;
	bool	m_bupdatequeuelist;
a182 1
	bool	m_btransferfullchunks;
a201 4
	bool	m_multiple;	// EpicStruggle 

	//Maverick
	bool	MlDonkeyCM;
a305 55
	CMutex	m_Pref_Mutex_AddServersFromConn;
	CMutex	m_Pref_Mutex_StatsColWidth;
	CMutex	m_Pref_Mutex_StatsExpanded;
	CMutex	m_Pref_Mutex_TotalDownloaded;
	CMutex	m_Pref_Mutex_TotalUploaded;
	CMutex	m_Pref_Mutex_MaxUploadRate;
	CMutex	m_Pref_Mutex_MaxDownloadRate;
	CMutex	m_Pref_Mutex_MaxConnections;
	CMutex	m_Pref_Mutex_DeadServerRetry;
	CMutex	m_Pref_Mutex_Multiple;
	CMutex	m_Pref_Mutex_LangID;
	CMutex	m_Pref_Mutex_DoubleClick;
	CMutex	m_Pref_Mutex_CanSeeShares;
	CMutex	m_Pref_Mutex_TooltipDelay;
	CMutex	m_Pref_Mutex_BringToFront;
	CMutex	m_Pref_Mutex_SplitterPos;
	CMutex	m_Pref_Mutex_StatsMax;
	CMutex	m_Pref_Mutex_StatsAvg;
	CMutex	m_Pref_Mutex_ToolbarMeter;
	CMutex	m_Pref_Mutex_CloseToTray;
	CMutex	m_Pref_Mutex_DetailsOnClick;
	CMutex	m_Pref_Mutex_DownloadNotifier;
	CMutex	m_Pref_Mutex_ChatNotifier;
	CMutex	m_Pref_Mutex_LogNotifier;
	CMutex	m_Pref_Mutex_SoundNotifier;
	CMutex	m_Pref_Mutex_ErrorNotifier;
	CMutex	m_Pref_Mutex_WavePathNotifier;
	CMutex	m_Pref_Mutex_IRCParams;
	CMutex	m_Pref_Mutex_StartMin;
	CMutex	m_Pref_Mutex_SmartIdCheck;
	CMutex	m_Pref_Mutex_SmartIdState;
	CMutex	m_Pref_Mutex_Verbose;
	CMutex	m_Pref_Mutex_UpdateQueueList;
	CMutex	m_Pref_Mutex_Depth3D;
	CMutex	m_Pref_Mutex_StatsColor;
	CMutex	m_Pref_Mutex_Sort;
	CMutex	m_Pref_Mutex_MaxConPer5;
	CMutex	m_Pref_Mutex_SafeConnect;
	CMutex	m_Pref_Mutex_PartTraffic;
	CMutex	m_Pref_Mutex_Community;
	CMutex	m_Pref_Mutex_Notification;
	CMutex	m_Pref_Mutex_Priority;
	CMutex	m_Pref_Mutex_RestartWaiting;
	CMutex	m_Pref_Mutex_LogToFile;
	CMutex	m_Pref_Mutex_FullChunks;
	CMutex	m_Pref_Mutex_XSUpTo;
	CMutex	m_Pref_Mutex_SrvConTimeout;
	CMutex	m_Pref_Mutex_SlowComplete;
	CMutex	m_Pref_Mutex_Font;
	CMutex	m_Pref_Mutex_HashPriority;
	CMutex	m_Pref_Mutex_UploadParts;
	CMutex	m_Pref_Mutex_WndPlacement;
	CMutex	m_Pref_Mutex_MlDonkey;
	CMutex	m_Pref_Mutex_Proxy;

a401 6
	uint16	MaximumUploadClients()						{ return m_nMaxUpClientsAllowed.Get(); }
	void	SetMaximumUploadClients(uint16 uVal)		{ m_nMaxUpClientsAllowed.Put(uVal); }
	uint16	MinimumUploadClients()						{ return m_nMinUpClientsAllowed.Get(); }
	void	SetMinimumUploadClients(uint16 uVal)		{ m_nMinUpClientsAllowed.Put(uVal); }
	uint16	UploadClientDatarate()						{ return m_nUploadClientDatarate.Get(); }
	void	SetUploadClientDatarate(uint16 uVal)		{ m_nUploadClientDatarate.Put(uVal); }
d454 2
a455 2
	uint16	GetDeadserverRetries()						{CSingleLock PrefLock(&m_Pref_Mutex_DeadServerRetry,TRUE); uint16 nRet = prefs->deadserverretries; return nRet; }
	void	SetDeadserverRetries(uint16 uRetries)		{CSingleLock PrefLock(&m_Pref_Mutex_DeadServerRetry,TRUE); prefs->deadserverretries	= uRetries; }
d472 2
a473 2
	bool	GetMultiple()								{CSingleLock PrefLock(&m_Pref_Mutex_Multiple,TRUE); bool bRet = prefs->m_multiple; return bRet; } //EpicStruggle
	void	SetMultiple(bool bEnable)					{CSingleLock PrefLock(&m_Pref_Mutex_Multiple,TRUE); prefs->m_multiple = bEnable; } //EpicStruggle
d481 18
a498 18
	int8	GetToolTipDelay(void)						{CSingleLock PrefLock(&m_Pref_Mutex_TooltipDelay,TRUE); int8 nRet = prefs->m_iToolDelayTime; return nRet; }
	void	SetToolTipDelay(int8 iDelay)				{CSingleLock PrefLock(&m_Pref_Mutex_TooltipDelay,TRUE); prefs->m_iToolDelayTime	= iDelay; }
	int8	IsBringToFront()							{CSingleLock PrefLock(&m_Pref_Mutex_BringToFront,TRUE); int8 nRet = prefs->bringtoforeground; return nRet; }
	void	SetBringToFront(int8 bBTFront)				{CSingleLock PrefLock(&m_Pref_Mutex_BringToFront,TRUE); prefs->bringtoforeground = bBTFront; }

	int8    GetSplitterbarPosition()					{CSingleLock PrefLock(&m_Pref_Mutex_SplitterPos,TRUE); int8 nRet = prefs->splitterbarPosition; return nRet; }
	void	SetSplitterbarPosition(int8 pos) 			{CSingleLock PrefLock(&m_Pref_Mutex_SplitterPos,TRUE); prefs->splitterbarPosition = pos; }
	uint16	GetStatsMax()								{CSingleLock PrefLock(&m_Pref_Mutex_StatsMax,TRUE); uint16 nRet = prefs->statsMax; return nRet; }
	void	SetStatsMax(uint16 uMaxStats)				{CSingleLock PrefLock(&m_Pref_Mutex_StatsMax,TRUE); prefs->statsMax = uMaxStats; }
	int8	GetStatsAverageMinutes()					{CSingleLock PrefLock(&m_Pref_Mutex_StatsAvg,TRUE); int8 nRet = prefs->statsAverageMinutes; return nRet; }
	void	SetStatsAverageMinutes(int8 in)				{CSingleLock PrefLock(&m_Pref_Mutex_StatsAvg,TRUE); prefs->statsAverageMinutes = in; }

	bool	GetShowToolbarSpeedMeter()					{CSingleLock PrefLock(&m_Pref_Mutex_ToolbarMeter,TRUE); bool bRet = prefs->showToolbarSpeedMeter; return bRet; }
	void	SetShowToolbarSpeedMeter(bool bShow)		{CSingleLock PrefLock(&m_Pref_Mutex_ToolbarMeter,TRUE); prefs->showToolbarSpeedMeter = bShow; }
	bool    GetCloseToTray()							{CSingleLock PrefLock(&m_Pref_Mutex_CloseToTray,TRUE); bool bRet = prefs->closeToTray; return bRet; }
	void	SetCloseToTray(bool bClose)					{CSingleLock PrefLock(&m_Pref_Mutex_CloseToTray,TRUE); prefs->closeToTray = bClose; }
	bool    GetDetailsOnClick()							{CSingleLock PrefLock(&m_Pref_Mutex_DetailsOnClick,TRUE); bool bRet = prefs->DetailsOnClick; return bRet; }
	void    SetDetailsOnClick(bool bSet)				{CSingleLock PrefLock(&m_Pref_Mutex_DetailsOnClick,TRUE); prefs->DetailsOnClick = bSet; }
d500 42
a541 41
	bool    GetUseDownloadAddNotifier()					{CSingleLock PrefLock(&m_Pref_Mutex_DownloadNotifier,TRUE); bool bRet = prefs->useDownloadAddNotifier; return bRet; }
	void    SetUseDownloadAddNotifier(bool bUse)		{CSingleLock PrefLock(&m_Pref_Mutex_DownloadNotifier,TRUE); prefs->useDownloadAddNotifier = bUse; }
	bool    GetUseDownloadNotifier() 					{CSingleLock PrefLock(&m_Pref_Mutex_DownloadNotifier,TRUE); bool bRet = prefs->useDownloadNotifier; return bRet; }
	void    SetUseDownloadNotifier(bool bUse)			{CSingleLock PrefLock(&m_Pref_Mutex_DownloadNotifier,TRUE); prefs->useDownloadNotifier = bUse; }
	bool    GetUseChatNotifier()						{CSingleLock PrefLock(&m_Pref_Mutex_ChatNotifier,TRUE); bool bRet = prefs->useChatNotifier; return bRet; }
	void    SetUseChatNotifier(bool bUse)				{CSingleLock PrefLock(&m_Pref_Mutex_ChatNotifier,TRUE); prefs->useChatNotifier = bUse; }
	bool    GetUseLogNotifier()			 				{CSingleLock PrefLock(&m_Pref_Mutex_LogNotifier,TRUE); bool bRet = prefs->useLogNotifier; return bRet; }
	void    SetUseLogNotifier(bool bUse) 				{CSingleLock PrefLock(&m_Pref_Mutex_LogNotifier,TRUE); prefs->useLogNotifier = bUse; }
	bool    GetUseSoundInNotifier()		 				{CSingleLock PrefLock(&m_Pref_Mutex_SoundNotifier,TRUE); bool bRet = prefs->useSoundInNotifier; return bRet; }
	void    SetUseSoundInNotifier(bool bUse)			{CSingleLock PrefLock(&m_Pref_Mutex_SoundNotifier,TRUE); prefs->useSoundInNotifier = bUse; }
	bool    GetNotifierPopsEveryChatMsg()				{CSingleLock PrefLock(&m_Pref_Mutex_ChatNotifier,TRUE); bool bRet = prefs->notifierPopsEveryChatMsg; return bRet; }
	void    SetNotifierPopsEveryChatMsg(bool bPop)		{CSingleLock PrefLock(&m_Pref_Mutex_ChatNotifier,TRUE); prefs->notifierPopsEveryChatMsg = bPop; }
	bool	GetNotifierPopOnImportantError()			{CSingleLock PrefLock(&m_Pref_Mutex_ErrorNotifier,TRUE); bool bRet = prefs->notifierImportantError; return bRet; }
	void	SetNotifierPopOnImportantError(bool bPop)	{CSingleLock PrefLock(&m_Pref_Mutex_ErrorNotifier,TRUE); prefs->notifierImportantError = bPop; }
	CString GetNotifierWavSoundPath() 					{CSingleLock PrefLock(&m_Pref_Mutex_WavePathNotifier,TRUE); CString sRet = CString(prefs->notifierSoundFilePath); return sRet; }
	void	SetNotifierWavSoundPath(CString strPath)	{CSingleLock PrefLock(&m_Pref_Mutex_WavePathNotifier,TRUE); sprintf(prefs->notifierSoundFilePath,"%s",strPath); }

	CString	GetIRCNick()								{CSingleLock PrefLock(&m_Pref_Mutex_IRCParams,TRUE); CString sRet = (CString)prefs->m_sircnick; return sRet; }
	void	SetIRCNick( char in_nick[] )				{CSingleLock PrefLock(&m_Pref_Mutex_IRCParams,TRUE); strcpy(prefs->m_sircnick,in_nick); }
	CString	GetIRCServer()								{CSingleLock PrefLock(&m_Pref_Mutex_IRCParams,TRUE); CString sRet = (CString)prefs->m_sircserver; return sRet; }
	void	SetIRCServer( char in_serv[] )				{CSingleLock PrefLock(&m_Pref_Mutex_IRCParams,TRUE); strcpy(prefs->m_sircserver,in_serv); }
	bool	GetIRCAddTimestamp()						{CSingleLock PrefLock(&m_Pref_Mutex_IRCParams,TRUE); bool bRet = prefs->m_bircaddtimestamp; return bRet; }
	void	SetIRCAddTimestamp( bool flag )				{CSingleLock PrefLock(&m_Pref_Mutex_IRCParams,TRUE); prefs->m_bircaddtimestamp = flag; }
	CString	GetIRCChanNameFilter()						{CSingleLock PrefLock(&m_Pref_Mutex_IRCParams,TRUE); CString sRet = (CString)prefs->m_sircchannamefilter; return sRet; }
	void	SetIRCChanNameFilter(char in_name[])		{CSingleLock PrefLock(&m_Pref_Mutex_IRCParams,TRUE); strcpy(prefs->m_sircchannamefilter,in_name); }
	bool	GetIRCUseChanFilter()						{CSingleLock PrefLock(&m_Pref_Mutex_IRCParams,TRUE); bool bRet = prefs->m_bircusechanfilter; return bRet; }
	void	SetIRCUseChanFilter(bool flag)				{CSingleLock PrefLock(&m_Pref_Mutex_IRCParams,TRUE); prefs->m_bircusechanfilter = flag; }
	uint16	GetIRCChannelUserFilter()					{CSingleLock PrefLock(&m_Pref_Mutex_IRCParams,TRUE); uint16 nRet = prefs->m_iircchanneluserfilter; return nRet; }
	void	SetIRCChanUserFilter(uint16 in_user)		{CSingleLock PrefLock(&m_Pref_Mutex_IRCParams,TRUE); prefs->m_iircchanneluserfilter = in_user; }
	CString	GetIrcPerformString()						{CSingleLock PrefLock(&m_Pref_Mutex_IRCParams,TRUE); return (CString)prefs->m_sircperformstring;}
	void	SetIRCPerformString(char in_perf[])			{CSingleLock PrefLock(&m_Pref_Mutex_IRCParams,TRUE); strcpy(prefs->m_sircperformstring, in_perf);}
	bool	GetIrcUsePerform()							{CSingleLock PrefLock(&m_Pref_Mutex_IRCParams,TRUE); return prefs->m_bircuseperform;}
	void	SetIrcUsePerform(bool flag)					{CSingleLock PrefLock(&m_Pref_Mutex_IRCParams,TRUE); prefs->m_bircuseperform = flag;}
	bool	GetIRCListOnConnect()						{CSingleLock PrefLock(&m_Pref_Mutex_IRCParams,TRUE); return prefs->m_birclistonconnect;}
	void	SetIRCListonConnect(bool flag)				{CSingleLock PrefLock(&m_Pref_Mutex_IRCParams,TRUE); prefs->m_birclistonconnect = flag;}
	bool	GetIrcAcceptLinks()							{CSingleLock PrefLock(&m_Pref_Mutex_IRCParams,TRUE); return prefs->m_bircacceptlinks;}
	void	SetIrcAcceptLInks(bool flag)				{CSingleLock PrefLock(&m_Pref_Mutex_IRCParams,TRUE); prefs->m_bircacceptlinks = flag;}
	bool	GetIrcIgnoreInfoMessage()					{CSingleLock PrefLock(&m_Pref_Mutex_IRCParams,TRUE); return prefs->m_bircignoreinfomessage;}
	void	SetIrcIgnoreInfoMessage(bool flag)			{CSingleLock PrefLock(&m_Pref_Mutex_IRCParams,TRUE); prefs->m_bircignoreinfomessage = flag;}
	bool	GetIrcIgnoreEmuleProtoInfoMessage()			{CSingleLock PrefLock(&m_Pref_Mutex_IRCParams,TRUE); return prefs->m_bircignoreemuleprotoinfomessage;}
	void	SetIrcIgnoreEmuleProtoInfoMessage(bool flag){CSingleLock PrefLock(&m_Pref_Mutex_IRCParams,TRUE); prefs->m_bircignoreemuleprotoinfomessage = flag;}
d543 6
a548 6
	bool	GetStartMinimized()							{CSingleLock PrefLock(&m_Pref_Mutex_StartMin,TRUE); bool bRet = prefs->startMinimized; return bRet; }
	void    SetStartMinimized(bool bStart)				{CSingleLock PrefLock(&m_Pref_Mutex_StartMin,TRUE); prefs->startMinimized = bStart; }
	bool	GetSmartIdCheck()							{CSingleLock PrefLock(&m_Pref_Mutex_SmartIdCheck,TRUE); bool bRet = prefs->smartidcheck; return bRet; }
	void	SetSmartIdCheck(bool in_smartidcheck)		{CSingleLock PrefLock(&m_Pref_Mutex_SmartIdCheck,TRUE); prefs->smartidcheck = in_smartidcheck; }
	uint8	GetSmartIdState()							{CSingleLock PrefLock(&m_Pref_Mutex_SmartIdState,TRUE); uint8 nRet = prefs->smartidstate; return nRet; }
	void	SetSmartIdState(uint8 in_smartidstate)		{CSingleLock PrefLock(&m_Pref_Mutex_SmartIdState,TRUE); prefs->smartidstate = in_smartidstate; }
d550 2
a551 2
	bool	GetVerbose()						        {CSingleLock PrefLock(&m_Pref_Mutex_Verbose,TRUE); bool bRet =prefs->m_bVerbose; return bRet; }
	void 	SetVerbose(bool bEnabled)			        {CSingleLock PrefLock(&m_Pref_Mutex_Verbose,TRUE); prefs->m_bVerbose = bEnabled; }
d553 2
a554 2
	bool	GetUpdateQueueList()				        {CSingleLock PrefLock(&m_Pref_Mutex_UpdateQueueList,TRUE); bool bRet = prefs->m_bupdatequeuelist; return bRet; }
	void   SetUpdateQueueList(bool bEnabled)			{CSingleLock PrefLock(&m_Pref_Mutex_UpdateQueueList,TRUE); prefs->m_bupdatequeuelist = bEnabled; }
d571 2
a572 2
	DWORD	GetStatsColor(int index) 					{CSingleLock PrefLock(&m_Pref_Mutex_StatsColor,TRUE); DWORD dwRet = prefs->statcolors[index]; return dwRet; }
	void	SetStatsColor(int index,DWORD value) 		{CSingleLock PrefLock(&m_Pref_Mutex_StatsColor,TRUE); prefs->statcolors[index] = value; }
d575 22
a596 22
	bool	DoUseSort()									{CSingleLock PrefLock(&m_Pref_Mutex_Sort,TRUE); bool bRet = prefs->useSort; return bRet; } //sortdlg Cax2
	void    SetUseSort(bool bUseSort)					{CSingleLock PrefLock(&m_Pref_Mutex_Sort,TRUE); prefs->useSort = bUseSort; } //sortdlg Cax2
	bool	DoUseSrcSortCol2()							{CSingleLock PrefLock(&m_Pref_Mutex_Sort,TRUE); bool bRet = prefs->useSrcSortCol2; return bRet; }
	void	SetUseSrcSortCol2(bool bUseSort)			{CSingleLock PrefLock(&m_Pref_Mutex_Sort,TRUE); prefs->useSrcSortCol2 = bUseSort; }
	int8	GetServerSortCol()							{CSingleLock PrefLock(&m_Pref_Mutex_Sort,TRUE); int8 nRet = prefs->serverSortCol; return nRet; }
	void	SetServerSortCol(int8 iCol)					{CSingleLock PrefLock(&m_Pref_Mutex_Sort,TRUE); prefs->serverSortCol = iCol; }
	int8	GetUploadSortCol()							{CSingleLock PrefLock(&m_Pref_Mutex_Sort,TRUE); int8 nRet = prefs->uploadSortCol; return nRet; }
	void	SetUploadSortCol(int8 iSortCol)				{CSingleLock PrefLock(&m_Pref_Mutex_Sort,TRUE); prefs->uploadSortCol = iSortCol; }
	int8	GetQueueSortCol()							{CSingleLock PrefLock(&m_Pref_Mutex_Sort,TRUE); int8 nRet = prefs->queueSortCol; return nRet; }
	void	SetQueueSortCol(int8 iSortCol)				{CSingleLock PrefLock(&m_Pref_Mutex_Sort,TRUE); prefs->queueSortCol = iSortCol; }
	int8	GetSearchSortCol()							{CSingleLock PrefLock(&m_Pref_Mutex_Sort,TRUE); int8 nRet = prefs->searchSortCol; return nRet; }
	void	SetSearchSortCol(int8 iSortCol)				{CSingleLock PrefLock(&m_Pref_Mutex_Sort,TRUE); prefs->searchSortCol = iSortCol; }
	int8	GetIrcSortCol()								{CSingleLock PrefLock(&m_Pref_Mutex_Sort,TRUE); int8 nRet = prefs->ircSortCol; return nRet; }
	void	SetIrcSortCol(int8 iSortCol)				{CSingleLock PrefLock(&m_Pref_Mutex_Sort,TRUE); prefs->ircSortCol = iSortCol; }
	uint16	GetFileSortCol()							{CSingleLock PrefLock(&m_Pref_Mutex_Sort,TRUE); uint16 nRet = prefs->fileSortCol; return nRet; }
	void	SetFileSortCol(uint16 uCol)					{CSingleLock PrefLock(&m_Pref_Mutex_Sort,TRUE); prefs->fileSortCol = uCol; }
	int8	GetDownloadSortCol()						{CSingleLock PrefLock(&m_Pref_Mutex_Sort,TRUE); int8 nRet = prefs->downloadSortCol; return nRet; }
	void	SetDownloadSortCol(int8 iSortCol)			{CSingleLock PrefLock(&m_Pref_Mutex_Sort,TRUE); prefs->downloadSortCol = iSortCol; }
	int8	GetSrcSortCol1()							{CSingleLock PrefLock(&m_Pref_Mutex_Sort,TRUE); int8 nRet = prefs->srcSortCol1; return nRet; }
	void	SetSrcSortCol1(int8 iSortCol)				{CSingleLock PrefLock(&m_Pref_Mutex_Sort,TRUE); prefs->srcSortCol1 = iSortCol; }
	int8	GetSrcSortCol2()							{CSingleLock PrefLock(&m_Pref_Mutex_Sort,TRUE); int8 nRet = prefs->srcSortCol2; return nRet; }
	void	SetSrcSortCol2(int8 iSortCol)				{CSingleLock PrefLock(&m_Pref_Mutex_Sort,TRUE); prefs->srcSortCol2 = iSortCol; }
d598 2
a599 2
	void	SetMaxDownloadConperFive(int in)			{CSingleLock PrefLock(&m_Pref_Mutex_MaxConPer5,TRUE); prefs->MaxConperFive = in; }
	uint16	GetMaxConperFive();
d604 2
a605 2
	bool	IsSafeConnectEnabled()						{CSingleLock PrefLock(&m_Pref_Mutex_SafeConnect,TRUE); bool bRet = prefs->SafeConnect; return bRet; }
	void	SetSafeConnectEnabled(bool in)				{CSingleLock PrefLock(&m_Pref_Mutex_SafeConnect,TRUE); prefs->SafeConnect = in; }
d608 6
a613 6
	bool	DoUsePT()									{CSingleLock PrefLock(&m_Pref_Mutex_PartTraffic,TRUE); bool bRet = prefs->m_pt_useit; return bRet; } // Cax2 05/01/03
	void	SetUsePT(bool in)							{CSingleLock PrefLock(&m_Pref_Mutex_PartTraffic,TRUE); prefs->m_pt_useit = in; }	// Cax2 05/01/03
	uint8	GetUpbarStyle()								{CSingleLock PrefLock(&m_Pref_Mutex_PartTraffic,TRUE); uint8 nRet = prefs->m_upbar_st; return nRet; }
	void	SetUpbarStyle(uint8 uStyle)					{CSingleLock PrefLock(&m_Pref_Mutex_PartTraffic,TRUE); prefs->m_upbar_st = uStyle; }
	uint8	GetUpbarColor()								{CSingleLock PrefLock(&m_Pref_Mutex_PartTraffic,TRUE); uint8 nRet = prefs->m_upbar_cl; return nRet; }
	void	SetUpbarColor(uint8 uColor)					{CSingleLock PrefLock(&m_Pref_Mutex_PartTraffic,TRUE); prefs->m_upbar_cl = uColor; }
d617 38
a654 38
	bool	CommunityEnabled()							{CSingleLock PrefLock(&m_Pref_Mutex_Community,TRUE); bool bRet = prefs->CommunityEnabled; return bRet; }
	void	SetCommunityEnabled(bool bEnable)			{CSingleLock PrefLock(&m_Pref_Mutex_Community,TRUE); prefs->CommunityEnabled = bEnable; }
	CString	CommunityString()							{CSingleLock PrefLock(&m_Pref_Mutex_Community,TRUE); CString sRet = CString(prefs->CommunityString); return sRet; }
	void	SetCommunityString(CString strComm)			{CSingleLock PrefLock(&m_Pref_Mutex_Community,TRUE); strcpy(prefs->CommunityString,strComm); }
	bool	CommunityNoBanEnabled()						{CSingleLock PrefLock(&m_Pref_Mutex_Community,TRUE); bool bRet = prefs->CommunityNoBan; return bRet; }
	void	SetCommunityNoBanEnabled(bool bEnable)		{CSingleLock PrefLock(&m_Pref_Mutex_Community,TRUE); prefs->CommunityNoBan = bEnable; }
	uint32 	NotificationDisplayTime()					{CSingleLock PrefLock(&m_Pref_Mutex_Notification,TRUE); uint32 nRet = prefs->NotificationDisplayTime; return nRet; }
	void 	SetNotificationDisplayTime(uint32 uTime)	{CSingleLock PrefLock(&m_Pref_Mutex_Notification,TRUE); prefs->NotificationDisplayTime = uTime; }
	uint32 	NotificationFontSize()						{CSingleLock PrefLock(&m_Pref_Mutex_Notification,TRUE); uint32 nRet = prefs->NotificationFontSize; return nRet; }
	void 	SetNotificationFontSize(uint32 uFontSize)	{CSingleLock PrefLock(&m_Pref_Mutex_Notification,TRUE); prefs->NotificationFontSize = uFontSize; }
	int16 	PriorityHigh()								{CSingleLock PrefLock(&m_Pref_Mutex_Priority,TRUE); int16 nRet = prefs->PriorityHigh; return nRet; }
	void 	SetPriorityHigh(int16 iPrio)				{CSingleLock PrefLock(&m_Pref_Mutex_Priority,TRUE); prefs->PriorityHigh = iPrio; }
	int16 	PriorityLow()								{CSingleLock PrefLock(&m_Pref_Mutex_Priority,TRUE); int16 nRet = prefs->PriorityLow; return nRet; }
	void 	SetPriorityLow(int16 iPrio)					{CSingleLock PrefLock(&m_Pref_Mutex_Priority,TRUE); prefs->PriorityLow = iPrio; }
	bool	RestartWaiting()							{CSingleLock PrefLock(&m_Pref_Mutex_RestartWaiting,TRUE); bool bRet = prefs->RestartWaiting; return bRet; }
	void	SetRestartWaiting(bool bSet)				{CSingleLock PrefLock(&m_Pref_Mutex_RestartWaiting,TRUE); prefs->RestartWaiting = bSet; }
	bool	LogToFile()									{CSingleLock PrefLock(&m_Pref_Mutex_LogToFile,TRUE); bool bRet = prefs->LogToFile; return bRet; }
	void	SetLogToFile(bool bEnable)					{CSingleLock PrefLock(&m_Pref_Mutex_LogToFile,TRUE); prefs->LogToFile = bEnable; }
	bool	TransferFullChunks()						{CSingleLock PrefLock(&m_Pref_Mutex_FullChunks,TRUE); bool bRet = prefs->TransferFullChunks; return bRet; }
	void	SetTransferFullChunks(bool bEnable)			{CSingleLock PrefLock(&m_Pref_Mutex_FullChunks,TRUE); prefs->TransferFullChunks = bEnable; }
	bool	DisableXSUpTo()								{CSingleLock PrefLock(&m_Pref_Mutex_XSUpTo,TRUE); bool bRet = prefs->DisableXSUpTo; return bRet; }
	void	SetDisableXSUpTo(bool bDisable)				{CSingleLock PrefLock(&m_Pref_Mutex_XSUpTo,TRUE); prefs->DisableXSUpTo = bDisable; }
	uint16	XSUpTo()									{CSingleLock PrefLock(&m_Pref_Mutex_XSUpTo,TRUE); uint16 nRet = prefs->XSUpTo; return nRet; }
	void	SetXSUpTo(uint16 uVal)						{CSingleLock PrefLock(&m_Pref_Mutex_XSUpTo,TRUE); prefs->XSUpTo = uVal; }
	uint32  SrvConTimeout()								{CSingleLock PrefLock(&m_Pref_Mutex_SrvConTimeout,TRUE); uint32 nRet = prefs->SrvConTimeout; return nRet; }
	void	SetSrvConTimeout(uint32 timeout)			{CSingleLock PrefLock(&m_Pref_Mutex_SrvConTimeout,TRUE); prefs->SrvConTimeout = timeout; }
	bool	SlowComplete()								{CSingleLock PrefLock(&m_Pref_Mutex_SlowComplete,TRUE); bool bRet = prefs->SlowComplete; return bRet; }
	void	SetSlowComplete(uint16 bSlow)				{CSingleLock PrefLock(&m_Pref_Mutex_SlowComplete,TRUE); prefs->SlowComplete = bSlow; }
	uint16	SlowCompleteBlockSize()						{CSingleLock PrefLock(&m_Pref_Mutex_SlowComplete,TRUE); uint16 nRet = prefs->SlowCompleteBlockSize; return nRet; }
	void	SetSlowCompleteBlockSize(uint16 uSize)		{CSingleLock PrefLock(&m_Pref_Mutex_SlowComplete,TRUE); prefs->SlowCompleteBlockSize = uSize; }
	CString	GetUsedFont()								{CSingleLock PrefLock(&m_Pref_Mutex_Font,TRUE); CString sRet = (CString)prefs->UsedFont; return sRet; }
	void	SetUsedFont(CString font)					{CSingleLock PrefLock(&m_Pref_Mutex_Font,TRUE); strcpy(prefs->UsedFont,font); }
	uint8	GetFontSize()								{CSingleLock PrefLock(&m_Pref_Mutex_Font,TRUE); uint8 nRet = prefs->FontSize; return nRet; }
	void	SetFontSize(uint8 size)						{CSingleLock PrefLock(&m_Pref_Mutex_Font,TRUE); prefs->FontSize=size; }
	int8	GetHashingPriority(void)					{CSingleLock PrefLock(&m_Pref_Mutex_HashPriority,TRUE); int8 nRet = prefs->HashingPriority; return nRet; }
	void	SetHashingPriority(int8 hashing)			{CSingleLock PrefLock(&m_Pref_Mutex_HashPriority,TRUE); prefs->HashingPriority = hashing; }
	bool	IsUploadPartsEnabled()						{CSingleLock PrefLock(&m_Pref_Mutex_UploadParts,TRUE); bool bRet = prefs->UploadParts; return bRet; }
	void	SetUploadPartsEnabled(bool bEnable)			{CSingleLock PrefLock(&m_Pref_Mutex_UploadParts,TRUE); prefs->UploadParts = bEnable; }
d700 2
a701 2
	WINDOWPLACEMENT GetEmuleWindowPlacement()			{CSingleLock PrefLock(&m_Pref_Mutex_WndPlacement,TRUE); WINDOWPLACEMENT Ret = prefs->EmuleWindowPlacement; return Ret; }
	void SetWindowLayout(WINDOWPLACEMENT in) 			{CSingleLock PrefLock(&m_Pref_Mutex_WndPlacement,TRUE); prefs->EmuleWindowPlacement = in; }
d707 4
a710 4
	bool	GetMlDonkeyCM()								{CSingleLock PrefLock(&m_Pref_Mutex_MlDonkey,TRUE); bool bRet = prefs->MlDonkeyCM; return bRet; }
	void	SetMlDonkeyCM(bool bEnable)					{CSingleLock PrefLock(&m_Pref_Mutex_MlDonkey,TRUE); prefs->MlDonkeyCM = bEnable; }
	ProxySettings GetProxy()                            {CSingleLock PrefLock(&m_Pref_Mutex_Proxy,TRUE); ProxySettings Ret = prefs->proxy; return Ret; }
	void SetProxySettings(ProxySettings proxysettings)  {CSingleLock PrefLock(&m_Pref_Mutex_Proxy,TRUE); prefs->proxy = proxysettings; }
d835 1
a841 3
	CSecuredVar<uint16>		m_nMaxUpClientsAllowed;
	CSecuredVar<uint16>		m_nMinUpClientsAllowed;
	CSecuredVar<uint16>		m_nUploadClientDatarate;
d843 75
a924 1
	//CSecuredVar<bool>		m_bUseRQlimit;	//Cax2 change
d926 4
@


1.38
log
@Continuing to convert variables to CSecuredVar template
@
text
@a177 1
	int16	queuesize ;			// SeeWen QUEUESIZE
a178 3
	uint16 maxupclientsallowed;
	uint16 minupclientsallowed;
	uint16 uploadclientdatarate;
a179 3
	uint32 slsrestoresourcestime;
	uint32 slsloadquantities;
	uint32 slsoutdated;
a180 1
	bool slsenable;
a379 8
	CMutex	m_Pref_Mutex_SLSRestoreTime;
	CMutex	m_Pref_Mutex_SLSLoadQuantities;
	CMutex	m_Pref_Mutex_SLSOutdated;
	CMutex	m_Pref_Mutex_SLS;
	CMutex	m_Pref_Mutex_MaxUploadClients;
	CMutex	m_Pref_Mutex_MinUploadClients;
	CMutex	m_Pref_Mutex_UploadClientRate;
	CMutex	m_Pref_Mutex_QueueSize;
d521 6
a526 6
	uint32	RestoreSourcesTime()						{CSingleLock PrefLock(&m_Pref_Mutex_SLSRestoreTime,TRUE); uint32 nRet = prefs->slsrestoresourcestime; return nRet; }
	void	SetRestoreSourcesTime(uint32 uTime)			{CSingleLock PrefLock(&m_Pref_Mutex_SLSRestoreTime,TRUE); prefs->slsrestoresourcestime = uTime; }
	uint32	LoadQuantities()							{CSingleLock PrefLock(&m_Pref_Mutex_SLSLoadQuantities,TRUE); uint32 nRet = prefs->slsloadquantities; return nRet; }
	void 	SetLoadQuantities(uint32 uVal)				{CSingleLock PrefLock(&m_Pref_Mutex_SLSLoadQuantities,TRUE); prefs->slsloadquantities = uVal; }
	uint32	WhenSourcesOutdated()						{CSingleLock PrefLock(&m_Pref_Mutex_SLSOutdated,TRUE); uint32 nRet = prefs->slsoutdated; return nRet; }
	void	SetWhenSourcesOutdated(uint32 uVal)			{CSingleLock PrefLock(&m_Pref_Mutex_SLSOutdated,TRUE); prefs->slsoutdated	=	uVal;}
d528 2
a529 2
	bool	SLSEnable()									{CSingleLock PrefLock(&m_Pref_Mutex_SLS,TRUE); bool bRet = prefs->slsenable; return bRet; }
	void	SetSLSEnable(bool bEnable)					{CSingleLock PrefLock(&m_Pref_Mutex_SLS,TRUE); prefs->slsenable = bEnable; }
d531 8
a538 8
	uint16	MaximumUploadClients()						{CSingleLock PrefLock(&m_Pref_Mutex_MaxUploadClients,TRUE); uint16 nRet = prefs->maxupclientsallowed; return nRet; }
	void	SetMaximumUploadClients(uint16 uVal)		{CSingleLock PrefLock(&m_Pref_Mutex_MaxUploadClients,TRUE); prefs->maxupclientsallowed = uVal; }
	uint16	MinimumUploadClients()						{CSingleLock PrefLock(&m_Pref_Mutex_MinUploadClients,TRUE); uint16 nRet = prefs->minupclientsallowed; return nRet; }
	void	SetMinimumUploadClients(uint16 uVal)		{CSingleLock PrefLock(&m_Pref_Mutex_MinUploadClients,TRUE); prefs->minupclientsallowed = uVal; }
	uint16	UploadClientDatarate()						{CSingleLock PrefLock(&m_Pref_Mutex_UploadClientRate,TRUE); uint16 nRet = prefs->uploadclientdatarate; return nRet; }
	void	SetUploadClientDatarate(uint16 uVal)		{CSingleLock PrefLock(&m_Pref_Mutex_UploadClientRate,TRUE); prefs->uploadclientdatarate = uVal; }
	int16	GetQueueSize()								{CSingleLock PrefLock(&m_Pref_Mutex_QueueSize,TRUE); uint16 nRet = prefs->queuesize; return nRet; }
	void	SetQueueSize(int16 iSize)					{CSingleLock PrefLock(&m_Pref_Mutex_QueueSize,TRUE); prefs->queuesize =	iSize; }
d969 10
@


1.37
log
@all my stable changes and some minor fixes (refer to changelog)
@
text
@a135 27
//	char	nick[255];
//	uint16	maxupload;
//	uint16	maxdownload;
//	uint16	port;
//	uint16	udpport;
//	uint16	maxconnections;
//	int8	reconnect;
//	int8	deadserver;
//	int8	scorsystem;
//	char	incomingdir[510];
//	char	tempdir[510];
//	char	vlcdir[510];
	//int8	ICH;
//	int8	autoserverlist;
//	int8	updatenotify;
//	int8	mintotray;
//	int8	autoconnect;
//	int8	autoconnectstaticonly; // Barry
//	int8	addnewfilespaused;     // Barry
//	int8	depth3D;			   // Barry
//	int8	addServersFromConn;
	//int8	addserversfromclient;
//	int16	maxsourceperfile;
//	int16	trafficOMeterInterval;
//	int16	statsInterval;
//	uint16	statsColumnWidth; // FoRcHa
//	char	statsListExpanded[16];
a137 4
//	int		maxGraphDownloadRate;
//	int		maxGraphUploadRate;
//	uint8	beepOnError;
//	uint8	confirmExit;
a163 5
//	uint8	GraphRatio; // propstats Cax2

//	uint8	splashscreen;
//	uint8	filerBadIP;
//	uint8	onlineSig;
a170 5
//	uint64  totalDownloadedBytes;
//	uint64	totalUploadedBytes;
//	WORD	languageID;
//	int8	transferDoubleclick;
//	int8	m_iSeeShares;		// 0=everybody 1=friends only 2=noone
a174 2
	//int16	maxsourceperfilesoft;
	//int16	maxsourceperfileudp;
a179 2

	//End of patch
a182 3
	uint32 minrequesttime;
	uint8  badclientban;
	uint32 badclientbantime;
a189 1
	uint16	Profile;
a254 6
	int8	UAP;
	int8	DAP;
	int8	disablexs;
	int8	startdownloadpaused;
	int8	downloadpausedonclomplete;
	int8	remove_nns;
a280 1
	char	toolbarsettings[256];	// reCDVst
a387 14
	CMutex	m_Pref_Mutex_Profile;
	CMutex	m_Pref_Mutex_ListenPort;
	CMutex	m_Pref_Mutex_UAP;
	CMutex	m_Pref_Mutex_DAP;
	CMutex	m_Pref_Mutex_XS;
	CMutex	m_Pref_Mutex_DownloadPaused;
	CMutex	m_Pref_Mutex_DownloadPausedOnComplete;
	CMutex	m_Pref_Mutex_RemoveNNS;
	CMutex	m_Pref_Mutex_Toolbar;
	CMutex	m_Pref_Mutex_AutoServerList;
	CMutex	m_Pref_Mutex_A4AFHash;
	CMutex	m_Pref_Mutex_BadClientTime;
	CMutex	m_Pref_Mutex_BadClientMinReqTime;
	CMutex	m_Pref_Mutex_BadClientMinReqNum;
a403 2
	//CMutex	m_Pref_Mutex_MaxSourcesPerFile;
	//CMutex	m_Pref_Mutex_MaxSourcesPerFileUDP;
d454 2
a455 2
	uint16	Profile()									{CSingleLock PrefLock(&m_Pref_Mutex_Profile,TRUE); uint16 nRet = prefs->Profile; return nRet; }
	void	SetProfile(uint16 uProfile)					{CSingleLock PrefLock(&m_Pref_Mutex_Profile,TRUE); prefs->Profile = uProfile; }
d468 3
a470 3
    uint16	GetListenPort()								{CSingleLock PrefLock(&m_Pref_Mutex_ListenPort,TRUE); uint16 nRet; if (m_UseProxyListenPort) nRet = ListenPort; else nRet = GetPort(); return nRet; }
	void	SetListenPort(uint16 uPort)					{CSingleLock PrefLock(&m_Pref_Mutex_ListenPort,TRUE); ListenPort = uPort; m_UseProxyListenPort = true; }
	void	ResetListenPort()							{CSingleLock PrefLock(&m_Pref_Mutex_ListenPort,TRUE); ListenPort = 0; m_UseProxyListenPort = false; }
d486 15
a500 15
	bool	IsUAPEnabled()								{CSingleLock PrefLock(&m_Pref_Mutex_UAP,TRUE); bool bRet = prefs->UAP; return bRet; }
	void	SetUAPEnabled(bool bEnable)					{CSingleLock PrefLock(&m_Pref_Mutex_UAP,TRUE); prefs->UAP = bEnable; }
	bool	IsDAPEnabled()								{CSingleLock PrefLock(&m_Pref_Mutex_DAP,TRUE); bool bRet = prefs->DAP; return bRet; }
	void	SetDAPEnabled(bool bEnable)					{CSingleLock PrefLock(&m_Pref_Mutex_DAP,TRUE); prefs->DAP = bEnable; }
//	bool	ReconnectLowID() 							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->reconnectlowid;}
	bool	IsDisabledXS()								{CSingleLock PrefLock(&m_Pref_Mutex_XS,TRUE); bool bRet = prefs->disablexs; return bRet; }
	void	SetDisabledXS(bool bDisable)				{CSingleLock PrefLock(&m_Pref_Mutex_XS,TRUE); prefs->disablexs = bDisable; }
	bool	StartDownloadPaused()						{CSingleLock PrefLock(&m_Pref_Mutex_DownloadPaused,TRUE); bool bRet = prefs->startdownloadpaused; return bRet; }
	void	SetStartDownloadPaused(bool bPaused)		{CSingleLock PrefLock(&m_Pref_Mutex_DownloadPaused,TRUE); prefs->startdownloadpaused = bPaused; }
	bool	DownloadPausedOnComplete()					{CSingleLock PrefLock(&m_Pref_Mutex_DownloadPausedOnComplete,TRUE); bool bRet = prefs->downloadpausedonclomplete; return bRet; }
	void	SetDownloadPausedOnComplete(bool bPaused)	{CSingleLock PrefLock(&m_Pref_Mutex_DownloadPausedOnComplete,TRUE); prefs->downloadpausedonclomplete = bPaused; }
	int		IsRemoveNNSEnabled() 						{CSingleLock PrefLock(&m_Pref_Mutex_RemoveNNS,TRUE); int nRet = prefs->remove_nns; return nRet; }
	void	SetRemoveNNSEnabled(int iEnable)			{CSingleLock PrefLock(&m_Pref_Mutex_RemoveNNS,TRUE); prefs->remove_nns = iEnable; }
	CString GetToolbarSettings() 						{CSingleLock PrefLock(&m_Pref_Mutex_Toolbar,TRUE); CString sRet = prefs->toolbarsettings; return sRet; } // reCDVst
	void	SetToolbarSettings(char* in) 				{CSingleLock PrefLock(&m_Pref_Mutex_Toolbar,TRUE); sprintf(prefs->toolbarsettings,"%s",in); } // reCDVst
d509 2
a510 2
	uchar*	GetA4AFHash(void)							{CSingleLock PrefLock(&m_Pref_Mutex_A4AFHash,TRUE); return prefs->A4AF_file_hash; } // Tarod
	void	SetA4AFHash(uchar* file_hash)				{CSingleLock PrefLock(&m_Pref_Mutex_A4AFHash,TRUE); memcpy(prefs->A4AF_file_hash, file_hash, sizeof(prefs->A4AF_file_hash)); } // Tarod
d529 6
a534 6
	uint32	BadClientBanTime()							{CSingleLock PrefLock(&m_Pref_Mutex_BadClientTime,TRUE); uint32 nRet = prefs->badclientbantime; return nRet; }
	void	SetBadClientBanTime(uint32 uTime)			{CSingleLock PrefLock(&m_Pref_Mutex_BadClientTime,TRUE); prefs->badclientbantime = uTime; }
	uint32	BadClientMinRequestTime()					{CSingleLock PrefLock(&m_Pref_Mutex_BadClientMinReqTime,TRUE); uint32 nRet = prefs->minrequesttime; return nRet; }
	void	SetBadClientMinRequestTime(uint32 uTime)	{CSingleLock PrefLock(&m_Pref_Mutex_BadClientMinReqTime,TRUE); prefs->minrequesttime = uTime; }
	uint8	BadClientMinRequestNum()					{CSingleLock PrefLock(&m_Pref_Mutex_BadClientMinReqNum,TRUE); uint8 nRet = prefs->badclientban; return nRet; }
	void	SetBadClientMinRequestNum(uint8 uVal)		{CSingleLock PrefLock(&m_Pref_Mutex_BadClientMinReqNum,TRUE); prefs->badclientban = uVal; }
a896 4
	//Maverick
    bool m_UseProxyListenPort;
	uint16	ListenPort;

d968 17
@


1.36
log
@Lancast : Help other emules on your lan complete/download files quicker, saving bandwith.

1) UDP broadcasts your hashs over your lan
2) Listens for other clients sending broadcasts and adds them as sources
3) Clients on your lan bypass the queue, and have unlimited upload (download rate is still limited by emule downlaod speed)
@
text
@d332 2
d783 1
a783 1
//	char*	GetTxtEditor()						        {CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->TxtEditor;}
d940 13
d1067 6
@


1.35
log
@Changed weekend except to take in account sat/sun shifts exception. :-(
@
text
@d912 8
d1036 12
@


1.34
log
@Weekend exclusion interface code.
@
text
@d890 4
a893 2
	bool	IsNSExceptWeekend()							{return m_bNSExceptWeekend.Get();}
	void	SetNSExceptWeekend(bool bEnable)			{m_bNSExceptWeekend.Put(bEnable);}
d1018 2
a1019 1
	CSecuredVar<bool>		m_bNSExceptWeekend;
@


1.33
log
@Night Shift (in cooperation with obaldin :P)
@
text
@a17 1

d890 2
d1016 1
@


1.32
log
@Priority control
@
text
@d652 2
a653 2
	bool	IsConfirmExitEnabled()						{ return m_confirmExit.Get(); }
	void	SetConfirmExitEnabled(bool bEnable)			{ m_confirmExit.Put(bEnable); }
d876 11
a886 11
	bool	IsA4AFStringEnabled()						{return m_A4AFStringEnabled.Get();}
	void	SetA4AFStringEnabled(bool bEnable)          {m_A4AFStringEnabled.Put(bEnable);}
	bool	IsBanMessageEnabled()						{return m_BanMessageEnabled.Get();}
	void	SetBanMessageEnabled(bool bEnable)          {m_BanMessageEnabled.Put(bEnable);}
	int		GetMethod()									{return m_SearchMethod.Get();}
	void	SetMethod(int Value) 						{m_SearchMethod.Put(Value);}
	bool	AutoTakeED2KLinks()							{return m_AutoTakeLinks.Get();}
	void	SetAutoTakeED2KLinks(bool bEnable)          {m_AutoTakeLinks.Put(bEnable);}
	uint16	GetFileBufferSize()							{return m_iFileBufferSize.Get();}
	void	SetFileBufferSize(int Value)      		    {m_iFileBufferSize.Put(Value);}
	int		GetMainProcessPriority()					{return m_MainProcessPriority.Get();}
d889 15
d978 1
a978 1
	CSecuredVar<bool>		m_confirmExit;
d1000 1
a1000 1
	CSecuredVar<bool>			m_bUseRQlimit;	//Cax2 change
d1003 13
a1015 6
	CSecuredVar<bool>		m_A4AFStringEnabled;
	CSecuredVar<bool>		m_BanMessageEnabled;
	CSecuredVar<int>		m_SearchMethod;
	CSecuredVar<bool>		m_AutoTakeLinks;
	CSecuredVar<uint16>		m_iFileBufferSize;
	CSecuredVar<int>		m_MainProcessPriority;
@


1.31
log
@Main process priority settings (needs more coding)
@
text
@d887 1
a887 1
	void	SetMainProcessPriority(int Value) 			{m_MainProcessPriority.Put(Value);}
@


1.30
log
@Toolbar Enhancements (preliminary)
@
text
@d886 2
d993 1
@


1.29
log
@file buffer size, autotake ed2k links and some preferences reorganization.
@
text
@d572 6
d999 3
@


1.28
log
@AutoTakeED2KLinks
@
text
@d875 1
a875 1
	void	SetMethod(int8 Value) 						{m_SearchMethod.Put(Value);}
d878 2
d984 1
@


1.27
log
@simplified control panel,added remote queue limit as an otpion
@
text
@d876 2
d981 1
@


1.26
log
@Paused files shown in grey and Selected search methos stored between sessions.
@
text
@d217 2
a218 2
	int16	maxsourceperfilesoft;
	int16	maxsourceperfileudp;
d223 1
a223 1
	int16	remotequeuelimit;
d473 2
a474 2
	CMutex	m_Pref_Mutex_MaxSourcesPerFile;
	CMutex	m_Pref_Mutex_MaxSourcesPerFileUDP;
d620 2
a621 1
	int16	GetRemoteQueueLimit()						{ return prefs->remotequeuelimit; }
d665 5
a669 6
	uint16	GetMaxSourcePerFileSoft()					{CSingleLock PrefLock(&m_Pref_Mutex_MaxSourcesPerFile,TRUE); uint16 temp = m_nMaxSourcePerFile.Get()*0.9; if(temp > 1000) return 1000; return temp; }
	uint16  GetMaxSourcesPerFileSoftValue()				{CSingleLock PrefLock(&m_Pref_Mutex_MaxSourcesPerFile,TRUE); uint16 nRet = prefs->maxsourceperfilesoft; return nRet; }
	void    SetMaxSourcesPerFileSoftValue(uint16 uSrc)  {CSingleLock PrefLock(&m_Pref_Mutex_MaxSourcesPerFile,TRUE); prefs->maxsourceperfilesoft = uSrc; }
	uint16	GetMaxSourcePerFileUDP()					{CSingleLock PrefLock(&m_Pref_Mutex_MaxSourcesPerFile,TRUE); uint16 temp = m_nMaxSourcePerFile.Get()*0.75; if(temp > 100) return 100; return temp; }
	uint16  GetMaxSourcesPerFileUDPValue()				{CSingleLock PrefLock(&m_Pref_Mutex_MaxSourcesPerFileUDP,TRUE); uint16 nRet = prefs->maxsourceperfileudp; return nRet; }
	void	SetMaxSourcesPerFileUDPValue(uint16 uVal)	{CSingleLock PrefLock(&m_Pref_Mutex_MaxSourcesPerFileUDP,TRUE); prefs->maxsourceperfileudp = uVal; }
d973 2
d986 1
a986 1
	CSecuredVar<bool>		m_bUseRQlimit;	//Cax2 change
@


1.25
log
@minor graphic details bugfixed, now preview player selection same as official
@
text
@d772 1
a772 1
	void	SetShowOverhead(bool bit)				{ m_bShowOverhead.Put(bit);}
d774 1
a774 1
	void	SetBackupPreview(bool bit)				{ m_bBackupPreview.Put(bit);}
d874 2
d959 1
a959 1
	CSecuredVar<int8>		m_nDepth3D;
d976 2
a977 1
	
@


1.24
log
@Added again Confirm on exit. :-)
@
text
@d549 4
a552 2
	CString	GetVlcDir()  								{ return CString(m_sVlcDir.Get().c_str()); }
	void    SetVlcDir(CString strDir)					{ m_sVlcDir.Put(strDir.GetBuffer(0)); }
d967 1
@


1.23
log
@Banning Message, A4AF customization, AutoPriority fix, Static Servers fix, .dat/.bin Preview
@
text
@d643 2
a644 1
//	void	SetConfirmExitEnabled(bool bEnable)			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->confirmExit=bEnable;}
d947 1
@


1.23.2.1
log
@v1a upgrade
@
text
@d549 2
a550 4
	CString	GetVlcDir()  								{ return CString(m_sVlcDir.Get().c_str()); }		//Cax2 - keep for compatibility in 1a...
	//void    SetVlcDir(CString strDir)					{ m_sVlcDir.Put(strDir.GetBuffer(0)); }			//Cax2 - not needed anymore
	CString	GetVideoPlayer()  						{ return CString(m_sVideoPlayer.Get().c_str()); }
	void    SetVideoPlayer(CString str)				{ m_sVideoPlayer.Put(str.GetBuffer(0)); }
d643 1
a643 2
	bool	IsConfirmExitEnabled()						{ return m_confirmExit.Get(); }
	void	SetConfirmExitEnabled(bool bEnable)			{ m_confirmExit.Put(bEnable); }
a945 1
	CSecuredVar<bool>		m_confirmExit;
a962 1
	CSecuredVar<string>		m_sVideoPlayer;		//Cax2 import from official client.
@


1.23.2.2
log
@keeping in sync with the main cvs line
@
text
@d217 2
a218 2
	//int16	maxsourceperfilesoft;
	//int16	maxsourceperfileudp;
d223 1
a223 1

d473 2
a474 2
	//CMutex	m_Pref_Mutex_MaxSourcesPerFile;
	//CMutex	m_Pref_Mutex_MaxSourcesPerFileUDP;
d620 1
a620 2
	int16	GetRemoteQueueLimit()						{ return m_nRQlimit.Get(); }
	void	SetRemoteQueueLimit(uint16 uVal)		{ m_nRQlimit.Put(uVal); }
d664 6
a669 5
	uint16	GetMaxSourcePerFileSoft()					{ uint16 temp = m_nMaxSourcePerFile.Get()*0.9;  return (temp > 1000)?1000:temp; }
	//Cax2 - now calculated via the function above...
	//uint16  GetMaxSourcesPerFileSoftValue()				{CSingleLock PrefLock(&m_Pref_Mutex_MaxSourcesPerFile,TRUE); uint16 nRet = prefs->maxsourceperfilesoft; return nRet; }
	//void    SetMaxSourcesPerFileSoftValue(uint16 uSrc)  {CSingleLock PrefLock(&m_Pref_Mutex_MaxSourcesPerFile,TRUE); prefs->maxsourceperfilesoft = uSrc; }
	uint16	GetMaxSourcePerFileUDP()					{ uint16 temp = m_nMaxSourcePerFile.Get()*0.75; return (temp > 100)? 100:temp; }
d772 1
a772 1
	void	SetShowOverhead(bool bit)					{ m_bShowOverhead.Put(bit);}
d774 1
a774 1
	void	SetBackupPreview(bool bit)					{ m_bBackupPreview.Put(bit);}
a873 6
	int		GetMethod()									{return m_SearchMethod.Get();}
	void	SetMethod(int Value) 						{m_SearchMethod.Put(Value);}
	bool	AutoTakeED2KLinks()							{return m_AutoTakeLinks.Get();}
	void	SetAutoTakeED2KLinks(bool bEnable)          {m_AutoTakeLinks.Put(bEnable);}
	uint16	GetFileBufferSize()							{return m_iFileBufferSize.Get();}
	void	SetFileBufferSize(int Value)      		    {m_iFileBufferSize.Put(Value);}
d957 1
a957 1
	CSecuredVar<int>		m_nDepth3D;
a970 2
	CSecuredVar<bool>			m_bUseRQlimit;	//Cax2 change
	CSecuredVar<uint16>		m_nRQlimit;
d974 1
a974 4
	CSecuredVar<int>		m_SearchMethod;
	CSecuredVar<bool>		m_AutoTakeLinks;
	CSecuredVar<uint16>		m_iFileBufferSize;

d981 1
a981 1

@


1.22
log
@control panel limits, optimizations, bugfixes
@
text
@d867 4
d873 3
a875 3
	void	SetMaxUpload(uint16 nMaxUpload) 			{ m_nMaxUpload.Put(nMaxUpload); }
	void	SetMaxDownload(uint16 nMaxDownload)			{ m_nMaxDownload.Put(nMaxDownload); }
	uint16  GetMaxDownloadValue()						{ return m_nMaxDownload.Get(); }
d967 3
@


1.21
log
@minor updates & bugfixes
@
text
@d224 1
d619 2
d969 1
@


1.20
log
@Removed FLMC as a preferences option.
@
text
@d763 1
a763 1
	void    SetUpdateQueueList(bool bEnabled)			{CSingleLock PrefLock(&m_Pref_Mutex_UpdateQueueList,TRUE); prefs->m_bupdatequeuelist = bEnabled; }
d767 2
d943 1
@


1.19
log
@minor bugfixes + aqua bars! :)
@
text
@a305 2
	int8	firstlastmoviechunks;
//	int8	reconnectlowid;
a443 1
	CMutex	m_Pref_Mutex_FirstLastMovieChunks;
a553 2
	bool	IsFirstLastMovieChunksEnabled() 			{CSingleLock PrefLock(&m_Pref_Mutex_FirstLastMovieChunks,TRUE); bool bRet = prefs->firstlastmoviechunks; return bRet; }
	void	SetFirstLastMovieChunksEnabled(bool bEnable){CSingleLock PrefLock(&m_Pref_Mutex_FirstLastMovieChunks,TRUE); prefs->firstlastmoviechunks = bEnable; }
@


1.18
log
@Little fixes and Static Servers additions from 26d
@
text
@d776 3
a778 3
	int8	UseFlatBar()								{return m_nDepth3D.Get()==0;}
	uint16	Get3DDepth()                                {return m_nDepth3D.Get();}
	void	Set3DDepth(int iStyle)                      {m_nDepth3D.Put(iStyle);}
@


1.17
log
@overhead can be set in preferences now
@
text
@d776 3
a778 3
	int8	UseFlatBar()								{ return m_nDepth3D.Get()==0; }
	uint16	Get3DDepth()                                { return m_nDepth3D.Get(); }
	void	Set3DDepth(int iStyle)                      { m_nDepth3D.Put(iStyle); }
d780 2
a781 1
	int8    AutoConnectStaticOnly()                     { return m_bAutoConnectStaticOnly.Get(); }	
@


1.16
log
@better out-of-disk-space handling
@
text
@a317 1
	bool	m_bshowoverhead;
d770 2
a771 1
//	bool	ShowOverhead()						        {CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->m_bshowoverhead;}
d944 1
@


1.15
log
@minor preferences update...
@
text
@d889 1
@


1.14
log
@Saving web server settings
@
text
@d635 1
d637 1
d949 1
@


1.13
log
@Imroving continues...
@
text
@a223 4
	// WebServer
	char	httppassword[50];	
	uint16	httpport;		
	bool	httpenabled;
a456 3
	CMutex	m_Pref_Mutex_HTTPPort;
	CMutex	m_Pref_Mutex_HTTPPass;
	CMutex	m_Pref_Mutex_HTTP;
d581 10
a590 6
	uint16	GetHTTPPort()								{CSingleLock PrefLock(&m_Pref_Mutex_HTTPPort,TRUE); uint16 nRet = prefs->httpport; return nRet; }
	void	SetHTTPPort(uint16 uPort)					{CSingleLock PrefLock(&m_Pref_Mutex_HTTPPort,TRUE); prefs->httpport = uPort; }
	CString	GetHTTPPass()								{CSingleLock PrefLock(&m_Pref_Mutex_HTTPPass,TRUE); CString sRet = CString(prefs->httppassword); return sRet; }
	void	SetHTTPPass(CString strNewPass)				{CSingleLock PrefLock(&m_Pref_Mutex_HTTPPass,TRUE); strcpy(prefs->httppassword, MD5Sum(strNewPass).GetHash()); }
	bool	GetHTTPIsEnabled()							{CSingleLock PrefLock(&m_Pref_Mutex_HTTP,TRUE); bool bRet = prefs->httpenabled; return bRet; }
	void	SetHTTPIsEnabled(bool bEnable)				{CSingleLock PrefLock(&m_Pref_Mutex_HTTP,TRUE); prefs->httpenabled = bEnable; }
d955 7
@


1.12
log
@Flat bar fix
@
text
@d51 1
a51 1
// Secured variable
d86 49
d160 4
a163 4
	int16	trafficOMeterInterval;
	int16	statsInterval;
	uint16	statsColumnWidth; // FoRcHa
	char	statsListExpanded[16];
d166 4
a169 4
	int		maxGraphDownloadRate;
	int		maxGraphUploadRate;
	uint8	beepOnError;
	uint8	confirmExit;
d196 1
a196 1
	uint8	GraphRatio; // propstats Cax2
d198 3
a200 3
	uint8	splashscreen;
	uint8	filerBadIP;
	uint8	onlineSig;
d208 5
a212 5
	uint64  totalDownloadedBytes;
	uint64	totalUploadedBytes;
	WORD	languageID;
	int8	transferDoubleclick;
	int8	m_iSeeShares;		// 0=everybody 1=friends only 2=noone
a448 1
//	CMutex	m_Pref_Mutex;
a449 5
//	CMutex	m_Pref_Mutex_Score;
//	CMutex	m_Pref_Mutex_Reconnect;
//	CMutex	m_Pref_Mutex_DeadServer;
//	CMutex	m_Pref_Mutex_UserNick;
//	CMutex	m_Pref_Mutex_Port;
a450 6
//	CMutex	m_Pref_Mutex_UDPPort;
//	CMutex	m_Pref_Mutex_IncomingDir;
//	CMutex	m_Pref_Mutex_TempDir;
//	CMutex	m_Pref_Mutex_VlcDir;
//	CMutex	m_Pref_Mutex_MaxUpload;
//	CMutex	m_Pref_Mutex_MaxDownload;
a463 2
//	CMutex	m_Pref_Mutex_MinToTray;
//	CMutex	m_Pref_Mutex_AutoConnect;
a475 2
	CMutex	m_Pref_Mutex_TrafficInterval;
	CMutex	m_Pref_Mutex_StatsInterval;
a479 4
	CMutex	m_Pref_Mutex_BeepOnError;
	CMutex	m_Pref_Mutex_SplashScreen;
	CMutex	m_Pref_Mutex_FilterBadIPs;
	CMutex	m_Pref_Mutex_OnlineSig;
a511 1
	CMutex	m_Pref_Mutex_GraphRatio;
d561 1
a561 1
	uchar*	GetUserHash()								{ return userhash; }
d633 14
a646 14
	uint16	GetTrafficOMeterInterval() 					{CSingleLock PrefLock(&m_Pref_Mutex_TrafficInterval,TRUE); uint16 nRet = prefs->trafficOMeterInterval; return nRet; }
	void	SetTrafficOMeterInterval(int16 in) 			{CSingleLock PrefLock(&m_Pref_Mutex_TrafficInterval,TRUE); prefs->trafficOMeterInterval = in; }
	uint16	GetStatsInterval() 							{CSingleLock PrefLock(&m_Pref_Mutex_StatsInterval,TRUE); uint16 nRet = prefs->statsInterval; return nRet; }
	void	SetStatsInterval(int16 in) 					{CSingleLock PrefLock(&m_Pref_Mutex_StatsInterval,TRUE); prefs->statsInterval = in; }
	uint16  GetStatsColumnWidth()						{CSingleLock PrefLock(&m_Pref_Mutex_StatsColWidth,TRUE); uint16 nRet = prefs->statsColumnWidth; return nRet; }
	void    SetStatsColumnWidth(uint16 in)				{CSingleLock PrefLock(&m_Pref_Mutex_StatsColWidth,TRUE); prefs->statsColumnWidth = in; }
	CString	GetStatsListExpanded()						{CSingleLock PrefLock(&m_Pref_Mutex_StatsExpanded,TRUE); CString sRet = prefs->statsListExpanded; return sRet; }
	void	SetStatsListExpanded(CString in)			{CSingleLock PrefLock(&m_Pref_Mutex_StatsExpanded,TRUE); sprintf(prefs->statsListExpanded, "%s", in); }
	void	Add2TotalDownloaded(uint64 in)				{CSingleLock PrefLock(&m_Pref_Mutex_TotalDownloaded,TRUE); prefs->totalDownloadedBytes += in; }
	uint64  GetTotalDownloaded()						{CSingleLock PrefLock(&m_Pref_Mutex_TotalDownloaded,TRUE); uint64 nRet = prefs->totalDownloadedBytes; return nRet; }
	void	Add2TotalUploaded(uint64 in) 				{CSingleLock PrefLock(&m_Pref_Mutex_TotalUploaded,TRUE); prefs->totalUploadedBytes += in; }
	uint64	GetTotalUploaded()							{CSingleLock PrefLock(&m_Pref_Mutex_TotalUploaded,TRUE); uint64 nRet = prefs->totalUploadedBytes; return nRet; }
	bool	IsErrorBeepEnabled()						{CSingleLock PrefLock(&m_Pref_Mutex_BeepOnError,TRUE); bool bRet = prefs->beepOnError; return bRet; }
	void	SetErrorBeepEnabled(bool bEnable)			{CSingleLock PrefLock(&m_Pref_Mutex_BeepOnError,TRUE); prefs->beepOnError = bEnable; }
d648 11
a658 11
	bool	UseSplashScreen()							{CSingleLock PrefLock(&m_Pref_Mutex_SplashScreen,TRUE); bool bRet = prefs->splashscreen; return bRet; }
	void	SetUseSplashScreen(bool bUse)				{CSingleLock PrefLock(&m_Pref_Mutex_SplashScreen,TRUE); prefs->splashscreen = bUse; }
	bool	FilerBadIPs()								{CSingleLock PrefLock(&m_Pref_Mutex_FilterBadIPs,TRUE); bool bRet = prefs->filerBadIP; return bRet; }
	void    SetFilerBadIPs(bool bFilter)				{CSingleLock PrefLock(&m_Pref_Mutex_FilterBadIPs,TRUE); prefs->filerBadIP = bFilter; }
	bool	IsOnlineSignatureEnabled()  				{CSingleLock PrefLock(&m_Pref_Mutex_OnlineSig,TRUE); bool bRet = prefs->onlineSig; return bRet; }
	void	SetOnlineSignatureEnabled(bool bEnable)		{CSingleLock PrefLock(&m_Pref_Mutex_OnlineSig,TRUE); prefs->onlineSig = bEnable; }

	int		GetMaxGraphUploadRate()						{CSingleLock PrefLock(&m_Pref_Mutex_MaxUploadRate,TRUE); int nRet = prefs->maxGraphUploadRate; return nRet; }
	void	SetMaxGraphUploadRate(int in)				{CSingleLock PrefLock(&m_Pref_Mutex_MaxUploadRate,TRUE); prefs->maxGraphUploadRate = in; }
	int		GetMaxGraphDownloadRate()					{CSingleLock PrefLock(&m_Pref_Mutex_MaxDownloadRate,TRUE); int nRet = prefs->maxGraphDownloadRate; return nRet; }
	void	SetMaxGraphDownloadRate(int in)				{CSingleLock PrefLock(&m_Pref_Mutex_MaxDownloadRate,TRUE); prefs->maxGraphDownloadRate = in; }
d692 6
a697 6
	WORD	GetLanguageID()								{CSingleLock PrefLock(&m_Pref_Mutex_LangID,TRUE); WORD wRet = prefs->languageID; return wRet; }
	void	SetLanguageID(WORD wID)						{CSingleLock PrefLock(&m_Pref_Mutex_LangID,TRUE); prefs->languageID = wID; }
	int8	IsDoubleClickEnabled()						{CSingleLock PrefLock(&m_Pref_Mutex_DoubleClick,TRUE); int8 nRet = prefs->transferDoubleclick; return nRet; }
	void	SetDoubleClickEnabled(int8 iEnable)			{CSingleLock PrefLock(&m_Pref_Mutex_DoubleClick,TRUE); prefs->transferDoubleclick = iEnable; }
	int8	CanSeeShares(void)							{CSingleLock PrefLock(&m_Pref_Mutex_CanSeeShares,TRUE); int8 nRet = prefs->m_iSeeShares; return nRet; }
	void	SetCanSeeShares(int8 iCan)					{CSingleLock PrefLock(&m_Pref_Mutex_CanSeeShares,TRUE); prefs->m_iSeeShares = iCan; }
d785 2
a786 2
	int8	GetGraphRatio()								{CSingleLock PrefLock(&m_Pref_Mutex_GraphRatio,TRUE); int8 nRet = prefs->GraphRatio; return nRet; } // propstats Cax2
	void	SetGraphRatio(int iNum)						{CSingleLock PrefLock(&m_Pref_Mutex_GraphRatio,TRUE); prefs->GraphRatio = iNum; } // propstats Cax2
d915 1
d922 7
d936 2
d941 4
d947 4
@


1.11
log
@Improving
@
text
@d749 1
a749 1
	int8	UseFlatBar()								{ return m_nDepth3D.Get(); }
@


1.10
log
@Every variable now has its own lock
@
text
@d24 3
d46 54
a99 13
struct Preferences_Struct{
	char	nick[255];
	uint16	maxupload;
	uint16	maxdownload;
	uint16	port;
	uint16	udpport;
	uint16	maxconnections;
	int8	reconnect;
	int8	deadserver;
	int8	scorsystem;
	char	incomingdir[510];
	char	tempdir[510];
	char	vlcdir[510];
d101 8
a108 8
	int8	autoserverlist;
	int8	updatenotify;
	int8	mintotray;
	int8	autoconnect;
	int8	autoconnectstaticonly; // Barry
	int8	addnewfilespaused;     // Barry
	int8	depth3D;			   // Barry
	int8	addServersFromConn;
d110 1
a110 1
	int16	maxsourceperfile;
d402 5
a406 5
	CMutex	m_Pref_Mutex_Score;
	CMutex	m_Pref_Mutex_Reconnect;
	CMutex	m_Pref_Mutex_DeadServer;
	CMutex	m_Pref_Mutex_UserNick;
	CMutex	m_Pref_Mutex_Port;
d408 6
a413 6
	CMutex	m_Pref_Mutex_UDPPort;
	CMutex	m_Pref_Mutex_IncomingDir;
	CMutex	m_Pref_Mutex_TempDir;
	CMutex	m_Pref_Mutex_VlcDir;
	CMutex	m_Pref_Mutex_MaxUpload;
	CMutex	m_Pref_Mutex_MaxDownload;
d427 2
a428 2
	CMutex	m_Pref_Mutex_MinToTray;
	CMutex	m_Pref_Mutex_AutoConnect;
d509 10
a518 10
	int8	Score()										{CSingleLock PrefLock(&m_Pref_Mutex_Score,TRUE); int8 nRet = prefs->scorsystem; return nRet; }
	void	SetScore(int8 iScore)						{CSingleLock PrefLock(&m_Pref_Mutex_Score,TRUE); prefs->scorsystem = iScore; }
	bool	Reconnect()									{CSingleLock PrefLock(&m_Pref_Mutex_Reconnect,TRUE); bool bRet = prefs->reconnect; return bRet; }
	void	SetReconnect(bool bReconnect)				{CSingleLock PrefLock(&m_Pref_Mutex_Reconnect,TRUE); prefs->reconnect	=	bReconnect; }
	int8	DeadServer()								{CSingleLock PrefLock(&m_Pref_Mutex_DeadServer,TRUE); int8 nRet = prefs->deadserver; return nRet; }
	void	SetDeadServer(int8 iDead)					{CSingleLock PrefLock(&m_Pref_Mutex_DeadServer,TRUE); prefs->deadserver = iDead; }
	CString	GetUserNick()								{CSingleLock PrefLock(&m_Pref_Mutex_UserNick,TRUE); CString sRet = CString(prefs->nick); return sRet; }
	void    SetUserNick(CString strNewNick)				{CSingleLock PrefLock(&m_Pref_Mutex_UserNick,TRUE); strcpy(prefs->nick,strNewNick); }
	uint16	GetPort()									{CSingleLock PrefLock(&m_Pref_Mutex_Port,TRUE); uint16 nRet = prefs->port; return nRet; }
	void	SetPort(uint16 uPort)						{CSingleLock PrefLock(&m_Pref_Mutex_Port,TRUE); prefs->port = uPort; }
d525 8
a532 8
	uint16	GetUDPPort()								{CSingleLock PrefLock(&m_Pref_Mutex_UDPPort,TRUE); uint16 nRet = prefs->udpport; return nRet; }
	void	SetUDPPort(uint16 uPort)					{CSingleLock PrefLock(&m_Pref_Mutex_UDPPort,TRUE); prefs->udpport = uPort; }
	CString	GetIncomingDir()							{CSingleLock PrefLock(&m_Pref_Mutex_IncomingDir,TRUE); CString sRet = CString(prefs->incomingdir); return sRet; }
	void	SetIncomingDir(CString strDir)				{CSingleLock PrefLock(&m_Pref_Mutex_IncomingDir,TRUE); strcpy(prefs->incomingdir,strDir); }
	CString	GetTempDir()								{CSingleLock PrefLock(&m_Pref_Mutex_TempDir,TRUE); CString sRet = prefs->tempdir; return sRet; }
	void	SetTempDir(CString strDir)					{CSingleLock PrefLock(&m_Pref_Mutex_TempDir,TRUE); strcpy(prefs->tempdir,strDir); }
	CString	GetVlcDir()  								{CSingleLock PrefLock(&m_Pref_Mutex_VlcDir,TRUE); CString sRet = prefs->vlcdir; return sRet; }
	void    SetVlcDir(CString strDir)					{CSingleLock PrefLock(&m_Pref_Mutex_VlcDir,TRUE); strcpy(prefs->vlcdir,strDir); }
d534 1
a534 1
	uint16	GetMaxUpload()								{CSingleLock PrefLock(&m_Pref_Mutex_MaxUpload,TRUE); return	prefs->maxupload; }
d554 2
a555 2
	bool	AutoServerlist()							{CSingleLock PrefLock(&m_Pref_Mutex_AutoServerList,TRUE); bool bRet = prefs->autoserverlist; return bRet; }
	void	SetAutoServerlist(bool bAuto)				{CSingleLock PrefLock(&m_Pref_Mutex_AutoServerList,TRUE); prefs->autoserverlist = bAuto; }
d567 5
a571 5
	bool	UpdateNotify()								{ return prefs->updatenotify; }
	bool	DoMinToTray()								{CSingleLock PrefLock(&m_Pref_Mutex_MinToTray,TRUE); bool bRet = prefs->mintotray; return bRet; }
	void	SetMinToTray(bool bMinToTray)				{CSingleLock PrefLock(&m_Pref_Mutex_MinToTray,TRUE); prefs->mintotray = bMinToTray; }
	bool	DoAutoConnect() 							{CSingleLock PrefLock(&m_Pref_Mutex_AutoConnect,TRUE); bool bRet = prefs->autoconnect; return bRet; }
	void    SetAutoConnect(bool bConnect)				{CSingleLock PrefLock(&m_Pref_Mutex_AutoConnect,TRUE); prefs->autoconnect = bConnect; }
d600 2
a601 2
	bool	GetAddServersFromConn()						{CSingleLock PrefLock(&m_Pref_Mutex_AddServersFromConn,TRUE); bool bRet = prefs->addServersFromConn; return bRet; }
	void	SetAddServersFromConn(bool bAdd)			{CSingleLock PrefLock(&m_Pref_Mutex_AddServersFromConn,TRUE); prefs->addServersFromConn = bAdd; }
d633 5
a637 5
	uint16	GetMaxConnections()							{CSingleLock PrefLock(&m_Pref_Mutex_MaxConnections,TRUE); uint16 nRet = prefs->maxconnections; return nRet; }
	void	SetMaxConnections(uint16 uMaxConn)			{CSingleLock PrefLock(&m_Pref_Mutex_MaxConnections,TRUE); prefs->maxconnections = uMaxConn; }
	uint16	GetMaxSourcePerFile()						{CSingleLock PrefLock(&m_Pref_Mutex_MaxSourcesPerFile,TRUE); uint16 nRet = prefs->maxsourceperfile; return nRet; }
	void	SetMaxSourcePerFile(uint16 uVal)			{CSingleLock PrefLock(&m_Pref_Mutex_MaxSourcesPerFile,TRUE); prefs->maxsourceperfile = uVal; }
	uint16	GetMaxSourcePerFileSoft()					{CSingleLock PrefLock(&m_Pref_Mutex_MaxSourcesPerFile,TRUE); uint16 temp = prefs->maxsourceperfile*0.9; if(temp > 1000) return 1000; return temp; }
d640 1
a640 1
	uint16	GetMaxSourcePerFileUDP()					{CSingleLock PrefLock(&m_Pref_Mutex_MaxSourcesPerFile,TRUE); uint16 temp = prefs->maxsourceperfile*0.75; if(temp > 100) return 100; return temp; }
d749 3
a751 3
	int8	UseFlatBar()								{CSingleLock PrefLock(&m_Pref_Mutex_Depth3D,TRUE); int8 nRet = (prefs->depth3D==0); return nRet; }
	uint16	Get3DDepth()                                {CSingleLock PrefLock(&m_Pref_Mutex_Depth3D,TRUE); uint16 nRet = prefs->depth3D; return nRet; }
	void	Set3DDepth(int iStyle)                      {CSingleLock PrefLock(&m_Pref_Mutex_Depth3D,TRUE); prefs->depth3D = iStyle; }
d753 1
a753 1
	int8    AutoConnectStaticOnly()                     { return prefs->autoconnectstaticonly; }	
d841 3
a843 3
	void	SetMaxUpload(uint16 in) 					{CSingleLock PrefLock(&m_Pref_Mutex_MaxUpload,TRUE); prefs->maxupload = in; }
	void	SetMaxDownload(uint16 in) 					{CSingleLock PrefLock(&m_Pref_Mutex_MaxDownload,TRUE); prefs->maxdownload = in; }
	uint16  GetMaxDownloadValue()						{CSingleLock PrefLock(&m_Pref_Mutex_MaxDownload,TRUE); uint16 nRet = prefs->maxdownload; return nRet; }
d868 1
a868 1
	Preferences_Struct* prefs;
d884 28
@


1.9
log
@bugfixes & control panel updates
@
text
@d218 1
a218 1
	int8	reconnectlowid;
d356 104
a459 2
	CMutex	m_Pref_Mutex;		// Lord KiRon
	
d463 12
a474 12
	uint16	Profile()									{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->Profile;} // DonGato
	void	SetProfile(uint16 uProfile)					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->Profile	=	uProfile;} // DonGato
	int8	Score()										{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->scorsystem;}
	void	SetScore(int8 iScore)						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->scorsystem	=	iScore;}
	bool	Reconnect()									{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->reconnect;}
	void	SetReconnect(bool bReconnect)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->reconnect	=	bReconnect;}
	int8	DeadServer()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->deadserver;}
	void	SetDeadServer(int8 iDead)					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->deadserver	=	iDead;}
	CString	GetUserNick()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return CString(prefs->nick);}
	void    SetUserNick(CString strNewNick)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); strcpy(prefs->nick,strNewNick);}
	uint16	GetPort()									{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->port;}
	void	SetPort(uint16 uPort)						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->port	=	uPort;}
d477 3
a479 3
    uint16	GetListenPort()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); if (m_UseProxyListenPort) return ListenPort; else return prefs->port;}
	void	SetListenPort(uint16 uPort)					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); ListenPort = uPort; m_UseProxyListenPort = true;}
	void	ResetListenPort()							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); ListenPort = 0; m_UseProxyListenPort = false;}
d481 10
a490 10
	uint16	GetUDPPort()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->udpport;}
	void	SetUDPPort(uint16 uPort)					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->udpport	=	uPort;}
	CString	GetIncomingDir()							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->incomingdir;}
	void	SetIncomingDir(CString strDir)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); strcpy(prefs->incomingdir,strDir);}
	CString	GetTempDir()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->tempdir;}
	void	SetTempDir(CString strDir)					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); strcpy(prefs->tempdir,strDir);}
	CString	GetVlcDir()  								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->vlcdir;}
	void    SetVlcDir(CString strDir)					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); strcpy(prefs->vlcdir,strDir);}
	uchar*	GetUserHash()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return userhash;}
	uint16	GetMaxUpload()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return	prefs->maxupload;}
d493 41
a533 41
	bool	IsFirstLastMovieChunksEnabled() 			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->firstlastmoviechunks;}
	void	SetFirstLastMovieChunksEnabled(bool bEnable){CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->firstlastmoviechunks	=	bEnable;}
	bool	IsUAPEnabled()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->UAP;}
	void	SetUAPEnabled(bool bEnable)					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->UAP	=	bEnable;}
	bool	IsDAPEnabled()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->DAP;}
	void	SetDAPEnabled(bool bEnable)					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->DAP	=	bEnable;}
	bool	ReconnectLowID() 							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->reconnectlowid;}
	bool	IsDisabledXS()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->disablexs;}
	void	SetDisabledXS(bool bDisable)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->disablexs	=	bDisable;}
	bool	StartDownloadPaused()						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->startdownloadpaused;}
	void	SetStartDownloadPaused(bool bPaused)		{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->startdownloadpaused	=	bPaused;}
	bool	DownloadPausedOnComplete()					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->downloadpausedonclomplete;}
	void	SetDownloadPausedOnComplete(bool bPaused)	{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->downloadpausedonclomplete	=	bPaused;}
	int		IsRemoveNNSEnabled() 						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->remove_nns;}
	void	SetRemoveNNSEnabled(int iEnable)			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->remove_nns	=	iEnable;}
	CString GetToolbarSettings() 						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->toolbarsettings;} // reCDVst
	void	SetToolbarSettings(char* in) 				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); sprintf(prefs->toolbarsettings,"%s",in);} // reCDVst
	bool	AutoServerlist()							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->autoserverlist;}
	void	SetAutoServerlist(bool bAuto)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->autoserverlist	=	bAuto;}
	uchar*	GetA4AFHash(void)							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->A4AF_file_hash;} // Tarod
	void	SetA4AFHash(uchar* file_hash)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); memcpy(prefs->A4AF_file_hash, file_hash, sizeof(prefs->A4AF_file_hash));} // Tarod

	//Apfelteig patch
	uint16	GetHTTPPort()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->httpport;}
	void	SetHTTPPort(uint16 uPort)					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->httpport	=	uPort;}
	CString	GetHTTPPass()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return CString(prefs->httppassword);}
	void	SetHTTPPass(CString strNewPass)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); strcpy(prefs->httppassword, MD5Sum(strNewPass).GetHash());}
	bool	GetHTTPIsEnabled()							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->httpenabled;}
	void	SetHTTPIsEnabled(bool bEnable)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->httpenabled	=	bEnable;}

	bool	UpdateNotify()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->updatenotify;}
	bool	DoMinToTray()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->mintotray;}
	void	SetMinToTray(bool bMinToTray)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->mintotray	=	bMinToTray;}
	bool	DoAutoConnect() 							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->autoconnect;}
	void    SetAutoConnect(bool bConnect)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->autoconnect	=	bConnect;}
	uint32	BadClientBanTime()							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->badclientbantime;}
	void	SetBadClientBanTime(uint32 uTime)			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->badclientbantime	=	uTime;}
	uint32	BadClientMinRequestTime()					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->minrequesttime;}
	void	SetBadClientMinRequestTime(uint32 uTime)	{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->minrequesttime	=	uTime;}
	uint8	BadClientMinRequestNum()					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->badclientban;}
	void	SetBadClientMinRequestNum(uint8 uVal)		{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->badclientban	=	uVal;}
d536 19
a554 19
	uint32	RestoreSourcesTime()						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->slsrestoresourcestime;}
	void	SetRestoreSourcesTime(uint32 uTime)			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->slsrestoresourcestime	=	uTime;}
	uint32	LoadQuantities()							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->slsloadquantities;}
	void 	SetLoadQuantities(uint32 uVal)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->slsloadquantities	=	uVal;}
	uint32	WhenSourcesOutdated()						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->slsoutdated;}
	void	SetWhenSourcesOutdated(uint32 uVal)			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->slsoutdated	=	uVal;}
	uint32	MaxSourcesPerFile()							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->slsmaxsourcesperfile;}
	bool	SLSEnable()									{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->slsenable;}
	void	SetSLSEnable(bool bEnable)					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->slsenable	=	bEnable;}

	uint16	MaximumUploadClients()						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->maxupclientsallowed;}
	void	SetMaximumUploadClients(uint16 uVal)		{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->maxupclientsallowed	=	uVal;}
	uint16	MinimumUploadClients()						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->minupclientsallowed;}
	void	SetMinimumUploadClients(uint16 uVal)		{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->minupclientsallowed	=	uVal;}
	uint16	UploadClientDatarate()						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->uploadclientdatarate;}
	void	SetUploadClientDatarate(uint16 uVal)		{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->uploadclientdatarate	=	uVal;}
	int16	GetQueueSize()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->queuesize ;} // SeeWen QUEUESIZE
	void	SetQueueSize(int16 iSize)					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->queuesize =	iSize;} // SeeWen QUEUESIZE
	int16	GetRemoteQueueLimit()						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->remotequeuelimit; }	//remote qr limit
d556 2
a557 2
	bool	GetAddServersFromConn()						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->addServersFromConn;}
	void	SetAddServersFromConn(bool bAdd)			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->addServersFromConn	=	bAdd;}
d560 27
a586 27
	int8*	GetMinTrayPTR() 							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return &prefs->mintotray;}
	uint16	GetTrafficOMeterInterval() 					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->trafficOMeterInterval;}
	void	SetTrafficOMeterInterval(int16 in) 			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->trafficOMeterInterval=in;}
	uint16	GetStatsInterval() 							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->statsInterval;}
	void	SetStatsInterval(int16 in) 					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->statsInterval=in;}
	uint16  GetStatsColumnWidth()						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->statsColumnWidth;}	// FoRcHa
	void    SetStatsColumnWidth(uint16 in)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->statsColumnWidth = in;}		// -||-
	CString	GetStatsListExpanded()						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->statsListExpanded;}
	void	SetStatsListExpanded(CString in)			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); sprintf(prefs->statsListExpanded, "%s", in);}
	void	Add2TotalDownloaded(uint64 in)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->totalDownloadedBytes+=in;}
	void	Add2TotalUploaded(uint64 in) 				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->totalUploadedBytes+=in;}
	uint64  GetTotalDownloaded()						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->totalDownloadedBytes;}
	uint64	GetTotalUploaded()							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->totalUploadedBytes;}
	bool	IsErrorBeepEnabled()						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->beepOnError;}
	void	SetErrorBeepEnabled(bool bEnable)			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->beepOnError	=	bEnable;}
	void	SetConfirmExitEnabled(bool bEnable)			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->confirmExit=bEnable;}
	bool	UseSplashScreen()							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->splashscreen;}
	void	SetUseSplashScreen(bool bUse)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->splashscreen	=	bUse;}
	bool	FilerBadIPs()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->filerBadIP;}
	void    SetFilerBadIPs(bool bFilter)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->filerBadIP	=	bFilter;}
	bool	IsOnlineSignatureEnabled()  				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->onlineSig;}
	void	SetOnlineSignatureEnabled(bool bEnable)		{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->onlineSig	=	bEnable;}

	int		GetMaxGraphUploadRate()						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->maxGraphUploadRate;}
	int		GetMaxGraphDownloadRate()					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->maxGraphDownloadRate;}
	void	SetMaxGraphUploadRate(int in)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE);prefs->maxGraphUploadRate=in;}
	void	SetMaxGraphDownloadRate(int in)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE);prefs->maxGraphDownloadRate=in;}
d589 12
a600 12
	uint16	GetMaxConnections()							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->maxconnections;}
	void	SetMaxConnections(uint16 uMaxConn)			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->maxconnections	=	uMaxConn;}
	uint16	GetMaxSourcePerFile()						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->maxsourceperfile;}
	void	SetMaxSourcePerFile(uint16 uVal)			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->maxsourceperfile	=	uVal;}
	uint16	GetMaxSourcePerFileSoft()					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); uint16 temp = prefs->maxsourceperfile*0.9; if(temp > 1000) return 1000; return temp;}
	uint16  GetMaxSourcesPerFileSoftValue()				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->maxsourceperfilesoft;}
	void    SetMaxSourcesPerFileSoftValue(uint16 uSrc)  {CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->maxsourceperfilesoft	=	uSrc;}
	uint16	GetMaxSourcePerFileUDP()					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); uint16 temp = prefs->maxsourceperfile*0.75; if(temp > 100) return 100; return temp;}
	uint16  GetMaxSourcesPerFileUDPValue()				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->maxsourceperfileudp;}
	void	SetMaxSourcesPerFileUDPValue(uint16 uVal)	{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->maxsourceperfileudp	=	uVal;}
	uint16	GetDeadserverRetries()						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->deadserverretries;}
	void	SetDeadserverRetries(uint16 uRetries)		{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->deadserverretries	=	uRetries;}
d617 2
a618 2
	bool	GetMultiple()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->m_multiple;} //EpicStruggle
	void	SetMultiple(bool bEnable)					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->m_multiple	=	bEnable;} //EpicStruggle
d620 66
a685 67
	WORD	GetLanguageID()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->languageID;}
	void	SetLanguageID(WORD wID)						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->languageID	=	wID;}
	int8	IsDoubleClickEnabled()						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->transferDoubleclick;}
	void	SetDoubleClickEnabled(int8 iEnable)			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->transferDoubleclick	=	iEnable;}
	int8	CanSeeShares(void)							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->m_iSeeShares;}
	void	SetCanSeeShares(int8 iCan)					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->m_iSeeShares	=	iCan;}
	int8	GetToolTipDelay(void)						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->m_iToolDelayTime;}
	void	SetToolTipDelay(int8 iDelay)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->m_iToolDelayTime	=	iDelay;}
	int8	IsBringToFront()							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->bringtoforeground;}
	void	SetBringToFront(int8 bBTFront)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->bringtoforeground	=	bBTFront;}

	int8    GetSplitterbarPosition()					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->splitterbarPosition;}
	void	SetSplitterbarPosition(int8 pos) 			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->splitterbarPosition=pos;}
	uint16	GetStatsMax()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->statsMax;}
	void	SetStatsMax(uint16 uMaxStats)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->statsMax	=	uMaxStats;}
	int8	UseFlatBar()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return (prefs->depth3D==0);}
	int8	GetStatsAverageMinutes()					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->statsAverageMinutes;}
	void	SetStatsAverageMinutes(int8 in)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->statsAverageMinutes=in;}

	bool	GetShowToolbarSpeedMeter()					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->showToolbarSpeedMeter;}
	void	SetShowToolbarSpeedMeter(bool bShow)		{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->showToolbarSpeedMeter	=	bShow;}
	bool    GetCloseToTray()							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->closeToTray;};
	void	SetCloseToTray(bool bClose)					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->closeToTray	=	bClose;};
	bool    GetDetailsOnClick()							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->DetailsOnClick;};
	void    SetDetailsOnClick(bool bSet)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->DetailsOnClick	=	bSet;};
	bool    GetBugReport()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->BugReport;};
	bool    GetUseDownloadAddNotifier()					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->useDownloadAddNotifier;}
	void    SetUseDownloadAddNotifier(bool bUse)		{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->useDownloadAddNotifier	=	bUse;}
	bool    GetUseDownloadNotifier() 					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->useDownloadNotifier;}
	void    SetUseDownloadNotifier(bool bUse)			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->useDownloadNotifier	=	bUse;}
	bool    GetUseChatNotifier()						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->useChatNotifier;}
	void    SetUseChatNotifier(bool bUse)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->useChatNotifier	=	bUse;}
	bool    GetUseLogNotifier()			 				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->useLogNotifier;}
	void    SetUseLogNotifier(bool bUse) 				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->useLogNotifier	=	bUse;}
	bool    GetUseSoundInNotifier()		 				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->useSoundInNotifier;}
	void    SetUseSoundInNotifier(bool bUse)			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->useSoundInNotifier	=	bUse;}
	bool    GetNotifierPopsEveryChatMsg()				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->notifierPopsEveryChatMsg;}
	void    SetNotifierPopsEveryChatMsg(bool bPop)		{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->notifierPopsEveryChatMsg	=	bPop;}
	bool	GetNotifierPopOnImportantError()			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->notifierImportantError;}
	void	SetNotifierPopOnImportantError(bool bPop)	{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->notifierImportantError	=	bPop;}
	CString GetNotifierWavSoundPath() 					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return CString(prefs->notifierSoundFilePath);}
	void	SetNotifierWavSoundPath(CString strPath)	{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); sprintf(prefs->notifierSoundFilePath,"%s",strPath);}

	CString	GetIRCNick()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return (CString)prefs->m_sircnick;}
	void	SetIRCNick( char in_nick[] )				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); strcpy(prefs->m_sircnick,in_nick);}
	CString	GetIRCServer()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return (CString)prefs->m_sircserver;}
	void	SetIRCServer( char in_serv[] )				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); strcpy(prefs->m_sircserver,in_serv);}
	bool	GetIRCAddTimestamp()						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->m_bircaddtimestamp;}
	void	SetIRCAddTimestamp( bool flag )				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->m_bircaddtimestamp = flag;}
	CString	GetIRCChanNameFilter()						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return (CString)prefs->m_sircchannamefilter;}
	bool	GetIRCUseChanFilter()						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->m_bircusechanfilter;}
	uint16	GetIRCChannelUserFilter()					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return	prefs->m_iircchanneluserfilter;}
	void	SetIRCChanNameFilter(char in_name[])		{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); strcpy(prefs->m_sircchannamefilter,in_name);}
	void	SetIRCUseChanFilter(bool flag)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->m_bircusechanfilter = flag;}
	void	SetIRCChanUserFilter(uint16 in_user)		{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->m_iircchanneluserfilter = in_user;}
	CString	GetIrcPerformString()						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return (CString)prefs->m_sircperformstring;}
	bool	GetIrcUsePerform()							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->m_bircuseperform;}
	bool	GetIRCListOnConnect()						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->m_birclistonconnect;}
	void	SetIRCListonConnect(bool flag)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->m_birclistonconnect = flag;}
	void	SetIRCPerformString(char in_perf[])			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); strcpy(prefs->m_sircperformstring, in_perf);}
	void	SetIrcUsePerform(bool flag)					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->m_bircuseperform = flag;}
	bool	GetIrcAcceptLinks()							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->m_bircacceptlinks;}
	void	SetIrcAcceptLInks(bool flag)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->m_bircacceptlinks = flag;}
	bool	GetIrcIgnoreInfoMessage()					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->m_bircignoreinfomessage;}
	void	SetIrcIgnoreInfoMessage(bool flag)			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->m_bircignoreinfomessage = flag;}
	bool	GetIrcIgnoreEmuleProtoInfoMessage()			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->m_bircignoreemuleprotoinfomessage;}
	void	SetIrcIgnoreEmuleProtoInfoMessage(bool flag){CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->m_bircignoreemuleprotoinfomessage = flag;}
d687 14
a700 14
	bool	GetStartMinimized()							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->startMinimized;}
	void    SetStartMinimized(bool bStart)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->startMinimized = bStart;}
	bool	GetSmartIdCheck()							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->smartidcheck;}
	void	SetSmartIdCheck(bool in_smartidcheck)		{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->smartidcheck = in_smartidcheck;}
	uint8	GetSmartIdState()							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->smartidstate;}
	void	SetSmartIdState(uint8 in_smartidstate)		{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->smartidstate = in_smartidstate;}

	bool	GetVerbose()						        {CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->m_bVerbose;}
	void 	SetVerbose(bool bEnabled)			        {CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->m_bVerbose = bEnabled;}
	bool	GetPreviewPrio()					        {CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->m_bpreviewprio;}
	bool	GetUpdateQueueList()				        {CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->m_bupdatequeuelist;}
	void    SetUpdateQueueList(bool bEnabled)			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->m_bupdatequeuelist = bEnabled;}
	bool	GetManualHighPrio()					        {CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->m_bmanualhighprio;}
	bool	ShowOverhead()						        {CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->m_bshowoverhead;}
d702 1
a702 1
	char*	GetTxtEditor()						        {CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->TxtEditor;}
d705 32
a736 31
	uint16	Get3DDepth()                                {CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->depth3D;}
	void	Set3DDepth(int iStyle)                      {CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->depth3D = iStyle;}
	bool	AddNewFilesPaused()                         {CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->addnewfilespaused;}
	int8    AutoConnectStaticOnly()                     {CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->autoconnectstaticonly;}	

	DWORD	GetStatsColor(int index) 					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->statcolors[index];}
	void	SetStatsColor(int index,DWORD value) 		{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->statcolors[index] = value;}
	int8	GetGraphRatio()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->GraphRatio;} // propstats Cax2
	void	SetGraphRatio(int iNum)						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->GraphRatio = iNum;} // propstats Cax2
	bool	DoUseSort()									{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->useSort;} //sortdlg Cax2
	void    SetUseSort(bool bUseSort)					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->useSort	=	bUseSort;} //sortdlg Cax2
	bool	DoUseSrcSortCol2()							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->useSrcSortCol2;}
	void	SetUseSrcSortCol2(bool bUseSort)			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->useSrcSortCol2	=	bUseSort;}
	int8	GetServerSortCol()							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->serverSortCol;}
	void	SetServerSortCol(int8 iCol)					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->serverSortCol	=	iCol;}
	int8	GetUploadSortCol()							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->uploadSortCol;}
	void	SetUploadSortCol(int8 iSortCol)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->uploadSortCol	=	iSortCol;}
	int8	GetQueueSortCol()							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->queueSortCol;}
	void	SetQueueSortCol(int8 iSortCol)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->queueSortCol	=	iSortCol;}
	int8	GetSearchSortCol()							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->searchSortCol;}
	void	SetSearchSortCol(int8 iSortCol)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->searchSortCol = iSortCol;}
	int8	GetIrcSortCol()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->ircSortCol;}
	void	SetIrcSortCol(int8 iSortCol)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->ircSortCol	=	iSortCol;}
	uint16	GetFileSortCol()							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->fileSortCol;}
	void	SetFileSortCol(uint16 uCol)					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->fileSortCol	=	uCol;}
	int8	GetDownloadSortCol()						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->downloadSortCol;}
	void	SetDownloadSortCol(int8 iSortCol)			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->downloadSortCol	=	iSortCol;}
	int8	GetSrcSortCol1()							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->srcSortCol1;}
	void	SetSrcSortCol1(int8 iSortCol)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->srcSortCol1	=	iSortCol;}
	int8	GetSrcSortCol2()							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->srcSortCol2;}
	void	SetSrcSortCol2(int8 iSortCol)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->srcSortCol2	=	iSortCol;}
d738 1
a738 3
	void	SetMaxDownloadConperFive(int in)			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->MaxConperFive=in;}
	

d744 2
a745 2
	bool	IsSafeConnectEnabled()						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->SafeConnect;}
	void	SetSafeConnectEnabled(bool in)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->SafeConnect=in;}
d748 6
a753 6
	bool	DoUsePT()									{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->m_pt_useit;} // Cax2 05/01/03
	void	SetUsePT(bool in)							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->m_pt_useit = in;}	// Cax2 05/01/03
	uint8	GetUpbarStyle()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->m_upbar_st;}
	void	SetUpbarStyle(uint8 uStyle)					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->m_upbar_st	=	uStyle;}
	uint8	GetUpbarColor()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->m_upbar_cl;}
	void	SetUpbarColor(uint8 uColor)					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->m_upbar_cl	= uColor;}
d757 38
a794 38
	bool	CommunityEnabled()							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->CommunityEnabled;}
	void	SetCommunityEnabled(bool bEnable)			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->CommunityEnabled	=	bEnable;}
	CString	CommunityString()							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return CString(prefs->CommunityString);}
	void	SetCommunityString(CString strComm)			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); strcpy(prefs->CommunityString,strComm);}
	bool	CommunityNoBanEnabled()						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->CommunityNoBan;}
	void	SetCommunityNoBanEnabled(bool bEnable)		{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->CommunityNoBan	=	bEnable;}
	uint32 	NotificationDisplayTime()					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->NotificationDisplayTime;}
	void 	SetNotificationDisplayTime(uint32 uTime)	{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->NotificationDisplayTime	=	uTime;}
	uint32 	NotificationFontSize()						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->NotificationFontSize;}
	void 	SetNotificationFontSize(uint32 uFontSize)	{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->NotificationFontSize	=	uFontSize;}
	int16 	PriorityHigh()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->PriorityHigh;}
	void 	SetPriorityHigh(int16 iPrio)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->PriorityHigh	=	iPrio;}
	int16 	PriorityLow()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->PriorityLow;}
	void 	SetPriorityLow(int16 iPrio)					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->PriorityLow	=	iPrio;}
	bool	RestartWaiting()							{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->RestartWaiting;}
	void	SetRestartWaiting(bool bSet)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->RestartWaiting	=	bSet;}
	bool	LogToFile()									{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->LogToFile;}
	void	SetLogToFile(bool bEnable)					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->LogToFile	=	bEnable;}
	bool	TransferFullChunks()						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->TransferFullChunks;}
	void	SetTransferFullChunks(bool bEnable)			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->TransferFullChunks	=	bEnable;}
	bool	DisableXSUpTo()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->DisableXSUpTo;}
	void	SetDisableXSUpTo(bool bDisable)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->DisableXSUpTo	=	bDisable;}
	uint16	XSUpTo()									{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->XSUpTo;}
	void	SetXSUpTo(uint16 uVal)						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->XSUpTo	=	uVal;}
	uint32  SrvConTimeout()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->SrvConTimeout;};
	void	SetSrvConTimeout(uint32 timeout)			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->SrvConTimeout	=	timeout;};
	bool	SlowComplete()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->SlowComplete;};
	void	SetSlowComplete(uint16 bSlow)				{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->SlowComplete	=	bSlow;};
	uint16	SlowCompleteBlockSize()						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->SlowCompleteBlockSize;};
	void	SetSlowCompleteBlockSize(uint16 uSize)		{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->SlowCompleteBlockSize	=	uSize;};
	CString	GetUsedFont()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return (CString)prefs->UsedFont;}
	void	SetUsedFont(CString font)					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); strcpy(prefs->UsedFont,font);}
	uint8	GetFontSize()									{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->FontSize;}
	void	SetFontSize(uint8 size)					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->FontSize=size;}
	int8	GetHashingPriority(void)					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->HashingPriority;}
	void	SetHashingPriority(int8 hashing)			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->HashingPriority = hashing;}
	bool	IsUploadPartsEnabled()						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->UploadParts;}
	void	SetUploadPartsEnabled(bool bEnable)			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->UploadParts = bEnable;}
d797 3
a799 3
	void	SetMaxUpload(uint16 in) 					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->maxupload =in;};
	void	SetMaxDownload(uint16 in) 					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->maxdownload=in;};
	uint16  GetMaxDownloadValue()						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->maxdownload;};
d801 2
a802 2
	WINDOWPLACEMENT GetEmuleWindowPlacement()			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->EmuleWindowPlacement;}
	void SetWindowLayout(WINDOWPLACEMENT in) 			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->EmuleWindowPlacement=in;}
d808 4
a811 4
	bool	GetMlDonkeyCM()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->MlDonkeyCM;}
	void	SetMlDonkeyCM(bool bEnable)					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->MlDonkeyCM = bEnable;}
	ProxySettings GetProxy()                            {CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->proxy;}
	void SetProxySettings(ProxySettings proxysettings)  {CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->proxy	= proxysettings;}
@


1.8
log
@Updates to Preferences (and enabling/disabling options in code because of that)
@
text
@d56 1
a61 1
	int8	autotakeed2klinks;     // Barry
d64 2
a65 2
	int8	addserversfromserver;
	int8	addserversfromclient;
d98 4
d159 1
d169 1
d267 1
d273 1
a273 2
	int8	addserversfromserver;
	int8	addserversfromclient;
d289 1
d295 1
a295 1
	int8	addserversfromserver;
d324 1
d330 1
a330 1
	int8	addserversfromserver;
d351 1
a351 1
	enum Table {tableDownload, tableUpload, tableQueue, tableSearch, tableShared, tableServer};
a352 14
	/*friend class CPreferencesWnd;
	friend class CPPgGeneral;
	friend class CPPgConnection;
	friend class CPPgServer;
	friend class CPPgAdvanced;
	friend class CPPgDirectories;
	friend class CPPgFiles;
	friend class CPPgIRC;
	friend class CPPgHTTPD; 	// Apfelteig Patch
	friend class CPPgStats;
	friend class CPPgNotify;
	friend class CPPgModPT;		// xrmb
	friend class CPPgSorting; 	// sortdlg Cax2
	friend class CPPgWindow;	// DonGato*/
d454 4
a457 4
	bool	AddServersFromServer()						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->addserversfromserver;}
	void	SetAddServersFromServer(bool bAdd)			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->addserversfromserver	=	bAdd;}
	bool	AddServersFromClient()						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->addserversfromclient;}
	void	SetAddServersFromClient(bool bAdd)			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->addserversfromclient	=	bAdd;}
a472 1
	bool	IsConfirmExitEnabled()						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->confirmExit;}
a605 1
	bool	AutoTakeED2KLinks()                         {CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->autotakeed2klinks;}
d675 2
d689 2
@


1.7
log
@Stupid bug fix - return hash as string - zero in the middle truncates it
@
text
@a55 1
	int8	ICH;
a154 1
	bool	TransferFullChunks;
a213 1
	int8	throttleupload;
d245 1
a245 1
	TMlDonkeyBehavior MlDonkeyBehavior;
a260 1
	int8	ICH;
a282 1
	int8	ICH;
a316 1
	int8	ICH;
a394 2
	bool	IsICHEnabled()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->ICH;}
	void	SetICHEnabled(bool bEnable)					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->ICH	=	bEnable;}
a405 2
	bool	IsThrottleUploadEnabled() 					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->throttleupload;}
	void	SetThrottleUploadEnabled(bool bEnable)		{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->throttleupload	=	bEnable;}
d601 1
d604 1
a682 2
	bool	TransferFullChunks()						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->TransferFullChunks;}
	void	SetTransferFullChunks(bool bEnable)			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->TransferFullChunks	=	bEnable;}
d712 2
a713 2
	TMlDonkeyBehavior GetMlDonkeyBehviour()             {CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->MlDonkeyBehavior;}
	void SetMlDonkeyBehviour(TMlDonkeyBehavior Beh)     {CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->MlDonkeyBehavior	= Beh;}
@


1.6
log
@merge fixes and minor optimizations
@
text
@d399 1
a399 1
	CString	GetUserHash()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return userhash;}
d745 1
a745 1
	char userhash[16];
@


1.5
log
@3D Depth selection for progress bar from 25b
@
text
@d78 3
a80 3
	int16	downloadColumnWidths[9];
	BOOL	downloadColumnHidden[9];
	INT		downloadColumnOrder[9];
a225 1
	bool	m_bstartnextfile;
a613 1
	bool	StartNextFile()						        {CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->m_bstartnextfile;}
@


1.5.2.1
log
@updating this branch...
@
text
@@


1.5.2.2
log
@merge bugfixes
@
text
@d226 1
d615 1
@


1.5.2.3
log
@merge cleanup!
@
text
@d78 3
a80 3
	int16	downloadColumnWidths[11];	//Cax2 remember columns fix
	BOOL	downloadColumnHidden[11];
	INT		downloadColumnOrder[11];
@


1.5.2.4
log
@Interim release!
@
text
@d78 1
a78 1
	int16	downloadColumnWidths[11];	//more columns
@


1.5.2.5
log
@updated control panes, and assorted bugfixes
@
text
@d56 1
a56 1
	//int8	ICH;
d62 1
d65 2
a66 2
	int8	addServersFromConn;
	//int8	addserversfromclient;
a98 4
	//Cax2 irc columns
	int16	ircColumnWidths[3];
	BOOL	ircColumnHidden[3];
	INT		ircColumnOrder[3];
a165 1
	uint8	FontSize;
d216 1
d248 1
a248 1
	bool	MlDonkeyCM;
d264 1
a264 1
	//int8	ICH;
d270 2
a271 1
	int8	addServersFromConn;
d293 1
a293 1
	int8	addServersFromConn;
d328 1
a328 1
	int8	addServersFromConn;
d349 1
a349 1
	enum Table {tableDownload, tableUpload, tableQueue, tableSearch, tableShared, tableServer, tableIrc};
d399 1
a399 1
	uchar*	GetUserHash()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return userhash;}
d401 2
d414 2
d470 4
a473 4
	bool	GetAddServersFromConn()						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->addServersFromConn;}
	void	SetAddServersFromConn(bool bAdd)			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->addServersFromConn	=	bAdd;}
	//bool	AddServersFromClient()						{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->addserversfromclient;}
	//void	SetAddServersFromClient(bool bAdd)			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->addserversfromclient	=	bAdd;}
d489 1
a610 1
	void 	SetVerbose(bool bEnabled)			        {CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->m_bVerbose = bEnabled;}
a612 1
	void    SetUpdateQueueList(bool bEnabled)			{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->m_bupdatequeuelist = bEnabled;}
d621 1
a704 2
	uint8	GetFontSize()									{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->FontSize;}
	void	SetFontSize(uint8 size)					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->FontSize=size;}
d722 2
a723 2
	bool	GetMlDonkeyCM()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->MlDonkeyCM;}
	void	SetMlDonkeyCM(bool bEnable)					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->MlDonkeyCM = bEnable;}
d745 1
a745 1
	uchar userhash[16];
@


1.5.2.6
log
@minor code cleanup, ported from the main branch
@
text
@d267 1
a267 1
	int8	ICH;
d353 14
@


1.4
log
@updated to .25b codebase
@
text
@d551 1
a551 2
	int8	UseFlatBar()								{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->flatbar;}
	void	SetUseFlatBar(int8 iUse)					{CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->flatbar	=	iUse;}
d622 1
@


1.3
log
@final port to .25b!
@
text
@d400 1
a400 1
	CString	GetUserHash()								{return userhash;}
d612 6
a617 6
	bool	GetVerbose()						{return prefs->m_bVerbose;}
	bool	GetPreviewPrio()					{return prefs->m_bpreviewprio;}
	bool	GetUpdateQueueList()				{return prefs->m_bupdatequeuelist;}
	bool	GetManualHighPrio()					{return prefs->m_bmanualhighprio;}
	bool	StartNextFile()						{return prefs->m_bstartnextfile;}
	bool	ShowOverhead()						{return prefs->m_bshowoverhead;}
d619 1
a619 1
	char*	GetTxtEditor()						{return prefs->TxtEditor;}
d622 4
a625 4
	uint16	Get3DDepth() { return prefs->depth3D;}
	bool	AutoTakeED2KLinks() {return prefs->autotakeed2klinks;}
	bool	AddNewFilesPaused() {return prefs->addnewfilespaused;}
	int8 AutoConnectStaticOnly() {return prefs->autoconnectstaticonly;}	
d718 1
a718 1
	void SetWindowLayout(WINDOWPLACEMENT in) 			{prefs->EmuleWindowPlacement=in;}
d724 4
a727 4
	TMlDonkeyBehavior GetMlDonkeyBehviour() {CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->MlDonkeyBehavior;}
	void SetMlDonkeyBehviour(TMlDonkeyBehavior Beh) {CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->MlDonkeyBehavior	= Beh;}
	ProxySettings GetProxy() {CSingleLock PrefLock(&m_Pref_Mutex,TRUE); return prefs->proxy;}
	void SetProxySettings(ProxySettings proxysettings) {CSingleLock PrefLock(&m_Pref_Mutex,TRUE); prefs->proxy	= proxysettings;}
d732 3
@


1.2
log
@*** empty log message ***
@
text
@d61 4
d127 1
d192 1
d222 22
a243 2
	// EpicStruggle 
	bool	m_multiple;
d245 2
a246 2
	// reCDVst
	char	toolbarsettings[256];
d469 2
d525 8
d612 15
d719 1
a719 1
		static int	GetRecommendedMaxConnections();
@


1.1
log
@*** empty log message ***
@
text
@d32 10
d224 1
d360 6
d675 2
d695 4
@

